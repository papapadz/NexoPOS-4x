/*! For license information please see popups.min.js.LICENSE.txt */
(self.webpackChunkNexoPOS_4x=self.webpackChunkNexoPOS_4x||[]).push([[820],{277:(e,t,r)=>{"use strict";r.d(t,{l:()=>M,kq:()=>te,ih:()=>H,kX:()=>K});var n=r(6486),s=r(9669),i=r(6300),o=r(8345),a=r(4085),l=r(9248),u=r(230);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:String(t)}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new l.x}var t,r,n;return t=e,r=[{key:"defineClient",value:function(e){this._client=e}},{key:"post",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("post",e,t,r)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("get",e,void 0,t)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("delete",e,void 0,t)}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("put",e,t,r)}},{key:"response",get:function(){return this._lastRequestData}},{key:"_request",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=te.applyFilters("http-client-url",t.replace(/\/$/,"")),this._subject.next({identifier:"async.start",url:t,data:n}),new u.y((function(i){r._client[e](t,n,Object.assign(Object.assign({},r._client.defaults[e]),s)).then((function(e){r._lastRequestData=e,i.next(e.data),i.complete(),r._subject.next({identifier:"async.stop"})})).catch((function(e){var t;i.error((null===(t=e.response)||void 0===t?void 0:t.data)||e.response||e),r._subject.next({identifier:"async.stop"})}))}))}},{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,r=e.value;this._subject.next({identifier:t,value:r})}}],r&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),v=r(3);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:String(t)}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new v.t}var t,r,n;return t=e,(r=[{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,r=e.value;this._subject.next({identifier:t,value:r})}}])&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_=r(6515);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function x(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:String(t)}var C=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={},this.behaviorState=new _.X({}),this.behaviorState.subscribe((function(e){r.state=e})),this.setState(t)}var t,r,n;return t=e,(r=[{key:"setState",value:function(e){this.behaviorState.next(Object.assign(Object.assign({},this.state),{object:e}))}}])&&w(t.prototype,r),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j=r(2401),k=r(8272),P=r(381),S=r(2285),O=r(538),$=r(40);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function F(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:String(t)}var V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=ns.base_url}var t,r,n;return t=e,(r=[{key:"get",value:function(e){return this.url+e}}])&&A(t.prototype,r),n&&A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),T=O.default.filter("abbreviate",(function(e){var t=e;if(e>=1e3){for(var r,n=Math.floor((""+e).length/3),s=2;s>=1;s--){if(((r=parseFloat((0!=n?e/Math.pow(1e3,n):e).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}r%1!=0&&(r=r.toFixed(1)),t=r+["","k","m","b","t"][n]}return t})),q=r(6261),Z=r(7761);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:String(t)}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instances=new Object}var t,r,n;return t=e,(r=[{key:"getInstance",value:function(e){return this.instances[e]}},{key:"defineInstance",value:function(e,t){this.instances[e]=t}}])&&N(t.prototype,r),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),z=r(2319),I=r(9165),X=r(4914),Q=r(4503),U=r(4554);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function Y(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:String(t)}var B=r(6606);window._=n,window.ChartJS=i,window.Pusher=B,window.Vue=O.default,window.moment=P,window.Axios=s,window.__=I.__,window.__m=I.c,window.VueRouter=o.ZP,window.SnackBar=a.S,window.nsHooks=(0,z.Hu)(),window.popupResolver=X.Z,window.popupCloser=Q.Z,window.Axios.defaults.headers.common["x-requested-with"]="XMLHttpRequest",window.Axios.defaults.withCredentials=!0,ns.websocket.enabled&&(window.Echo=new U.ZP({broadcaster:"pusher",key:ns.websocket.key,wsHost:ns.websocket.host,wsPort:ns.websocket.port,wssPort:ns.websocket.port,namespace:"",forceTLS:ns.websocket.secured,disableStats:!0,encrypted:ns.websocket.secured,enabledTransports:ns.websocket.secured?["ws","wss"]:["ws"],disabledTransports:ns.websocket.secured?["sockjs","xhr_polling","xhr_streaming"]:[]}));var M=new y,H=new p,K=new a.S,J=new V,ee=new R,te=window.nsHooks,re=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.breakpoint="",this.detectScreenSizes(),(0,j.R)(window,"resize").subscribe((function(e){return t.detectScreenSizes()}))}var t,r,n;return t=e,(r=[{key:"detectScreenSizes",value:function(){switch(!0){case window.outerWidth>0&&window.outerWidth<=480:this.breakpoint="xs";break;case window.outerWidth>480&&window.outerWidth<=640:this.breakpoint="sm";break;case window.outerWidth>640&&window.outerWidth<=1024:this.breakpoint="md";break;case window.outerWidth>1024&&window.outerWidth<=1280:this.breakpoint="lg";break;case window.outerWidth>1280:this.breakpoint="xl"}}}])&&W(t.prototype,r),n&&W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),ne=new C({sidebar:["xs","sm","md"].includes(re.breakpoint)?"hidden":"visible"});H.defineClient(s),window.nsEvent=M,window.nsHttpClient=H,window.nsSnackBar=K,window.nsCurrency=q.W,window.nsTruncate=Z.b,window.nsRawCurrency=q.f,window.nsAbbreviate=T,window.nsState=ne,window.nsUrl=J,window.nsScreen=re,window.ChartJS=i,window.EventEmitter=y,window.Popup=S.G,window.RxJS=k,window.FormValidation=$.Z,window.nsCrudHandler=ee},6261:(e,t,r)=>{"use strict";r.d(t,{W:()=>u,f:()=>c});var n=r(538),s=r(2077),i=r.n(s),o=r(6740),a=r.n(o),l=new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join(""),u=n.default.filter("currency",(function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full";switch(ns.currency.ns_currency_prefered){case"iso":t=ns.currency.ns_currency_iso;break;case"symbol":t=ns.currency.ns_currency_symbol}if("full"===n){var s={decimal:ns.currency.ns_currency_decimal_separator,separator:ns.currency.ns_currency_thousand_separator,precision:parseInt(ns.currency.ns_currency_precision),symbol:""};r=a()(e,s).format()}else r=i()(e).format("0.0a");return"".concat("before"===ns.currency.ns_currency_position?t:"").concat(r).concat("after"===ns.currency.ns_currency_position?t:"")})),c=function(e){var t="0.".concat(l);return parseFloat(i()(e).format(t))}},7761:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var n=r(538).default.filter("truncate",(function(e,t){return e?(e=e.toString()).length>t?e.substring(0,t)+"...":e:""}))},40:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}r.d(t,{Z:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,r=[{key:"validateFields",value:function(e){var t=this;return 0===e.map((function(e){return t.checkField(e),e.errors?0===e.errors.length:0})).filter((function(e){return!1===e})).length}},{key:"validateFieldsErrors",value:function(e){var t=this;return e.map((function(e){return t.checkField(e),e.errors})).flat()}},{key:"validateForm",value:function(e){e.main&&this.validateField(e.main);var t=[];for(var r in e.tabs){var n=[],s=this.validateFieldsErrors(e.tabs[r].fields);s.length>0&&n.push(s),e.tabs[r].errors=n.flat(),t.push(n.flat())}return t.flat().filter((function(e){return void 0!==e}))}},{key:"initializeTabs",value:function(e){var t=0;for(var r in e)0===t&&(e[r].active=!0),e[r].active=void 0!==e[r].active&&e[r].active,e[r].fields=this.createFields(e[r].fields),t++;return e}},{key:"validateField",value:function(e){return this.checkField(e)}},{key:"fieldsValid",value:function(e){return!(e.map((function(e){return e.errors&&e.errors.length>0})).filter((function(e){return e})).length>0)}},{key:"createFields",value:function(e){return e.map((function(e){return e.type=e.type||"text",e.errors=e.errors||[],e.disabled=e.disabled||!1,"custom"===e.type&&(e.component=nsExtraComponents[e.name]),e}))}},{key:"createForm",value:function(e){if(e.main&&(e.main=this.createFields([e.main])[0]),e.tabs)for(var t in e.tabs)e.tabs[t].fields=this.createFields(e.tabs[t].fields),e.tabs[t].errors=[];return e}},{key:"enableFields",value:function(e){return e.map((function(e){return e.disabled=!1}))}},{key:"disableFields",value:function(e){return e.map((function(e){return e.disabled=!0}))}},{key:"disableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!0),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!0}))}},{key:"enableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!1),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!1}))}},{key:"getValue",value:function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"checkField",value:function(e){var t=this;return void 0!==e.validation&&(e.errors=[],this.detectValidationRules(e.validation).forEach((function(r){t.fieldPassCheck(e,r)}))),e}},{key:"extractForm",value:function(e){var t={};if(e.main&&(t[e.main.name]=e.main.value),e.tabs)for(var r in e.tabs)void 0===t[r]&&(t[r]={}),t[r]=this.extractFields(e.tabs[r].fields);return t}},{key:"extractFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"detectValidationRules",value:function(e){var t=function(e){var t;return["email","required"].includes(e)?{identifier:e}:(t=/(min)\:([0-9])+/g.exec(e))||(t=/(max)\:([0-9])+/g.exec(e))?{identifier:t[1],value:t[2]}:e};return Array.isArray(e)?e.filter((function(e){return"string"==typeof e})).map(t):e.split("|").map(t)}},{key:"triggerError",value:function(e,t){if(t.errors){var r=function(r){var n=r.split(".").filter((function(e){return!/^\d+$/.test(e)}));2===n.length&&e.tabs[n[0]].fields.forEach((function(e){e.name===n[1]&&t.errors[r].forEach((function(t){var r={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(r)}))})),r===e.main.name&&t.errors[r].forEach((function(t){e.main.errors.push({identifier:"invalid",invalid:!0,message:t,name:e.main.name})}))};for(var n in t.errors)r(n)}}},{key:"triggerFieldsErrors",value:function(e,t){if(t&&t.errors){var r=function(r){e.forEach((function(e){e.name===r&&t.errors[r].forEach((function(t){var r={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(r)}))}))};for(var n in t.errors)r(n)}}},{key:"fieldPassCheck",value:function(e,t){if("required"===t.identifier){if(void 0===e.value||null===e.value||0===e.value.length)return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(r,n){r.identifier===t.identifier&&!0===r.invalid&&e.errors.splice(n,1)}))}if("email"===t.identifier&&e.value.length>0){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e.value))return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(r,n){!0===r[t.identifier]&&e.errors.splice(n,1)}))}return e}}],r&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},9165:(e,t,r)=>{"use strict";r.d(t,{__:()=>n,c:()=>s});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NexoPOS";return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e},s=function(e,t){return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e}},4503:(e,t,r)=>{"use strict";function n(){var e=this;Object.keys(this).includes("$popup")&&this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close()),"press-esc"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close())}))}r.d(t,{Z:()=>n})},4914:(e,t,r)=>{"use strict";function n(e){void 0!==this.$popupParams.resolve&&this.$popupParams.reject&&(!1!==e?this.$popupParams.resolve(e):this.$popupParams.reject(e)),this.$popup.close()}r.d(t,{Z:()=>n})},2285:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(9248);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={primarySelector:void 0,popupClass:"shadow-lg h-half w-1/2 bg-white"},this.container=document.createElement("div"),this.popupBody=document.createElement("div"),this.config=Object.assign(this.config,t),void 0===this.config.primarySelector&&document.querySelectorAll(".is-popup").length>0){var r=document.querySelectorAll(".is-popup").length;this.parentWrapper=document.querySelectorAll(".is-popup")[r-1]}else this.parentWrapper=document.querySelector("body").querySelectorAll("div")[0];this.event=new n.x}var t,r,s;return t=e,r=[{key:"open",value:function(e){var t,r,n,s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=document.querySelector("body").querySelectorAll("div")[0];this.parentWrapper.style.filter="blur(4px)",o.style.filter="blur(6px)",this.container.setAttribute("class","absolute top-0 left-0 w-full h-full flex items-center justify-center is-popup"),this.container.addEventListener("click",(function(e){s.event.next({event:"click-overlay",value:!0}),e.stopPropagation()})),this.popupBody.addEventListener("click",(function(e){e.stopImmediatePropagation()})),this.container.style.background="rgb(51 51 51 / 20%)",this.container.id="popup-container-"+document.querySelectorAll(".is-popup").length,this.popupBody.setAttribute("class"," zoom-out-entrance"),this.popupBody.innerHTML='<div class="popup-body"></div>',this.container.appendChild(this.popupBody),document.body.appendChild(this.container);var a=Vue.extend(e);this.instance=new a({propsData:{popup:this}}),this.instance.template=(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.template)||void 0,this.instance.render=e.render||void 0,this.instance.methods=(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.methods)||(null==e?void 0:e.methods),this.instance.data=(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.data)||(null==e?void 0:e.data),this.instance.$popup=this,this.instance.$popupParams=i,this.instance.$mount("#".concat(this.container.id," .popup-body"))}},{key:"close",value:function(){var e=this;this.instance.$destroy(),this.event.unsubscribe(),this.parentWrapper.style.filter="blur(0px)";var t=document.querySelector("body").querySelectorAll("div")[0];document.querySelectorAll(".is-popup").length<=1&&(t.style.filter="blur(0px)"),this.popupBody.classList.remove("zoom-out-entrance"),this.popupBody.classList.add("zoom-in-exit"),this.container.classList.remove("is-popup"),setTimeout((function(){e.container.remove()}),300)}}],s=[{key:"show",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return n.open(t,r),n}}],r&&i(t.prototype,r),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},4085:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});var n=r(3260);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===window.snackbarQueue&&(window.snackbarQueue=[],this.queue=window.snackbarQueue)}var t,r,s;return t=e,r=[{key:"show",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return n.Observable.create((function(n){var i=r.__createSnack({message:e,label:t,type:s.type}),o=i.buttonNode,a=(i.textNode,i.snackWrapper,i.sampleSnack);o.addEventListener("click",(function(e){n.onNext(o),n.onCompleted(),a.remove()})),r.__startTimer(s.duration,a)}))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"error"};return this.show(e,t,Object.assign(Object.assign({},r),{type:"error"}))}},{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"success"};return this.show(e,t,Object.assign(Object.assign({},r),{type:"success"}))}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return this.show(e,t,Object.assign(Object.assign({},r),{type:"info"}))}},{key:"__startTimer",value:function(e,t){var r,n=function(){e>0&&!1!==e&&(r=setTimeout((function(){t.remove()}),e))};t.addEventListener("mouseenter",(function(){clearTimeout(r)})),t.addEventListener("mouseleave",(function(){n()})),n()}},{key:"__createSnack",value:function(e){var t=e.message,r=e.label,n=e.type,s=void 0===n?"info":n,i=document.getElementById("snack-wrapper")||document.createElement("div"),o=document.createElement("div"),a=document.createElement("p"),l=document.createElement("div"),u=document.createElement("button"),c="",d="";switch(s){case"info":c="text-white hover:bg-blue-400 bg-blue-500",d="bg-gray-900 text-white";break;case"error":c="text-red-700 hover:bg-white bg-white",d="bg-red-500 text-white";break;case"success":c="text-green-700 hover:bg-white bg-white",d="bg-green-500 text-white"}return a.textContent=t,r&&(u.textContent=r,u.setAttribute("class","px-3 py-2 shadow rounded uppercase ".concat(c)),l.appendChild(u)),o.appendChild(a),o.appendChild(l),o.setAttribute("class","md:rounded py-2 px-3 md:w-2/5 w-full z-10 md:my-2 shadow-lg flex justify-between items-center zoom-in-entrance anim-duration-300 ".concat(d)),i.appendChild(o),null===document.getElementById("snack-wrapper")&&(i.setAttribute("id","snack-wrapper"),i.setAttribute("class","absolute bottom-0 w-full flex justify-between items-center flex-col"),document.body.appendChild(i)),{snackWrapper:i,sampleSnack:o,buttonsWrapper:l,buttonNode:u,textNode:a}}}],r&&i(t.prototype,r),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},3957:(e,t,r)=>{"use strict";var n=r(277),s=r(6261),i=r(2277),o=r(40),a=r(4503),l=r(9165);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){var n;return n=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==u(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={mounted:function(){this.popuCloser(),this.loadFields(),this.product=this.$popupParams.product},data:function(){return{formValidation:new o.Z,fields:[],product:null}},methods:{__:l.__,popuCloser:a.Z,close:function(){this.$popupParams.reject(!1),this.$popup.close()},addProduct:function(){if(this.formValidation.validateFields(this.fields),this.formValidation.fieldsValid(this.fields)){var e=this.formValidation.extractFields(this.fields),t=d(d({},this.product),e);return this.$popupParams.resolve(t),console.log(e,t),this.close()}n.kX.error((0,l.__)("The form is not valid.")).subscribe()},loadFields:function(){var e=this;n.ih.get("/api/nexopos/v4/fields/ns.refund-product").subscribe((function(t){e.fields=e.formValidation.createFields(t),e.fields.forEach((function(t){t.value=e.product[t.name]||""}))}))}}};var v=r(1900),b=(0,v.Z)(p,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-xl bg-white w-95vw md:w-3/5-screen lg:w-3/7-screen h-95vh md:h-3/5-screen lg:h-3/7-screen overflow-hidden flex flex-col"},[t("div",{staticClass:"p-2 flex justify-between border-b border-gray-200 items-center"},[t("h3",{staticClass:"text-semibold"},[e._v(e._s(e.__("Products")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-y-auto relative"},[t("div",{staticClass:"p-2"},e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),1),e._v(" "),0===e.fields.length?t("div",{staticClass:"h-full w-full flex items-center justify-center"},[t("ns-spinner")],1):e._e()]),e._v(" "),t("div",{staticClass:"p-2 flex justify-between items-center border-t border-gray-200"},[t("div"),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.addProduct()}}},[e._v(e._s(e.__("Add Product")))])],1)])])}),[],!1,null,null,null);const m=b.exports;var h=r(4914),y=r(3571);const _={components:{nsNumpad:y.Z},data:function(){return{product:null,seeValue:0,availableQuantity:0}},mounted:function(){this.product=this.$popupParams.product,this.availableQuantity=this.$popupParams.availableQuantity,this.seeValue=this.product.quantity},methods:{__:l.__,popupResolver:h.Z,close:function(){this.$popupParams.reject(!1),this.$popup.close()},setChangedValue:function(e){this.seeValue=e},updateQuantity:function(e){if(e>this.availableQuantity)return n.kX.error("Unable to proceed as the quantity provided is exceed the available quantity.").subscribe();this.product.quantity=parseFloat(e),this.$popupParams.resolve(this.product),this.$popup.close()}}};const g=(0,v.Z)(_,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-xl bg-white overflow-hidden w-95vw md:w-4/6-screen lg:w-3/7-screen"},[t("div",{staticClass:"p-2 flex justify-between"},[t("h3",{staticClass:"font-semibold"},[e._v(e._s(e.__("Quantity")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),e.product?t("div",{staticClass:"border-t border-b border-gray-200 py-2 flex items-center justify-center text-2xl font-semibold"},[t("span",[e._v(e._s(e.seeValue))]),e._v(" "),t("span",{staticClass:"text-gray-600 text-sm"},[e._v("("+e._s(e.availableQuantity)+" available)")])]):e._e(),e._v(" "),e.product?t("div",{staticClass:"flex-auto overflow-y-auto p-2"},[t("ns-numpad",{attrs:{value:e.product.quantity},on:{next:function(t){return e.updateQuantity(t)},changed:function(t){return e.setChangedValue(t)}}})],1):e._e()])}),[],!1,null,null,null).exports;var w=r(2763),x=r(7995),C=r(2285);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:String(t)}var S=function(){function e(t){var r=t.settings,n=t.options,s=t.type;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.printingURL={refund:"refund_printing_url",sale:"sale_printing_url",payment:"payment_printing_url"},this.settings=r,this.options=n,this.type=s||"refund"}var t,r,n;return t=e,(r=[{key:"processRegularPrinting",value:function(e){var t=document.querySelector("printing-section");t&&t.remove();var r=this.settings[this.printingURL[this.type]].replace("{reference_id}",e),n=document.createElement("iframe");n.id="printing-section",n.className="hidden",n.src=r,document.body.appendChild(n),setTimeout((function(){document.querySelector("#printing-section").remove()}),5e3)}},{key:"printOrder",value:function(e){"default"===this.options.ns_pos_printing_gateway?this.processRegularPrinting(e):this.processCustomPrinting(e,this.options.ns_pos_printing_gateway)}},{key:"processCustomPrinting",value:function(e,t){nsHooks.applyFilters("ns-order-custom-refund-print",{printed:!1,reference_id:e,gateway:t}).printed||nsSnackBar.error(__("Unsupported print gateway.")).subscribe()}}])&&k(t.prototype,r),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){var n;return n=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==O(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const F={components:{nsNumpad:y.Z},props:["order"],computed:{screenValue:function(){var e=parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join(""));return this.screen/e},total:function(){return this.refundables.length>0?this.refundables.map((function(e){return parseFloat(e.unit_price)*parseFloat(e.quantity)})).reduce((function(e,t){return e+t}))+this.shippingFees:0+this.shippingFees},shippingFees:function(){return this.refundShipping?this.order.shipping:0}},data:function(){return{isSubmitting:!1,formValidation:new o.Z,refundables:[],paymentOptions:[],paymentField:[],print:new S({settings:systemSettings,options:systemOptions,type:"refund"}),refundShipping:!1,selectedPaymentGateway:!1,screen:0,selectFields:[{type:"select",options:this.order.products.map((function(e){return{label:"".concat(e.name," - ").concat(e.unit.name," (x").concat(e.quantity,")"),value:e.id}})),validation:"required",name:"product_id",label:(0,l.__)("Product"),description:(0,l.__)("Select the product to perform a refund.")}]}},methods:{__:l.__,updateScreen:function(e){this.screen=e},toggleRefundShipping:function(e){this.refundShipping=e,this.refundShipping},proceedPayment:function(){var e=this;return!1===this.selectedPaymentGateway?n.kX.error((0,l.__)("Please select a payment gateway before proceeding.")).subscribe():0===this.total?n.kX.error((0,l.__)("There is nothing to refund.")).subscribe():0===this.screenValue?n.kX.error((0,l.__)("Please provide a valid payment amount.")).subscribe():void C.G.show(x.Z,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("The refund will be made on the current order."),onAction:function(t){t&&e.doProceed()}})},doProceed:function(){var e=this,t={products:this.refundables,total:this.screenValue,payment:this.selectedPaymentGateway,refund_shipping:this.refundShipping};this.isSubmitting=!0,n.ih.post("/api/nexopos/v4/orders/".concat(this.order.id,"/refund"),t).subscribe({next:function(t){e.isSubmitting=!1,e.$emit("changed",!0),e.print.printOrder(t.data.orderRefund.id),n.kX.success(t.message).subscribe()},error:function(t){e.isSubmitting=!1,n.kX.error(t.message).subscribe()}})},addProduct:function(){var e=this;if(this.formValidation.validateFields(this.selectFields),!this.formValidation.fieldsValid(this.selectFields))return n.kX.error((0,l.__)("Please select a product before proceeding.")).subscribe();var t=this.formValidation.extractFields(this.selectFields),r=this.order.products.filter((function(e){return e.id===t.product_id})),s=this.refundables.filter((function(e){return e.id===t.product_id}));if(s.length>0){var i=s.map((function(e){return parseInt(e.quantity)})).reduce((function(e,t){return e+t}));if(i===r[0].quantity)return n.kX.error((0,l.__)("Not enough quantity to proceed.")).subscribe()}if(0===r[0].quantity)return n.kX.error((0,l.__)("Not enough quantity to proceed.")).subscribe();var o=E(E({},r[0]),{condition:"",description:""});new Promise((function(e,t){C.G.show(m,{resolve:e,reject:t,product:o})})).then((function(t){t.quantity=e.getProductOriginalQuantity(t.id)-e.getProductUsedQuantity(t.id),e.refundables.push(t)}),(function(e){return e}))},getProductOriginalQuantity:function(e){var t=this.order.products.filter((function(t){return t.id===e}));return t.length>0?t.map((function(e){return parseFloat(e.quantity)})).reduce((function(e,t){return e+t})):0},getProductUsedQuantity:function(e){var t=this.refundables.filter((function(t){return t.id===e}));return t.length>0?t.map((function(e){return parseFloat(e.quantity)})).reduce((function(e,t){return e+t})):0},openSettings:function(e){var t=this;new Promise((function(t,r){C.G.show(m,{resolve:t,reject:r,product:e})})).then((function(r){var n=t.refundables.indexOf(e);t.$set(t.refundables,n,r)}),(function(e){return e}))},selectPaymentGateway:function(){var e=this;new Promise((function(t,r){C.G.show(w.Z,E({resolve:t,reject:r,value:[e.selectedPaymentOption]},e.paymentField[0]))})).then((function(t){e.selectedPaymentGateway=t[0]}),(function(e){return e}))},changeQuantity:function(e){var t=this;new Promise((function(r,n){var s=t.getProductOriginalQuantity(e.id)-t.getProductUsedQuantity(e.id)+parseFloat(e.quantity);C.G.show(g,{resolve:r,reject:n,product:e,availableQuantity:s})})).then((function(r){if(r.quantity>t.getProductUsedQuantity(e.id)-e.quantity){var n=t.refundables.indexOf(e);t.$set(t.refundables,n,r)}}))},deleteProduct:function(e){var t=this;new Promise((function(r,n){C.G.show(x.Z,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this product ?"),onAction:function(r){if(r){var n=t.refundables.indexOf(e);t.refundables.splice(n,1)}}})}))}},mounted:function(){var e=this;this.selectFields=this.formValidation.createFields(this.selectFields),n.ih.get("/api/nexopos/v4/orders/payments").subscribe((function(t){e.paymentField=t}))}},V=F;var T=(0,v.Z)(V,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"-m-4 flex-auto flex flex-wrap relative"},[e.isSubmitting?t("div",{staticClass:"bg-overlay h-full w-full flex items-center justify-center absolute z-30"},[t("ns-spinner")],1):e._e(),e._v(" "),t("div",{staticClass:"px-4 w-full lg:w-1/2"},[t("h3",{staticClass:"py-2 border-b-2 text-gray-700 border-blue-400"},[e._v(e._s(e.__("Refund With Products")))]),e._v(" "),t("div",{staticClass:"my-2"},[t("ul",[t("li",{staticClass:"border-b border-blue-400 flex justify-between items-center mb-2"},[t("div",{staticClass:"flex-auto flex-col flex"},[t("div",{staticClass:"p-2 flex"},e._l(e.selectFields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),1),e._v(" "),t("div",{staticClass:"flex justify-between p-2"},[t("div",{staticClass:"flex items-center text-gray-700"},[e.order.shipping>0?t("span",{staticClass:"mr-2"},[e._v(e._s(e.__("Refund Shipping")))]):e._e(),e._v(" "),e.order.shipping>0?t("ns-checkbox",{attrs:{checked:e.refundShipping},on:{change:function(t){return e.toggleRefundShipping(t)}}}):e._e()],1),e._v(" "),t("div",[t("button",{staticClass:"border-2 rounded-full border-gray-200 px-2 py-1 hover:bg-blue-400 hover:text-white text-gray-700",on:{click:function(t){return e.addProduct()}}},[e._v(e._s(e.__("Add Product")))])])])])]),e._v(" "),t("li",[t("h4",{staticClass:"py-1 border-b-2 text-gray-700 border-blue-400"},[e._v(e._s(e.__("Products")))])]),e._v(" "),e._l(e.refundables,(function(r){return t("li",{key:r.id,staticClass:"bg-gray-100 border-b border-blue-400 flex justify-between items-center mb-2"},[t("div",{staticClass:"px-2 text-gray-700 flex justify-between flex-auto"},[t("div",{staticClass:"flex flex-col"},[t("p",{staticClass:"py-2"},[t("span",[e._v(e._s(r.name))]),e._v(" "),"damaged"===r.condition?t("span",{staticClass:"rounded-full px-2 py-1 text-xs bg-red-400 mx-2 text-white"},[e._v(e._s(e.__("Damaged")))]):e._e(),e._v(" "),"unspoiled"===r.condition?t("span",{staticClass:"rounded-full px-2 py-1 text-xs bg-green-400 mx-2 text-white"},[e._v(e._s(e.__("Unspoiled")))]):e._e()]),e._v(" "),t("small",[e._v(e._s(r.unit.name))])]),e._v(" "),t("div",{staticClass:"flex items-center justify-center"},[t("span",{staticClass:"py-1 flex items-center cursor-pointer border-b border-dashed border-blue-400"},[e._v(e._s(e._f("currency")(r.unit_price*r.quantity)))])])]),e._v(" "),t("div",{staticClass:"flex"},[t("p",{staticClass:"p-2 border-l border-blue-400 cursor-pointer text-gray-600 hover:bg-blue-100 w-16 h-16 flex items-center justify-center",on:{click:function(t){return e.openSettings(r)}}},[t("i",{staticClass:"las la-cog text-xl"})]),e._v(" "),t("p",{staticClass:"p-2 border-l border-blue-400 cursor-pointer text-gray-600 hover:bg-blue-100 w-16 h-16 flex items-center justify-center",on:{click:function(t){return e.deleteProduct(r)}}},[t("i",{staticClass:"las la-trash"})]),e._v(" "),t("p",{staticClass:"p-2 border-l border-blue-400 cursor-pointer text-gray-600 hover:bg-blue-100 w-16 h-16 flex items-center justify-center",on:{click:function(t){return e.changeQuantity(r)}}},[e._v(e._s(r.quantity))])])])}))],2)])]),e._v(" "),t("div",{staticClass:"px-4 w-full lg:w-1/2"},[t("h3",{staticClass:"py-2 border-b-2 text-gray-700 border-blue-400"},[e._v(e._s(e.__("Summary")))]),e._v(" "),t("div",{staticClass:"py-2"},[t("div",{staticClass:"bg-blue-400 text-white font-semibold flex mb-2 p-2 justify-between"},[t("span",[e._v(e._s(e.__("Total")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.total)))])]),e._v(" "),t("div",{staticClass:"bg-teal-400 text-white font-semibold flex mb-2 p-2 justify-between"},[t("span",[e._v(e._s(e.__("Paid")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.tendered)))])]),e._v(" "),t("div",{staticClass:"bg-indigo-400 text-white font-semibold flex mb-2 p-2 justify-between cursor-pointer",on:{click:function(t){return e.selectPaymentGateway()}}},[t("span",[e._v(e._s(e.__("Payment Gateway")))]),e._v(" "),t("span",[e._v(e._s(e.selectedPaymentGateway?e.selectedPaymentGateway.label:"N/A"))])]),e._v(" "),t("div",{staticClass:"bg-gray-300 text-gray-900 font-semibold flex mb-2 p-2 justify-between"},[t("span",[e._v(e._s(e.__("Screen")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.screenValue)))])]),e._v(" "),t("div",[t("ns-numpad",{attrs:{currency:!0,value:e.screen},on:{changed:function(t){return e.updateScreen(t)},next:function(t){return e.proceedPayment(t)}}})],1)])])])}),[],!1,null,null,null);const q=T.exports;var Z=r(149);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:String(t)}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"getTypeLabel",value:function(e){var t=typeLabels.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}},{key:"getDeliveryStatus",value:function(e){var t=deliveryStatuses.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}},{key:"getProcessingStatus",value:function(e){var t=processingStatuses.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}},{key:"getPaymentStatus",value:function(e){var t=paymentLabels.filter((function(t){return t.value===e}));return t.length>0?t[0].label:(0,l.__)("Unknown Status")}}])&&N(t.prototype,r),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){var n;return n=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==z(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const U={props:["order"],data:function(){return{labels:new R,validation:new o.Z,inputValue:0,fields:[],paymentTypes}},computed:{paymentsLabels:function(){var e=new Object;return this.paymentTypes.forEach((function(t){e[t.value]=t.label})),e}},methods:{__:l.__,updateValue:function(e){this.inputValue=e},loadPaymentFields:function(){var e=this;n.ih.get("/api/nexopos/v4/orders/payments").subscribe((function(t){e.fields=e.validation.createFields(t)}))},submitPayment:function(e){var t=this;if(this.validation.validateFields(this.fields),!this.validation.fieldsValid(this.fields))return n.kX.error((0,l.__)("Unable to proceed the form is not valid")).subscribe();if(0==parseFloat(e))return n.kX.error((0,l.__)("Please provide a valid value")).subscribe();e=parseFloat(e);var r=X(X({},this.validation.extractFields(this.fields)),{},{value:e});Popup.show(x.Z,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("You make a payment for {amount}. A payment can't be canceled. Would you like to proceed ?").replace("{amount}",this.$options.filters.currency(e)),onAction:function(e){e&&n.ih.post("/api/nexopos/v4/orders/".concat(t.order.id,"/payments"),r).subscribe((function(e){n.kX.success(e.message).subscribe(),t.$emit("changed")}),(function(e){n.kX.error(e.message).subscribe()}))}})}},components:{nsNumpad:y.Z},mounted:function(){this.loadPaymentFields()}};var G=(0,v.Z)(U,(function(){var e=this,t=e._self._c;return t("div",{},[t("div",{staticClass:"flex -mx-4 flex-wrap"},[t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center bg-blue-400 text-white text-xl font-bold"},[t("span",[e._v(e._s(e.__("Total")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.total)))])])]),e._v(" "),t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center bg-green-400 text-white text-xl font-bold"},[t("span",[e._v(e._s(e.__("Paid")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.tendered)))])])]),e._v(" "),t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center bg-red-400 text-white text-xl font-bold"},[t("span",[e._v(e._s(e.__("Unpaid")))]),e._v(" "),e.order.total-e.order.tendered>0?t("span",[e._v(e._s(e._f("currency")(e.order.total-e.order.tendered)))]):e._e(),e._v(" "),e.order.total-e.order.tendered<=0?t("span",[e._v(e._s(e._f("currency")(0)))]):e._e()])]),e._v(" "),t("div",{staticClass:"px-2 w-full md:w-1/2"},[t("div",{staticClass:"my-1 h-12 py-1 px-2 flex justify-between items-center bg-teal-400 text-white text-xl font-bold"},[t("span",[e._v(e._s(e.__("Customer Account")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.customer.account_amount)))])])])]),e._v(" "),t("div",{staticClass:"flex -mx-4 flex-wrap"},[t("div",{staticClass:"px-2 w-full mb-4 md:w-1/2"},["paid"!==e.order.payment_status?t("div",[t("h3",{staticClass:"font-semibold border-b-2 border-blue-400 py-2"},[e._v("\n                    "+e._s(e.__("Payment"))+"\n                ")]),e._v(" "),t("div",{staticClass:"py-2"},[e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),e._v(" "),t("div",{staticClass:"my-2 px-2 h-12 flex justify-end items-center bg-gray-200"},[e._v("\n                        "+e._s(e._f("currency")(e.inputValue))+"\n                    ")]),e._v(" "),t("ns-numpad",{attrs:{floating:!0,value:e.inputValue},on:{next:function(t){return e.submitPayment(t)},changed:function(t){return e.updateValue(t)}}})],2)]):e._e(),e._v(" "),"paid"===e.order.payment_status?t("div",{staticClass:"flex items-center justify-center h-full"},[t("h3",{staticClass:"text-gray-700 font-semibold"},[e._v(e._s(e.__("No payment possible for paid order.")))])]):e._e()]),e._v(" "),t("div",{staticClass:"px-2 w-full mb-4 md:w-1/2"},[t("h3",{staticClass:"font-semibold border-b-2 border-blue-400 py-2 mb-2"},[e._v("\n                "+e._s(e.__("Payment History"))+"\n            ")]),e._v(" "),t("ul",e._l(e.order.payments,(function(r){return t("li",{key:r.id,staticClass:"p-2 flex items-center justify-between text-shite bg-gray-300 mb-2"},[t("span",[e._v(e._s(e.paymentsLabels[r.identifier]||e.__("Unknown")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(r.value)))])])})),0)])])])}),[],!1,null,null,null);const W=G.exports;const Y={name:"ns-orders-refund-popup",data:function(){return{order:null,refunds:[],view:"summary",previewed:null,loaded:!1,options:systemOptions,settings:systemSettings,print:new S({settings:systemSettings,options:systemOptions,type:"refund"})}},methods:{__:l.__,popupCloser:a.Z,popupResolver:h.Z,toggleProductView:function(e){this.view="details",this.previewed=e},loadOrderRefunds:function(){var e=this;nsHttpClient.get("/api/nexopos/v4/orders/".concat(this.order.id,"/refunds")).subscribe((function(t){e.loaded=!0,e.refunds=t.refunds}),(function(e){n.kX.error(e.message).subscribe()}))},close:function(){this.$popup.close()},printRefundReceipt:function(e){this.print.printOrder(e.id)}},mounted:function(){this.order=this.$popupParams.order,this.popupCloser(),this.loadOrderRefunds()}};const B=(0,v.Z)(Y,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg w-95vw h-95vh md:w-3/5-screen md:h-3/5-screen bg-white flex flex-col overflow-hidden"},[t("div",{staticClass:"border-b p-2 flex items-center justify-between"},[t("h3",[e._v(e._s(e.__("Order Refunds")))]),e._v(" "),t("div",{staticClass:"flex"},["details"===e.view?t("div",{staticClass:"flex items-center justify-center cursor-pointer rounded-full px-3 border hover:bg-blue-400 hover:text-white mr-1",on:{click:function(t){e.view="summary"}}},[e._v(e._s(e.__("Go Back")))]):e._e(),e._v(" "),t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"overflow-auto flex-auto"},["summary"===e.view?[e.loaded?e._e():t("div",{staticClass:"flex h-full w-full items-center justify-center"},[t("ns-spinner",{attrs:{size:"24"}})],1),e._v(" "),e.loaded&&0===e.refunds.length?t("div",{staticClass:"flex h-full w-full items-center justify-center"},[t("i",{staticClass:"lar la-frown-open"})]):e._e(),e._v(" "),e.loaded&&e.refunds.length>0?e._l(e.refunds,(function(r){return t("div",{key:r.id,staticClass:"border-b flex flex-col md:flex-row"},[t("div",{staticClass:"w-full md:flex-auto p-2"},[t("h3",{staticClass:"font-semibold mb-1"},[e._v(e._s(e.order.code))]),e._v(" "),t("div",[t("ul",{staticClass:"flex -mx-1 text-sm text-gray-700"},[t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Total"))+" : "+e._s(e._f("currency")(r.total)))]),e._v(" "),t("li",{staticClass:"px-1"},[e._v(e._s(e.__("By"))+" : "+e._s(r.author.username))])])])]),e._v(" "),t("div",{staticClass:"w-full md:w-16 cursor-pointer hover:bg-blue-400 hover:border-blue-400 hover:text-white text-lg flex items-center justify-center md:border-l",on:{click:function(t){return e.toggleProductView(r)}}},[t("i",{staticClass:"las la-eye"})]),e._v(" "),t("div",{staticClass:"w-full md:w-16 cursor-pointer hover:bg-blue-400 hover:border-blue-400 hover:text-white text-lg flex items-center justify-center md:border-l",on:{click:function(t){return e.printRefundReceipt(r)}}},[t("i",{staticClass:"las la-print"})])])})):e._e()]:e._e(),e._v(" "),"details"===e.view?e._l(e.previewed.refunded_products,(function(r){return t("div",{key:r.id,staticClass:"border-b flex flex-col md:flex-row"},[t("div",{staticClass:"w-full md:flex-auto p-2"},[t("h3",{staticClass:"font-semibold mb-1"},[e._v(e._s(r.product.name))]),e._v(" "),t("div",[t("ul",{staticClass:"flex -mx-1 text-sm text-gray-700"},[t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Condition"))+" : "+e._s(r.condition))]),e._v(" "),t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Quantity"))+" : "+e._s(r.quantity))]),e._v(" "),t("li",{staticClass:"px-1"},[e._v(e._s(e.__("Total"))+" : "+e._s(e._f("currency")(r.total_price)))])])])])])})):e._e()],2)])}),[],!1,null,null,null).exports,M={props:["order"],data:function(){return{processingStatuses,deliveryStatuses,labels:new R,showProcessingSelect:!1,showDeliverySelect:!1}},mounted:function(){},methods:{__:l.__,submitProcessingChange:function(){var e=this;C.G.show(x.Z,{title:(0,l.__)("Would you proceed ?"),message:(0,l.__)("The processing status of the order will be changed. Please confirm your action."),onAction:function(t){t&&n.ih.post("/api/nexopos/v4/orders/".concat(e.order.id,"/processing"),{process_status:e.order.process_status}).subscribe({next:function(t){e.showProcessingSelect=!1,n.kX.success(t.message).subscribe()},error:function(e){n.kX.error(e.message||(0,l.__)("Unexpected error occured.")).subscribe()}})}})},openRefunds:function(){var e=this;try{new Promise((function(t,r){var n=e.order;C.G.show(B,{order:n,resolve:t,reject:r})}))}catch(e){}},submitDeliveryStatus:function(){var e=this;C.G.show(x.Z,{title:(0,l.__)("Would you proceed ?"),message:(0,l.__)("The delivery status of the order will be changed. Please confirm your action."),onAction:function(t){t&&n.ih.post("/api/nexopos/v4/orders/".concat(e.order.id,"/delivery"),{delivery_status:e.order.delivery_status}).subscribe({next:function(t){e.showDeliverySelect=!1,n.kX.success(t.message).subscribe()},error:function(e){n.kX.error(e.message||(0,l.__)("Unexpected error occured.")).subscribe()}})}})}}};var H=(0,v.Z)(M,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"-mx-4 flex flex-wrap"},[t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"w-full mb-2 flex-wrap flex"},[t("div",{staticClass:"w-full mb-2 px-4"},[t("h3",{staticClass:"font-semibold text-gray-800 pb-2 border-b border-blue-400"},[e._v(e._s(e.__("Payment Summary")))])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"bg-gray-200 p-2 flex justify-between items-start"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[e._v(e._s(e.__("Sub Total")))])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.subtotal)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start bg-red-400 text-white"},[t("div",[t("h4",{staticClass:"text-semibold"},[t("span",[e._v(e._s(e.__("Discount")))]),e._v(" "),"percentage"===e.order.discount_type?t("span",{staticClass:"ml-1"},[e._v("("+e._s(e.order.discount_percentage)+"%)")]):e._e(),e._v(" "),"flat"===e.order.discount_type?t("span",{staticClass:"ml-1"},[e._v("(Flat)")]):e._e()])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.discount)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start bg-gray-100"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[e._v(e._s(e.__("Shipping")))])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.shipping)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start bg-red-400 text-white"},[t("div",[t("h4",{staticClass:"text-semibold"},[t("span",[e._v(e._s(e.__("Coupons")))])])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.total_coupons)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start bg-blue-400 text-white"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Total")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.total)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start bg-yellow-400 text-gray-700"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Taxes")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.tax_value)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start text-gray-700 bg-gray-100"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Change")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.change)))])])]),e._v(" "),t("div",{staticClass:"mb-2 w-full md:w-1/2 px-4"},[t("div",{staticClass:"p-2 flex justify-between items-start bg-teal-500 text-white"},[t("div",[t("h4",{staticClass:"text-semibold"},[e._v(e._s(e.__("Paid")))])]),e._v(" "),t("div",{staticClass:"font-semibold"},[e._v(e._s(e._f("currency")(e.order.tendered)))])])])])]),e._v(" "),t("div",{staticClass:"px-4 w-full md:w-1/2 lg:w-2/4 mb-2"},[t("div",{staticClass:"mb-2"},[t("h3",{staticClass:"font-semibold text-gray-800 pb-2 border-b border-blue-400"},[e._v(e._s(e.__("Order Status")))])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start bg-gray-200"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[t("span",[e._v(e._s(e.__("Customer")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.order.nexopos_customers_name))])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start bg-gray-200"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[t("span",[e._v(e._s(e.__("Type")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.labels.getTypeLabel(e.order.type)))])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start bg-gray-200"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[t("span",[e._v(e._s(e.__("Delivery Status")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800 mt-2 md:mt-0 w-full md:w-auto"},[t("div",{staticClass:"w-full text-center"},[e.showDeliverySelect?e._e():t("span",{staticClass:"font-semibold text-gray-800 border-b border-blue-400 cursor-pointer border-dashed",on:{click:function(t){e.showDeliverySelect=!0}}},[e._v(e._s(e.labels.getDeliveryStatus(e.order.delivery_status)))])]),e._v(" "),e.showDeliverySelect?t("div",{staticClass:"flex-auto flex"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.order.delivery_status,expression:"order.delivery_status"}],ref:"process_status",staticClass:"flex-auto border-blue-400 rounded-lg",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.order,"delivery_status",t.target.multiple?r:r[0])}}},e._l(e.deliveryStatuses,(function(r,n){return t("option",{key:n,domProps:{value:r.value}},[e._v(e._s(r.label))])})),0),e._v(" "),t("div",{staticClass:"pl-2 flex"},[t("ns-close-button",{on:{click:function(t){e.showDeliverySelect=!1}}}),e._v(" "),t("button",{staticClass:"bg-green-400 text-white rounded-full px-2 py-1",on:{click:function(t){return e.submitDeliveryStatus(e.order)}}},[e._v(e._s(e.__("Save")))])],1)]):e._e()])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex flex-col md:flex-row justify-between items-center bg-gray-200"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[t("span",[e._v(e._s(e.__("Processing Status")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800 mt-2 md:mt-0 w-full md:w-auto"},[t("div",{staticClass:"w-full text-center"},[e.showProcessingSelect?e._e():t("span",{staticClass:"border-b border-blue-400 cursor-pointer border-dashed",on:{click:function(t){e.showProcessingSelect=!0}}},[e._v(e._s(e.labels.getProcessingStatus(e.order.process_status)))])]),e._v(" "),e.showProcessingSelect?t("div",{staticClass:"flex-auto flex"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.order.process_status,expression:"order.process_status"}],ref:"process_status",staticClass:"flex-auto border-blue-400 rounded-lg",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.order,"process_status",t.target.multiple?r:r[0])}}},e._l(e.processingStatuses,(function(r,n){return t("option",{key:n,domProps:{value:r.value}},[e._v(e._s(r.label))])})),0),e._v(" "),t("div",{staticClass:"pl-2 flex"},[t("ns-close-button",{on:{click:function(t){e.showProcessingSelect=!1}}}),e._v(" "),t("button",{staticClass:"bg-green-400 text-white rounded-full px-2 py-1",on:{click:function(t){return e.submitProcessingChange(e.order)}}},[e._v(e._s(e.__("Save")))])],1)]):e._e()])]),e._v(" "),t("div",{staticClass:"mb-2 p-2 flex justify-between items-start bg-gray-200"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[t("span",[e._v(e._s(e.__("Payment Status")))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.labels.getPaymentStatus(e.order.payment_status)))])])]),e._v(" "),t("div",{staticClass:"px-4 w-full md:w-1/2 lg:w-2/4 mb-2"},[t("div",{staticClass:"mb-2"},[t("h3",{staticClass:"font-semibold text-gray-800 pb-2 border-b border-blue-400"},[e._v(e._s(e.__("Products")))])]),e._v(" "),e._l(e.order.products,(function(r){return t("div",{key:r.id,staticClass:"p-2 flex justify-between items-start bg-gray-200 mb-6"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[e._v(e._s(r.name)+" (x"+e._s(r.quantity)+")")]),e._v(" "),t("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(r.unit.name||"N/A"))])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(r.total_price)))])])})),e._v(" "),t("div",{staticClass:"mb-2"},[t("h3",{staticClass:"font-semibold text-gray-800 pb-2 border-b border-blue-400 flex justify-between"},[t("span",[e._v(e._s(e.__("Refunded Products")))]),e._v(" "),t("a",{staticClass:"border-b border-blue-400 border-dashed",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.openRefunds()}}},[e._v(e._s(e.__("All Refunds")))])])]),e._v(" "),e._l(e.order.refunded_products,(function(r){return t("div",{key:r.id,staticClass:"p-2 flex justify-between items-start bg-gray-200 mb-6"},[t("div",[t("h4",{staticClass:"text-semibold text-gray-700"},[e._v(e._s(r.order_product.name)+" (x"+e._s(r.quantity)+")")]),e._v(" "),t("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(r.unit.name||"N/A")+" | "),t("span",{staticClass:"rounded-full px-2",class:"damaged"===r.condition?"bg-red-400 text-white":"bg-blue-400 text-white"},[e._v(e._s(r.condition))])])]),e._v(" "),t("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(r.total_price)))])])}))],2)])}),[],!1,null,null,null);const K=H.exports;function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e,t,r){var n;return n=function(e,t){if("object"!=J(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==J(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const re={name:"ns-order-instalments-payment",data:function(){return{paymentTypes,fields:[{type:"select",name:"payment_type",description:(0,l.__)("Select the payment type that must apply to the current order."),label:(0,l.__)("Payment Type"),validation:"required",options:paymentTypes}],print:new S({settings:systemSettings,options:systemOptions,type:"payment"}),validation:new o.Z,order:null,instalment:null}},methods:{__:l.__,popupResolver:h.Z,popupCloser:a.Z,close:function(){this.popupResolver(!1)},submitPayment:function(){var e=this;if(!this.validation.validateFields(this.fields))return n.kX.error(__m("The form is not valid.")).subcribe();nsHttpClient.post("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments/").concat(this.instalment.id,"/pay"),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.validation.extractFields(this.fields))).subscribe({next:function(t){e.popupResolver(!0),e.print.printOrder(t.data.payment.id),n.kX.success(t.message).subscribe()},error:function(e){n.kX.error(e.message||(0,l.__)("An unexpected error has occured")).subscribe()}})}},mounted:function(){this.popupCloser(),this.order=this.$popupParams.order,this.instalment=this.$popupParams.instalment,this.fields=this.validation.createFields(this.fields)}};var ne=(0,v.Z)(re,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg bg-white w-95vw md:w-1/3-screen"},[t("div",{staticClass:"p-2 flex justify-between border-b"},[t("h3",[e._v(e._s(e.__("Payment Method")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2"},[t("div",{staticClass:"py-2 p-4 text-center border border-gray-200 bg-gray-100 text-gray-700 rounded-lg"},[e._v(e._s(e.__("Before submitting the payment, choose the payment type used for that order.")))]),e._v(" "),e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})}))],2),e._v(" "),t("div",{staticClass:"border-t p-2 flex justify-end"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.submitPayment()}}},[e._v(e._s(e.__("Submit Payment")))])],1)])}),[],!1,null,null,null);const se=ne.exports;function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function oe(){oe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),a=new E(n||[]);return s(o,"_invoke",{value:P(e,r,a)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",v="executing",b="completed",m={};function h(){}function y(){}function _(){}var g={};u(g,o,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(A([])));x&&x!==r&&n.call(x,o)&&(g=x);var C=_.prototype=h.prototype=Object.create(g);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(s,i,o,a){var l=d(e[s],e,i);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ie(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,a)}))}a(l.arg)}var i;s(this,"_invoke",{value:function(e,n){function s(){return new t((function(t,s){r(e,n,t,s)}))}return i=i?i.then(s,s):s()}})}function P(t,r,n){var s=f;return function(i,o){if(s===v)throw new Error("Generator is already running");if(s===b){if("throw"===i)throw o;return{value:e,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=v;var u=d(t,r,n);if("normal"===u.type){if(s=n.done?b:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(s=b,n.method="throw",n.arg=u.arg)}}}function S(t,r){var n=r.method,s=t.iterator[n];if(s===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=d(s,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,i=function r(){for(;++s<t.length;)if(n.call(t,s))return r.value=t[s],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ie(t)+" is not iterable")}return y.prototype=_,s(C,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:y,configurable:!0}),y.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},j(k.prototype),u(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,s,i){void 0===i&&(i=Promise);var o=new k(c(e,r,n,s),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(C),u(C,l,"Generator"),u(C,o,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function s(n,s){return a.type="throw",a.arg=t,r.next=n,s&&(r.method="next",r.arg=e),!!s}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),$(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;$(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ae(e,t,r,n,s,i,o){try{var a=e[i](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,s)}const le={props:["order"],name:"ns-order-instalments",data:function(){return{labels:new R,original:[],instalments:[],print:new S({settings:systemSettings,options:systemOptions,type:"payment"})}},mounted:function(){this.loadInstalments()},computed:{totalInstalments:function(){return this.instalments.length>0?this.instalments.map((function(e){return e.amount})).reduce((function(e,t){return parseFloat(e)+parseFloat(t)})):0}},methods:{__:l.__,loadInstalments:function(){var e=this;n.ih.get("/api/nexopos/v4/orders/".concat(this.order.id,"/instalments")).subscribe((function(t){e.original=t,e.instalments=t.map((function(e){return e.price_clicked=!1,e.date_clicked=!1,e.date=moment(e.date).format("YYYY-MM-DD"),e}))}))},showReceipt:function(e){if(null===e.payment_id)return n.kX.error((0,l.__)("This instalment doesn't have any payment attached.")).subscribe();this.print.printOrder(e.payment_id)},addInstalment:function(){this.instalments.push({date:ns.date.moment.format("YYYY-MM-DD"),amount:this.order.total-this.totalInstalments,paid:!1})},createInstalment:function(e){var t=this;Popup.show(x.Z,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to create this instalment ?"),onAction:function(r){r&&n.ih.post("/api/nexopos/v4/orders/".concat(t.order.id,"/instalments"),{instalment:e}).subscribe({next:function(e){t.loadInstalments(),n.kX.success(e.message).subscribe()},error:function(e){n.kX.error(e.message||(0,l.__)("An unexpected error has occured")).subscribe()}})}})},deleteInstalment:function(e){var t=this;Popup.show(x.Z,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this instalment ?"),onAction:function(r){r&&n.ih.delete("/api/nexopos/v4/orders/".concat(t.order.id,"/instalments/").concat(e.id)).subscribe({next:function(r){var s=t.instalments.indexOf(e);t.instalments.splice(s,1),n.kX.success(r.message).subscribe()},error:function(e){n.kX.error(e.message||(0,l.__)("An unexpected error has occured")).subscribe()}})}})},markAsPaid:function(e){var t,r=this;return(t=oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(t,n){Popup.show(se,{order:r.order,instalment:e,resolve:t,reject:n})}));case 3:t.sent,r.loadInstalments(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,s){var i=t.apply(e,r);function o(e){ae(i,n,s,o,a,"next",e)}function a(e){ae(i,n,s,o,a,"throw",e)}o(void 0)}))})()},togglePriceEdition:function(e){var t=this;e.paid||(e.price_clicked=!e.price_clicked,this.$forceUpdate(),e.price_clicked&&setTimeout((function(){t.$refs.amount[0].select()}),100))},updateInstalment:function(e){var t=this;Popup.show(x.Z,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to update that instalment ?"),onAction:function(r){r&&n.ih.put("/api/nexopos/v4/orders/".concat(t.order.id,"/instalments/").concat(e.id),{instalment:e}).subscribe({next:function(e){n.kX.success(e.message).subscribe()},error:function(e){n.kX.error(e.message||(0,l.__)("An unexpected error has occured")).subscribe()}})}})},toggleDateEdition:function(e){var t=this;e.paid||(e.date_clicked=!e.date_clicked,this.$forceUpdate(),e.date_clicked&&setTimeout((function(){t.$refs.date[0].select()}),200))}}},ue=le;const ce=(0,v.Z)(ue,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"-mx-4 flex-auto flex flex-wrap"},[t("div",{staticClass:"flex flex-auto"},[t("div",{staticClass:"w-full mb-2 flex-wrap"},[t("div",{staticClass:"w-full mb-2 px-4"},[t("h3",{staticClass:"font-semibold text-gray-800 pb-2 border-b border-blue-400"},[e._v(e._s(e.__("Instalments")))])]),e._v(" "),t("div",{staticClass:"px-4"},[t("ul",{staticClass:"border-gray-400 border-t text-gray-700"},[e._l(e.instalments,(function(r){return t("li",{key:r.id,staticClass:"border-b border-l flex justify-between",class:r.paid?"bg-green-200 border-green-400":"bg-gray-200 border-blue-400"},[t("span",{staticClass:"p-2"},[r.date_clicked?e._e():t("span",{on:{click:function(t){return e.toggleDateEdition(r)}}},[e._v(e._s(r.date))]),e._v(" "),r.date_clicked?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.date,expression:"instalment.date"}],ref:"date",refInFor:!0,staticClass:"border border-blue-400 rounded",attrs:{type:"date"},domProps:{value:r.date},on:{blur:function(t){return e.toggleDateEdition(r)},input:function(t){t.target.composing||e.$set(r,"date",t.target.value)}}})]):e._e()]),e._v(" "),t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"flex items-center px-2 h-full border-r",class:r.paid?"border-green-400":"border-blue-400"},[r.price_clicked?e._e():t("span",{on:{click:function(t){return e.togglePriceEdition(r)}}},[e._v(e._s(e._f("currency")(r.amount)))]),e._v(" "),r.price_clicked?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.amount,expression:"instalment.amount"}],ref:"amount",refInFor:!0,staticClass:"border border-blue-400 p-1",attrs:{type:"text"},domProps:{value:r.amount},on:{blur:function(t){return e.togglePriceEdition(r)},input:function(t){t.target.composing||e.$set(r,"amount",t.target.value)}}})]):e._e()]),e._v(" "),!r.paid&&r.id?t("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full border-r",class:r.paid?"border-green-400":"border-blue-400"},[t("div",{staticClass:"px-2"},[t("ns-icon-button",{attrs:{buttonClass:"bg-green-400 hover:bg-green-500 text-white hover:text-white hover:border-green-600",className:"la-money-bill-wave-alt"},on:{click:function(t){return e.markAsPaid(r)}}})],1),e._v(" "),t("div",{staticClass:"px-2"},[t("ns-icon-button",{attrs:{buttonClass:"bg-blue-400 hover:bg-blue-500 text-white hover:text-white hover:border-blue-600",className:"la-save"},on:{click:function(t){return e.updateInstalment(r)}}})],1),e._v(" "),t("div",{staticClass:"px-2"},[t("ns-icon-button",{attrs:{buttonClass:"bg-red-400 text-white hover:border hover:border-blue-400 hover:bg-red-500",className:"la-trash-alt"},on:{click:function(t){return e.deleteInstalment(r)}}})],1)]):e._e(),e._v(" "),r.paid||r.id?e._e():t("div",{staticClass:"w-36 justify-center flex items-center px-2 h-full border-r",class:r.paid?"border-green-400":"border-blue-400"},[t("div",{staticClass:"px-2"},[t("button",{staticClass:"px-3 py-1 rounded-full bg-blue-400 text-white",on:{click:function(t){return e.createInstalment(r)}}},[t("i",{staticClass:"las la-plus"}),e._v("\n                                        "+e._s(e.__("Create"))+"\n                                    ")])])]),e._v(" "),r.paid?t("span",{staticClass:"w-36 border-green-400 justify-center flex items-center px-2 h-full border-r"},[t("button",{staticClass:"px-3 text-xs py-1 rounded-full bg-blue-400 text-white",on:{click:function(t){return e.showReceipt(r)}}},[t("i",{staticClass:"las la-print"}),e._v("\n                                    "+e._s(e.__("Receipt"))+"\n                                ")])]):e._e()])])})),e._v(" "),t("li",{staticClass:"flex justify-between p-2 bg-gray-200 border-r border-b border-l border-gray-400"},[t("div",{staticClass:"flex items-center justify-center"},[t("span",[e._v("\n                                "+e._s(e.__("Total :"))+" "+e._s(e._f("currency")(e.order.total))+"\n                            ")]),e._v(" "),t("span",{staticClass:"ml-1 text-sm"},[e._v("\n                                ("+e._s(e.__("Remaining :"))+" "+e._s(e._f("currency")(e.order.total-e.totalInstalments))+")\n                            ")])]),e._v(" "),t("div",{staticClass:"-mx-2 flex flex-wrap items-center"},[t("span",{staticClass:"px-2"},[e._v("\n                                "+e._s(e.__("Instalments:"))+" "+e._s(e._f("currency")(e.totalInstalments))+"\n                            ")]),e._v(" "),t("span",{staticClass:"px-2"},[t("button",{staticClass:"rounded-full px-3 py-1 bg-blue-400 text-white",on:{click:function(t){return e.addInstalment()}}},[e._v(e._s(e.__("Add Instalment")))])])])])],2)])])])])}),[],!1,null,null,null).exports;var de={filters:{nsCurrency:s.W},name:"ns-preview-popup",data:function(){return{active:"details",order:new Object,products:[],payments:[]}},components:{nsOrderRefund:q,nsOrderPayment:W,nsOrderDetails:K,nsOrderInstalments:ce},computed:{isVoidable:function(){return["paid","partially_paid","unpaid"].includes(this.order.payment_status)},isDeleteAble:function(){return["hold"].includes(this.order.payment_status)}},methods:{__:l.__,closePopup:function(){this.$popup.close()},setActive:function(e){this.active=e},refresh:function(){this.$popupParams.component.$emit("updated"),this.loadOrderDetails(this.$popupParams.order.id)},printOrder:function(){var e=this.$popupParams.order;n.ih.get("/api/nexopos/v4/orders/".concat(e.id,"/print/receipt")).subscribe((function(e){n.kX.success(e.message).subscribe()}))},loadOrderDetails:function(e){var t=this;(0,i.D)([n.ih.get("/api/nexopos/v4/orders/".concat(e)),n.ih.get("/api/nexopos/v4/orders/".concat(e,"/products")),n.ih.get("/api/nexopos/v4/orders/".concat(e,"/payments"))]).subscribe((function(e){t.order=e[0],t.products=e[1],t.payments=e[2]}))},deleteOrder:function(){var e=this;Popup.show(x.Z,{title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("Would you like to delete this order"),onAction:function(t){t&&n.ih.delete("/api/nexopos/v4/orders/".concat(e.$popupParams.order.id)).subscribe((function(t){n.kX.success(t.message).subscribe(),e.refreshCrudTable(),e.closePopup()}),(function(e){n.kX.error(e.message).subscribe()}))}})},voidOrder:function(){var e=this;try{new Promise((function(t,r){Popup.show(Z.Z,{resolve:t,reject:r,title:(0,l.__)("Confirm Your Action"),message:(0,l.__)("The current order will be void. This action will be recorded. Consider providing a reason for this operation"),onAction:function(t){!1!==t&&n.ih.post("/api/nexopos/v4/orders/".concat(e.$popupParams.order.id,"/void"),{reason:t}).subscribe({next:function(t){n.kX.success(t.message).subscribe(),e.refreshCrudTable(),e.closePopup()},error:function(e){n.kX.error(e.message).subscribe()}})}})}))}catch(e){console.log(e)}},refreshCrudTable:function(){this.$popupParams.component.$emit("updated",!0)}},watch:{active:function(){"details"===this.active&&this.loadOrderDetails(this.$popupParams.order.id)}},mounted:function(){var e=this;this.loadOrderDetails(this.$popupParams.order.id),this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.$popup.close()}))}};window.nsOrderPreviewPopup=de;const fe=de;const pe=(0,v.Z)(fe,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"h-95vh w-95vw md:h-6/7-screen md:w-6/7-screen overflow-hidden shadow-xl bg-white flex flex-col"},[t("div",{staticClass:"border-b border-gray-300 p-3 flex items-center justify-between"},[t("div",[t("h3",[e._v(e._s(e.__("Order Options")))])]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 overflow-scroll bg-gray-100 flex flex-auto"},[e.order.id?t("ns-tabs",{attrs:{active:e.active},on:{active:function(t){return e.setActive(t)}}},[t("ns-tabs-item",{staticClass:"overflow-y-auto",attrs:{label:e.__("Details"),identifier:"details"}},[t("ns-order-details",{attrs:{order:e.order}})],1),e._v(" "),["order_void","hold","refunded","partially_refunded"].includes(e.order.payment_status)?e._e():t("ns-tabs-item",{staticClass:"overflow-y-auto",attrs:{label:e.__("Payments"),identifier:"payments"}},[t("ns-order-payment",{attrs:{order:e.order},on:{changed:function(t){return e.refresh()}}})],1),e._v(" "),["order_void","hold","refunded"].includes(e.order.payment_status)?e._e():t("ns-tabs-item",{staticClass:"flex overflow-y-auto",attrs:{label:e.__("Refund & Return"),identifier:"refund"}},[t("ns-order-refund",{attrs:{order:e.order},on:{changed:function(t){return e.refresh()}}})],1),e._v(" "),["partially_paid"].includes(e.order.payment_status)?t("ns-tabs-item",{staticClass:"flex overflow-y-auto",attrs:{label:e.__("Installments"),identifier:"instalments"}},[t("ns-order-instalments",{attrs:{order:e.order},on:{changed:function(t){return e.refresh()}}})],1):e._e()],1):e._e(),e._v(" "),e.order.id?e._e():t("div",{staticClass:"h-full w-full flex items-center justify-center"},[t("ns-spinner")],1)],1),e._v(" "),t("div",{staticClass:"p-2 flex justify-between border-t border-gray-200"},[t("div",[e.isVoidable?t("ns-button",{attrs:{type:"danger"},on:{click:function(t){return e.voidOrder()}}},[t("i",{staticClass:"las la-ban"}),e._v("\n                "+e._s(e.__("Void"))+"\n            ")]):e._e(),e._v(" "),e.isDeleteAble?t("ns-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteOrder()}}},[t("i",{staticClass:"las la-trash"}),e._v("\n                "+e._s(e.__("Delete"))+"\n            ")]):e._e()],1),e._v(" "),t("div")])])}),[],!1,null,null,null).exports;const ve={name:"ns-products-preview",computed:{product:function(){return this.$popupParams.product}},methods:{__:l.__,changeActiveTab:function(e){this.active=e,"units-quantities"===this.active&&this.loadProductQuantities()},loadProductQuantities:function(){var e=this;this.hasLoadedUnitQuantities=!1,n.ih.get("/api/nexopos/v4/products/".concat(this.product.id,"/units/quantities")).subscribe((function(t){e.unitQuantities=t,e.hasLoadedUnitQuantities=!0}))}},data:function(){return{active:"units-quantities",unitQuantities:[],hasLoadedUnitQuantities:!1}},mounted:function(){var e=this;this.loadProductQuantities(),this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.$popup.close()}))}};const be=(0,v.Z)(ve,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg w-6/7-screen lg:w-3/5-screen h-6/7-screen lg:h-4/5-screen bg-white overflow-hidden flex flex-col"},[t("div",{staticClass:"p-2 border-b border-gray-200 text-gray-700 text-center font-medium flex justify-between items-center"},[t("div",[e._v("\n            "+e._s(e.__("Previewing :"))+" "+e._s(e.product.name)+"\n        ")]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.$popup.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-y-auto bg-gray-100"},[t("div",{staticClass:"p-2"},[t("ns-tabs",{attrs:{active:e.active},on:{active:function(t){return e.changeActiveTab(t)}}},[t("ns-tabs-item",{attrs:{label:e.__("Units & Quantities"),identifier:"units-quantities"}},[e.hasLoadedUnitQuantities?t("table",{staticClass:"table w-full"},[t("thead",[t("tr",[t("th",{staticClass:"p-1 bg-blue-100 border-blue-400 text-blue-700 border"},[e._v(e._s(e.__("Unit")))]),e._v(" "),t("th",{staticClass:"text-right p-1 bg-blue-100 border-blue-400 text-blue-700 border",attrs:{width:"150"}},[e._v(e._s(e.__("Sale Price")))]),e._v(" "),t("th",{staticClass:"text-right p-1 bg-blue-100 border-blue-400 text-blue-700 border",attrs:{width:"150"}},[e._v(e._s(e.__("Wholesale Price")))]),e._v(" "),t("th",{staticClass:"text-right p-1 bg-blue-100 border-blue-400 text-blue-700 border",attrs:{width:"150"}},[e._v(e._s(e.__("Quantity")))])])]),e._v(" "),t("tbody",e._l(e.unitQuantities,(function(r){return t("tr",{key:r.id},[t("td",{staticClass:"p-1 border border-gray-400 text-gray-600 text-left"},[e._v(e._s(r.unit.name))]),e._v(" "),t("td",{staticClass:"p-1 border border-gray-400 text-gray-600 text-right"},[e._v(e._s(e._f("currency")(r.sale_price)))]),e._v(" "),t("td",{staticClass:"p-1 border border-gray-400 text-gray-600 text-right"},[e._v(e._s(e._f("currency")(r.wholesale_price)))]),e._v(" "),t("td",{staticClass:"p-1 border border-gray-400 text-gray-600 text-right"},[e._v(e._s(r.quantity))])])})),0)]):e._e(),e._v(" "),e.hasLoadedUnitQuantities?e._e():t("ns-spinner",{attrs:{size:"16",border:"4"}})],1)],1)],1)])])}),[],!1,null,null,null).exports;var me=r(8682),he=r(9045),ye=r(2394),_e={nsOrderPreview:pe,nsProductPreview:be,nsAlertPopup:me.Z,nsConfirmPopup:x.Z,nsPromptPopup:Z.Z,nsMediaPopup:he.Z,nsProcurementQuantity:ye.Z,nsOrdersRefund:B};for(var ge in _e)window[ge]=_e[ge]},6700:(e,t,r)=>{var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-ps":315,"./ar-ps.js":315,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":4415,"./fy.js":4415,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku-kmr":563,"./ku-kmr.js":563,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function s(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=i,e.exports=s,s.id=6700},3571:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});function n(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const i={name:"ns-numpad",props:["value","currency","floating","limit"],data:function(){return{number:parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join("")),screenValue:0,order:null,cursor:parseInt(ns.currency.ns_currency_precision),orderSubscription:null,allSelected:!0,keys:[].concat(n([7,8,9].map((function(e){return{identifier:e,value:e}}))),n([4,5,6].map((function(e){return{identifier:e,value:e}}))),n([1,2,3].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){this.floating&&this.value>0?this.screenValue=parseFloat(this.value/this.number):this.screenValue=0},watch:{value:function(){this.value.toString().length>0&&(this.floating?this.screenValue=Math.round(this.value*this.number).toString():this.screenValue=this.value)}},methods:{increaseBy:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));this.screenValue=(parseFloat(e.value)*t+(parseFloat(this.screenValue)||0)).toString(),this.allSelected=!1},inputValue:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));if("next"!==e.identifier){if("backspace"===e.identifier)this.allSelected?(this.screenValue="0",this.allSelected=!1):this.screenValue=this.screenValue.toString().substr(0,this.screenValue.length-1);else if(e.value.toString().match(/^\d+$/)){if(this.limit>0&&this.screenValue.length>=this.limit)return;this.allSelected?(this.screenValue=e.value.toString(),this.allSelected=!1):(this.screenValue+=""+e.value.toString(),"percentage"===this.mode&&(this.screenValue=this.screenValue>100?100:this.screenValue))}"0"===this.screenValue&&(this.screenValue="");var r=this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/this.number):this.screenValue;this.$emit("changed",r)}else this.$emit("next",this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/t):this.screenValue)}}};const o=(0,r(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid grid-flow-row grid-cols-3 gap-2 grid-rows-3",staticStyle:{padding:"1px"},attrs:{id:"numpad"}},[e._l(e.keys,(function(r,n){return t("div",{key:n,staticClass:"select-none hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",staticStyle:{margin:"-1px"},on:{click:function(t){return e.inputValue(r)}}},[void 0!==r.value?t("span",[e._v(e._s(r.value))]):e._e(),e._v(" "),r.icon?t("i",{staticClass:"las",class:r.icon}):e._e()])})),e._v(" "),e._t("numpad-footer")],2)}),[],!1,null,null,null).exports},9045:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(277),s=r(4503),i=r(9165);const o={name:"ns-media",props:["popup"],components:{VueUpload:r(2948)},data:function(){return{pages:[{label:(0,i.__)("Upload"),name:"upload",selected:!1},{label:(0,i.__)("Gallery"),name:"gallery",selected:!0}],resources:[],response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},queryPage:1,bulkSelect:!1,files:[]}},mounted:function(){this.popupCloser();var e=this.pages.filter((function(e){return"gallery"===e.name}))[0];this.select(e)},watch:{files:function(){this.files.filter((function(e){return"0.00"===e.progress})).length>0&&(this.$refs.upload.active=!0)}},computed:{postMedia:function(){return n.kq.applyFilters("http-client-url","/api/nexopos/v4/medias")},currentPage:function(){return this.pages.filter((function(e){return e.selected}))[0]},hasOneSelected:function(){return this.response.data.filter((function(e){return e.selected})).length>0},selectedResource:function(){return this.response.data.filter((function(e){return e.selected}))[0]},csrf:function(){return ns.authentication.csrf},isPopup:function(){return void 0!==this.$popup},user_id:function(){return this.isPopup&&this.$popupParams.user_id||0}},methods:{popupCloser:s.Z,__:i.__,cancelBulkSelect:function(){this.bulkSelect=!1,this.response.data.forEach((function(e){return e.selected=!1}))},deleteSelected:function(){var e=this;if(confirm("Delete selected resources ?"))return n.ih.post("/api/nexopos/v4/medias/bulk-delete",{ids:this.response.data.filter((function(e){return e.selected})).map((function(e){return e.id}))}).subscribe((function(t){n.kX.success(t.message).subscribe(),e.loadGallery()}),(function(e){n.kX.error(e.message).subscribe()}))},select:function(e){this.pages.forEach((function(e){return e.selected=!1})),e.selected=!0,"gallery"===e.name&&this.loadGallery()},loadGallery:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=null===t?this.queryPage:t,this.queryPage=t,n.ih.get("/api/nexopos/v4/medias?page=".concat(t,"&user_id=").concat(this.user_id)).subscribe((function(t){t.data.forEach((function(e){return e.selected=!1})),e.response=t}))},useSelectedEntries:function(){this.$popupParams.resolve({event:"use-selected",value:this.response.data.filter((function(e){return e.selected}))}),this.$popup.close()},selectResource:function(e){var t=this;this.bulkSelect||this.response.data.forEach((function(r,n){n!==t.response.data.indexOf(e)&&(r.selected=!1)})),e.selected=!e.selected}}};const a=(0,r(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex bg-white shadow-xl overflow-hidden",class:e.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full"},[t("div",{staticClass:"sidebar w-48 bg-gray-200 h-full flex-shrink-0"},[t("h3",{staticClass:"text-xl font-bold text-gray-800 my-4 text-center"},[e._v(e._s(e.__("Medias Manager")))]),e._v(" "),t("ul",e._l(e.pages,(function(r,n){return t("li",{key:n,staticClass:"hover:bg-white py-2 px-3 text-gray-700 border-l-8 cursor-pointer",class:r.selected?"bg-white border-blue-400":"border-transparent",on:{click:function(t){return e.select(r)}}},[e._v(e._s(r.label))])})),0)]),e._v(" "),"upload"===e.currentPage.name?t("div",{staticClass:"content w-full overflow-hidden flex"},[t("vue-upload",{ref:"upload",staticClass:"flex-auto flex bg-white shadow",attrs:{drop:!0,multiple:!0,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":e.csrf},accept:"image/*","post-action":e.postMedia},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[t("div",{staticClass:"border-dashed border-2 flex flex-auto m-2 p-2 flex-col border-blue-400 items-center justify-center"},[t("h3",{staticClass:"text-3xl font-bold text-gray-600 mb-4"},[e._v(e._s(e.__("Click Here Or Drop Your File To Upload")))]),e._v(" "),t("div",{staticClass:"rounded w-full md:w-2/3 text-gray-700 bg-gray-500 h-56 overflow-y-auto p-2"},[t("ul",e._l(e.files,(function(r,n){return t("li",{key:n,staticClass:"p-2 mb-2 shadow bg-white flex items-center justify-between rounded"},[t("span",[e._v(e._s(r.name))]),e._v(" "),t("span",{staticClass:"rounded bg-blue-400 flex items-center justify-center text-xs p-2"},[e._v(e._s(r.progress)+"%")])])})),0)])])])],1):e._e(),e._v(" "),"gallery"===e.currentPage.name?t("div",{staticClass:"content flex-col w-full overflow-hidden flex"},[e.popup?t("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[t("div"),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.popup.close()}}})],1)]):e._e(),e._v(" "),t("div",{staticClass:"flex flex-auto overflow-hidden"},[t("div",{staticClass:"bg-white shadow content flex flex-auto flex-col overflow-y-auto",attrs:{id:"grid"}},[t("div",{staticClass:"flex flex-auto"},[t("div",{staticClass:"p-2 overflow-x-auto"},[t("div",{staticClass:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-6"},e._l(e.response.data,(function(r,n){return t("div",{key:n},[t("div",{staticClass:"p-2"},[t("div",{staticClass:"rounded-lg w-32 h-32 bg-gray-500 m-2 overflow-hidden flex items-center justify-center",class:r.selected?"ring-4 ring-blue-500 ring-opacity-50":"",on:{click:function(t){return e.selectResource(r)}}},[t("img",{staticClass:"object-cover h-full",attrs:{src:r.sizes.thumb,alt:r.name}})])])])})),0)]),e._v(" "),0===e.response.data.length?t("div",{staticClass:"flex flex-auto items-center justify-center"},[t("h3",{staticClass:"text-2xl text-gray-600 font-bold"},[e._v(e._s(e.__("Nothing has already been uploaded")))])]):e._e()])]),e._v(" "),!e.bulkSelect&&e.hasOneSelected?t("div",{staticClass:"w-64 flex-shrink-0 bg-gray-200",attrs:{id:"preview"}},[t("div",{staticClass:"h-64 bg-gray-600 flex items-center justify-center"},[t("img",{attrs:{src:e.selectedResource.sizes.thumb,alt:e.selectedResource.name}})]),e._v(" "),t("div",{staticClass:"p-4 text-gray-700 text-sm",attrs:{id:"details"}},[t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("File Name"))+": ")]),t("span",[e._v(e._s(e.selectedResource.name))])]),e._v(" "),t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("Uploaded At"))+":")]),t("span",[e._v(e._s(e.selectedResource.created_at))])]),e._v(" "),t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("By"))+" :")]),t("span",[e._v(e._s(e.selectedResource.user.username))])])])]):e._e()]),e._v(" "),t("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[t("div",{staticClass:"flex -mx-2 flex-shrink-0"},[t("div",{staticClass:"px-2 flex-shrink-0 flex"},[t("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[e.bulkSelect?t("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){return e.cancelBulkSelect()}}},[t("i",{staticClass:"las la-times"})]):e._e(),e._v(" "),e.hasOneSelected&&!e.bulkSelect?t("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){e.bulkSelect=!0}}},[t("i",{staticClass:"las la-check-circle"})]):e._e(),e._v(" "),e.hasOneSelected?t("button",{staticClass:"bg-red-400 text-white hover:bg-red-500 hover:text-white py-2 px-3",on:{click:function(t){return e.deleteSelected()}}},[t("i",{staticClass:"las la-trash"})]):e._e()])])]),e._v(" "),t("div",{staticClass:"flex-shrink-0 -mx-2 flex"},[t("div",{staticClass:"px-2"},[t("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[t("button",{staticClass:"p-2",class:1===e.response.current_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:1===e.response.current_page},on:{click:function(t){return e.loadGallery(e.response.current_page-1)}}},[e._v(e._s(e.__("Previous")))]),e._v(" "),t("hr",{staticClass:"border-r border-gray-700"}),e._v(" "),t("button",{staticClass:"p-2",class:e.response.current_page===e.response.last_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:e.response.current_page===e.response.last_page},on:{click:function(t){return e.loadGallery(e.response.current_page+1)}}},[e._v(e._s(e.__("Next")))])])]),e._v(" "),e.popup&&e.hasOneSelected?t("div",{staticClass:"px-2"},[t("button",{staticClass:"rounded shadow p-2 bg-blue-400 text-white text-sm",on:{click:function(t){return e.useSelectedEntries()}}},[e._v(e._s(e.__("Use Selected")))])]):e._e()])])]):e._e()])}),[],!1,null,null,null).exports},8682:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(void 0!==e.$popupParams.onAction&&e.$popupParams.onAction(!1),e.$popup.close())}))},methods:{__:r(9165).__,emitAction:function(e){void 0!==this.$popupParams.onAction&&this.$popupParams.onAction(e),this.$popup.close()}}};const s=(0,r(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-6/7-screen md:w-4/7-screen lg:w-3/7-screen flex flex-col bg-white shadow-lg",class:e.size,attrs:{id:"popup"}},[t("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[e.title?t("h2",{staticClass:"text-3xl font-body text-gray-700"},[e._v(e._s(e.title))]):e._e(),e._v(" "),t("p",{staticClass:"py-4 text-gray-600 text-center"},[e._v(e._s(e.message))])]),e._v(" "),t("div",{staticClass:"flex border-t border-gray-200 text-gray-700 justify-end items-center p-2"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Ok")))])],1)])}),[],!1,null,null,null).exports},7995:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.onAction(!1),e.$popup.close())}))},methods:{__:r(9165).__,emitAction:function(e){this.$popupParams.onAction(e),this.$popup.close()}}};const s=(0,r(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col bg-white shadow-lg w-5/7-screen md:w-4/7-screen lg:w-2/7-screen",class:e.size,attrs:{id:"popup"}},[t("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[t("h2",{staticClass:"text-xl md:text-3xl font-body text-gray-700 text-center"},[e._v(e._s(e.title))]),e._v(" "),t("p",{staticClass:"py-4 text-sm md:text-base text-gray-600 text-center"},[e._v(e._s(e.message))])]),e._v(" "),t("div",{staticClass:"flex border-t border-gray-200 text-gray-700"},[t("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Yes")))]),e._v(" "),t("hr",{staticClass:"border-r border-gray-200"}),e._v(" "),t("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!1)}}},[e._v(e._s(e.__("No")))])])])}),[],!1,null,null,null).exports},2394:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(277),s=r(9165);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const a={data:function(){return{finalValue:1,virtualStock:null,allSelected:!0,isLoading:!1,keys:[].concat(i([1,2,3].map((function(e){return{identifier:e,value:e}}))),i([4,5,6].map((function(e){return{identifier:e,value:e}}))),i([7,8,9].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.reject(!1),e.$popup.close())})),this.$popupParams.quantity&&(this.finalValue=this.$popupParams.quantity),document.addEventListener("keyup",this.handleKeyPress)},destroyed:function(){document.removeEventListener("keypress",this.handleKeyPress)},methods:{__:s.__,handleKeyPress:function(e){13===e.keyCode&&this.inputValue({identifier:"next"})},inputValue:function(e){if("next"===e.identifier){var t=this.$popupParams,r=(t.product,t.data,parseFloat(this.finalValue));if(0===r)return n.kX.error((0,s.__)("Please provide a quantity")).subscribe();this.resolve({quantity:r})}else"backspace"===e.identifier?this.allSelected?(this.finalValue=0,this.allSelected=!1):(this.finalValue=this.finalValue.toString(),this.finalValue=this.finalValue.substr(0,this.finalValue.length-1)||0):this.allSelected?(this.finalValue=e.value,this.finalValue=parseFloat(this.finalValue),this.allSelected=!1):(this.finalValue+=""+e.value,this.finalValue=parseFloat(this.finalValue))},resolve:function(e){this.$popupParams.resolve(e),this.$popup.close()}}};const l=(0,r(1900).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow min-h-2/5-screen w-3/4-screen md:w-3/5-screen lg:w-3/5-screen xl:w-2/5-screen relative"},[t("div",{staticClass:"flex-shrink-0 py-2 border-b border-gray-200"},[t("h1",{staticClass:"text-xl font-bold text-gray-700 text-center"},[e._v(e._s(e.__("Define Quantity")))])]),e._v(" "),t("div",{staticClass:"h-16 border-b bg-gray-800 text-white border-gray-200 flex items-center justify-center",attrs:{id:"screen"}},[t("h1",{staticClass:"font-bold text-3xl"},[e._v(e._s(e.finalValue))])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-3",attrs:{id:"numpad"}},e._l(e.keys,(function(r,n){return t("div",{key:n,staticClass:"hover:bg-blue-400 hover:text-white hover:border-blue-600 text-xl font-bold border border-gray-200 h-24 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.inputValue(r)}}},[void 0!==r.value?t("span",[e._v(e._s(r.value))]):e._e(),e._v(" "),r.icon?t("i",{staticClass:"las",class:r.icon}):e._e()])})),0)])}),[],!1,null,null,null).exports},149:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n={data:function(){return{title:"",message:"",input:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.input=this.$popupParams.input||"",this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.reject(!1),e.$popup.close())}))},methods:{__:r(9165).__,emitAction:function(e){this.$popupParams.onAction(e?this.input:e),this.$popup.close()},reject:function(e){void 0!==this.$popupParams.reject&&this.$popupParams.reject(e),this.$popup.close()}}};const s=(0,r(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-5/7-screen md:w-3/7-screen flex flex-col bg-white shadow-lg",class:e.size,attrs:{id:"popup"}},[t("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-2"},[t("h2",{staticClass:"text-3xl font-body text-gray-700"},[e._v(e._s(e.title))]),e._v(" "),t("p",{staticClass:"w-full md:mx-auto md:w-2/3 py-4 text-gray-600 text-center"},[e._v(e._s(e.message))])]),e._v(" "),t("div",{staticClass:"p-2"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"text-gray-700 w-full border-2 p-2 border-blue-400",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex border-t border-gray-200 text-gray-700"},[t("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Ok")))]),e._v(" "),t("hr",{staticClass:"border-r border-gray-200"}),e._v(" "),t("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.reject(!1)}}},[e._v(e._s(e.__("Cancel")))])])])}),[],!1,null,null,null).exports},2763:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(4503),s=r(9165);const i={data:function(){return{value:[],options:[],label:null,type:"select"}},computed:{},mounted:function(){this.popupCloser(),this.value=this.$popupParams.value||[],this.options=this.$popupParams.options,this.label=this.$popupParams.label,this.type=this.$popupParams.type||this.type},methods:{popupCloser:n.Z,__:s.__,toggle:function(e){var t=this.value.indexOf(e);-1===t?this.value.unshift(e):this.value.splice(t,1)},isSelected:function(e){return this.value.indexOf(e)>=0},close:function(){this.$popupParams.reject(!1),this.$popup.close()},select:function(e){void 0!==e&&(this.value=[e]),this.$popupParams.resolve(this.value),this.close()}}};const o=(0,r(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-xl bg-white w-6/7-screen md:w-4/7-screen lg:w-3/7-screen overflow-hidden"},[t("div",{staticClass:"p-2 flex justify-between border-b border-gray-200"},[t("span",{staticClass:"text-semibold text-gray-700"},[e._v("\n            "+e._s(e.label)+"\n        ")]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-y-auto"},[t("ul",["select"===e.type?e._l(e.options,(function(r){return t("li",{key:r.value,staticClass:"p-2 border-b border-gray-200 text-gray-700 cursor-pointer hover:bg-gray-100",on:{click:function(t){return e.select(r)}}},[e._v(e._s(r.label))])})):e._e(),e._v(" "),"multiselect"===e.type?e._l(e.options,(function(r){return t("li",{key:r.value,staticClass:"p-2 border-b text-gray-700 cursor-pointer hover:bg-gray-100",class:e.isSelected(r)?"bg-blue-100 border-blue-200":"border-gray-200",on:{click:function(t){return e.toggle(r)}}},[e._v(e._s(r.label))])})):e._e()],2)]),e._v(" "),"multiselect"===e.type?t("div",{staticClass:"flex justify-between"},[t("div"),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.__("Select")))])],1)]):e._e()])}),[],!1,null,null,null).exports}},e=>{e.O(0,[898],(()=>{return t=3957,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=popups.min.js.map