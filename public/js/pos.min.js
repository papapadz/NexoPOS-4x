/*! For license information please see pos.min.js.LICENSE.txt */
(self.webpackChunkNexoPOS_4x=self.webpackChunkNexoPOS_4x||[]).push([[159],{277:(e,t,r)=>{"use strict";r.d(t,{l:()=>B,kq:()=>te,ih:()=>Q,kX:()=>K});var n=r(6486),s=r(9669),i=r(6300),o=r(8345),a=r(4085),l=r(9248),c=r(230);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:String(t)}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new l.x}var t,r,n;return t=e,r=[{key:"defineClient",value:function(e){this._client=e}},{key:"post",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("post",e,t,r)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("get",e,void 0,t)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("delete",e,void 0,t)}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("put",e,t,r)}},{key:"response",get:function(){return this._lastRequestData}},{key:"_request",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=te.applyFilters("http-client-url",t.replace(/\/$/,"")),this._subject.next({identifier:"async.start",url:t,data:n}),new c.y((function(i){r._client[e](t,n,Object.assign(Object.assign({},r._client.defaults[e]),s)).then((function(e){r._lastRequestData=e,i.next(e.data),i.complete(),r._subject.next({identifier:"async.stop"})})).catch((function(e){var t;i.error((null===(t=e.response)||void 0===t?void 0:t.data)||e.response||e),r._subject.next({identifier:"async.stop"})}))}))}},{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,r=e.value;this._subject.next({identifier:t,value:r})}}],r&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),h=r(3);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:String(t)}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new h.t}var t,r,n;return t=e,(r=[{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,r=e.value;this._subject.next({identifier:t,value:r})}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),y=r(6515);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:String(t)}var C=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={},this.behaviorState=new y.X({}),this.behaviorState.subscribe((function(e){r.state=e})),this.setState(t)}var t,r,n;return t=e,(r=[{key:"setState",value:function(e){this.behaviorState.next(Object.assign(Object.assign({},this.state),{object:e}))}}])&&x(t.prototype,r),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),k=r(2401),S=r(8272),j=r(381),P=r(2285),O=r(538),T=r(40);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function F(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:String(t)}var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=ns.base_url}var t,r,n;return t=e,(r=[{key:"get",value:function(e){return this.url+e}}])&&$(t.prototype,r),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),D=O.default.filter("abbreviate",(function(e){var t=e;if(e>=1e3){for(var r,n=Math.floor((""+e).length/3),s=2;s>=1;s--){if(((r=parseFloat((0!=n?e/Math.pow(1e3,n):e).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}r%1!=0&&(r=r.toFixed(1)),t=r+["","k","m","b","t"][n]}return t})),V=r(6261),A=r(7761);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function q(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:String(t)}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instances=new Object}var t,r,n;return t=e,(r=[{key:"getInstance",value:function(e){return this.instances[e]}},{key:"defineInstance",value:function(e,t){this.instances[e]=t}}])&&Z(t.prototype,r),n&&Z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),G=r(2319),R=r(9165),M=r(4914),Y=r(4503),z=r(4554);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function W(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:String(t)}var U=r(6606);window._=n,window.ChartJS=i,window.Pusher=U,window.Vue=O.default,window.moment=j,window.Axios=s,window.__=R.__,window.__m=R.c,window.VueRouter=o.ZP,window.SnackBar=a.S,window.nsHooks=(0,G.Hu)(),window.popupResolver=M.Z,window.popupCloser=Y.Z,window.Axios.defaults.headers.common["x-requested-with"]="XMLHttpRequest",window.Axios.defaults.withCredentials=!0,ns.websocket.enabled&&(window.Echo=new z.ZP({broadcaster:"pusher",key:ns.websocket.key,wsHost:ns.websocket.host,wsPort:ns.websocket.port,wssPort:ns.websocket.port,namespace:"",forceTLS:ns.websocket.secured,disableStats:!0,encrypted:ns.websocket.secured,enabledTransports:ns.websocket.secured?["ws","wss"]:["ws"],disabledTransports:ns.websocket.secured?["sockjs","xhr_polling","xhr_streaming"]:[]}));var B=new g,Q=new p,K=new a.S,J=new L,ee=new I,te=window.nsHooks,re=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.breakpoint="",this.detectScreenSizes(),(0,k.R)(window,"resize").subscribe((function(e){return t.detectScreenSizes()}))}var t,r,n;return t=e,(r=[{key:"detectScreenSizes",value:function(){switch(!0){case window.outerWidth>0&&window.outerWidth<=480:this.breakpoint="xs";break;case window.outerWidth>480&&window.outerWidth<=640:this.breakpoint="sm";break;case window.outerWidth>640&&window.outerWidth<=1024:this.breakpoint="md";break;case window.outerWidth>1024&&window.outerWidth<=1280:this.breakpoint="lg";break;case window.outerWidth>1280:this.breakpoint="xl"}}}])&&X(t.prototype,r),n&&X(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),ne=new C({sidebar:["xs","sm","md"].includes(re.breakpoint)?"hidden":"visible"});Q.defineClient(s),window.nsEvent=B,window.nsHttpClient=Q,window.nsSnackBar=K,window.nsCurrency=V.W,window.nsTruncate=A.b,window.nsRawCurrency=V.f,window.nsAbbreviate=D,window.nsState=ne,window.nsUrl=J,window.nsScreen=re,window.ChartJS=i,window.EventEmitter=g,window.Popup=P.G,window.RxJS=S,window.FormValidation=T.Z,window.nsCrudHandler=ee},2633:(e,t,r)=>{"use strict";r.r(t),r.d(t,{nsAvatar:()=>ne,nsButton:()=>a,nsCheckbox:()=>p,nsCkeditor:()=>I,nsCloseButton:()=>D,nsCrud:()=>K,nsCrudForm:()=>m,nsDate:()=>E,nsDateRangePicker:()=>S,nsDateTimePicker:()=>j.Z,nsDatepicker:()=>ie.Z,nsField:()=>P,nsIconButton:()=>V,nsInput:()=>c,nsLink:()=>l,nsMediaInput:()=>L,nsMenu:()=>i,nsMultiselect:()=>O,nsNotice:()=>se.Z,nsNumpad:()=>J.Z,nsPaginate:()=>oe.Z,nsSelect:()=>d,nsSelectAudio:()=>f,nsSpinner:()=>v,nsSubmenu:()=>o,nsSwitch:()=>T,nsTableRow:()=>h,nsTabs:()=>G,nsTabsItem:()=>R,nsTextarea:()=>g});var n=r(538),s=r(277),i=n.default.component("ns-menu",{data:function(){return{defaultToggledState:!1,_save:0}},props:["href","label","icon","notification","toggled","identifier"],template:'\n    <div>\n        <a @click="toggleEmit()" :href="href || \'javascript:void(0)\'" :class="defaultToggledState ? \'border-blue-800 bg-gray-800\' : \'border-transparent bg-gray-900\'" class="flex justify-between py-2 border-l-8 text-gray-200 px-3 font-bold  hover:bg-gray-700">\n            <span class="flex items-center">\n            <i class="las text-lg mr-2" :class="icon?.length > 0 ? icon : \'la-star\'"></i>\n            {{ label }}\n            </span>\n            <span v-if="notification > 0" class="rounded-full bg-red-600 text-white font-bold w-6 h-6 text-xs justify-center items-center flex">{{ notification }}</span>\n        </a>\n        <ul :class="defaultToggledState ? \'\' : \'hidden\'" class="submenu-wrapper">\n            <slot></slot>                  \n        </ul>\n    </div>\n    ',mounted:function(){var e=this;this.defaultToggledState=void 0!==this.toggled?this.toggled:this.defaultToggledState,s.l.subject().subscribe((function(t){t.value!==e.identifier&&(e.defaultToggledState=!1)}))},methods:{toggleEmit:function(){var e=this;this.toggle().then((function(t){t&&s.l.emit({identifier:"side-menu.open",value:e.identifier})}))},toggle:function(){var e=this;return new Promise((function(t,r){0===e.href.length&&(e.defaultToggledState=!e.defaultToggledState,t(e.defaultToggledState))}))}}}),o=n.default.component("ns-submenu",{data:function(){return{}},props:["href","label","active"],mounted:function(){},template:'\n    <div>\n        <li>\n            <a :class="active ? \'font-bold text-white\' : \'text-gray-100\'" :href="href" class="py-2 border-l-8 border-blue-800 px-3 block bg-gray-800 hover:bg-gray-700">\n                <slot></slot>\n            </a>\n        </li>\n    </div>\n    '}),a=n.default.component("ns-button",{data:function(){return{clicked:!1,_save:0}},props:["type","disabled","link","href","routerLink","to"],template:'\n    <div class="flex" @click="$emit( \'click\' )">\n        <button :disabled="isDisabled" v-if="!link" :class="buttonclass" class="flex items-center rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></button>\n        <router-link  :to="to" v-if="routerLink" :class="buttonclass" class="flex items-center rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="link" :href="href" :class="buttonclass" class="flex items-center rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',mounted:function(){},computed:{isDisabled:function(){return this.disabled&&(0===this.disabled.length||"disabled"===this.disabled||this.disabled)},buttonclass:function(){var e;switch(this.type){case"info":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-blue-400 text-white");break;case"success":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-green-400 text-white");break;case"danger":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-red-400 text-white");break;case"warning":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-orange-400 text-white");break;default:e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-white text-gray-800")}return e}}}),l=n.default.component("ns-link",{data:function(){return{clicked:!1,_save:0}},props:["type","to","href","target"],template:'\n    <div class="flex">\n        <router-link v-if="to" :to="to" :class="buttonclass" class="rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="href" :target="target" :href="href" :class="buttonclass" class="rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',computed:{buttonclass:function(){switch(this.type){case"info":return"shadow bg-blue-400 text-white";case"success":return"shadow bg-green-400 text-white";case"danger":return"shadow bg-red-400 text-white";case"warning":return"shadow bg-orange-400 text-white";default:return"shadow bg-white text-gray-800"}}}}),c=n.default.component("ns-input",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),u=r(9165),d=n.default.component("ns-select",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__},template:'\n    <div class="flex flex-col flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="border-2 mt-1 relative rounded-md shadow-sm mb-2">\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="text-gray-700 form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10">\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),f=n.default.component("ns-select-audio",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__,playSelectedSound:function(){this.field.value.length>0&&new Audio(this.field.value).play()}},template:'\n    <div class="flex flex-col flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="border-2 mt-1 flex relative overflow-hidden rounded-md shadow-sm mb-2">\n            <div @click="playSelectedSound()" class="border-r-2 border-gray-200 flex-auto flex items-center justify-center hover:bg-blue-400 hover:text-white">\n                <button class="w-10 flex item-center justify-center">\n                    <i class="las la-play text-2xl"></i>\n                </button>\n            </div>\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="text-gray-700 form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10">\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),p=n.default.component("ns-checkbox",{data:function(){return{}},props:["checked","field","label"],template:'\n    <div class="flex items-center justify-center cursor-pointer" @click="toggleIt()">\n        <div class="w-6 h-6 flex bg-white border-2 items-center justify-center cursor-pointer">\n            <i v-if="isChecked" class="las la-check"></i>   \n        </div>\n        <span v-if="label" class="mx-2">{{ label }}</span>\n        <span v-if="field" class="mx-2">{{ field.label }}</span>\n    </div>\n    ',computed:{isChecked:function(){return this.field?this.field.value:this.checked}},methods:{toggleIt:function(){void 0!==this.field&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}}),h=n.default.component("ns-table-row",{props:["options","row","columns"],data:function(){return{optionsToggled:!1}},mounted:function(){},methods:{sanitizeHTML:function(e){var t=document.createElement("div");t.innerHTML=e;for(var r=t.getElementsByTagName("script"),n=r.length;n--;)r[n].parentNode.removeChild(r[n]);return t.innerHTML},getElementOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},toggleMenu:function(e){var t=this;if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout((function(){var e=t.$el.querySelectorAll(".relative > .absolute")[0],r=t.$el.querySelectorAll(".relative")[0],n=t.getElementOffset(r);e.style.top=n.top+"px",e.style.left=n.left+"px",r.classList.remove("relative"),r.classList.add("dropdown-holder")}),100);else{var r=this.$el.querySelectorAll(".dropdown-holder")[0];r.classList.remove("dropdown-holder"),r.classList.add("relative")}},handleChanged:function(e){this.row.$checked=e,this.$emit("updated",this.row)},triggerAsync:function(e){var t=this;e.confirm?confirm(e.confirm.message)&&s.ih[e.type.toLowerCase()](e.url).subscribe((function(e){s.kX.success(e.message).subscribe(),t.$emit("reload",t.row)}),(function(e){t.toggleMenu(),s.kX.error(e.message).subscribe()})):(s.l.emit({identifier:"ns-table-row-action",value:{action:e,row:this.row,component:this}}),this.toggleMenu())}},template:'\n    <tr :class="row.$cssClass ? row.$cssClass : \'border-gray-200 border text-sm\'">\n        <td class="text-gray-700 font-sans border-gray-200 p-2">\n            <ns-checkbox @change="handleChanged( $event )" :checked="row.$checked"> </ns-checkbox>\n        </td>\n        <td v-for="(column, identifier) of columns" class="text-gray-700 font-sans border-gray-200 p-2" v-html="sanitizeHTML( row[ identifier ] )"></td>\n        <td class="text-gray-700 font-sans border-gray-200 p-2 flex flex-col items-start justify-center">\n            <button @click="toggleMenu( $event )" class="outline-none rounded-full w-24 text-sm p-1 border border-gray-400 hover:bg-blue-400 hover:text-white hover:border-transparent"><i class="las la-ellipsis-h"></i> Options</button>\n            <div @click="toggleMenu( $event )" v-if="row.$toggled" class="absolute w-full h-full z-10 top-0 left-0"></div>\n            <div class="relative">\n                <div v-if="row.$toggled" class="zoom-in-entrance anim-duration-300 z-50 origin-bottom-right -ml-32 w-56 mt-2 absolute rounded-md shadow-lg">\n                    <div class="rounded-md bg-white shadow-xs">\n                        <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n                            <template v-for="action of row.$actions">\n                                <a :href="action.url" v-if="action.type === \'GOTO\'" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                <a href="javascript:void(0)" @click="triggerAsync( action )" v-if="[ \'GET\', \'DELETE\', \'POPUP\' ].includes( action.type )" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </td>\n    </tr>\n    '}),v=n.default.component("ns-spinner",{data:function(){return{}},mounted:function(){},computed:{validatedSize:function(){return this.size||24},validatedBorder:function(){return this.border||8},validatedAnimation:function(){return this.animation||"fast"}},props:["color","size","border"],template:"\n    <div class=\"flex items-center justify-center\">\n    <div class=\"loader ease-linear rounded-full border-gray-200\" :class=\"validatedAnimation + ' border-' + validatedBorder + ' border-t-' + validatedBorder + ' w-' + validatedSize + ' h-' + validatedSize\"></div>\n    </div>\n    "}),b=r(40),m=n.default.component("ns-crud-form",{data:function(){return{form:{},globallyChecked:!1,formValidation:new b.Z,rows:[]}},mounted:function(){this.loadForm()},props:["src","create-url","field-class","return-url","submit-url","submit-method","disable-tabs"],computed:{activeTabFields:function(){for(var e in this.form.tabs)if(this.form.tabs[e].active)return this.form.tabs[e].fields;return[]}},methods:{__:u.__,toggle:function(e){for(var t in this.form.tabs)this.form.tabs[t].active=!1;this.form.tabs[e].active=!0},handleShowOptions:function(e){this.rows.forEach((function(t){t.$id!==e.$id&&(t.$toggled=!1)}))},submit:function(){var e=this;return this.formValidation.validateForm(this.form).length>0?s.kX.error(this.$slots["error-invalid-form"]?this.$slots["error-invalid-form"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():(this.formValidation.disableForm(this.form),void 0===this.submitUrl?s.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():void s.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,this.formValidation.extractForm(this.form)).subscribe((function(t){if("success"===t.status){if(e.returnUrl&&e.returnUrl.length>0)return document.location=e.returnUrl;e.$emit("save",t)}e.formValidation.enableForm(e.form)}),(function(t){s.kX.error(t.message,void 0,{duration:5e3}).subscribe(),e.formValidation.triggerError(e.form,t),e.formValidation.enableForm(e.form)})))},handleGlobalChange:function(e){this.globallyChecked=e,this.rows.forEach((function(t){return t.$checked=e}))},loadForm:function(){var e=this;s.ih.get("".concat(this.src)).subscribe({next:function(t){e.form=e.parseForm(t.form),s.kq.doAction("ns-crud-form-loaded",e),e.$emit("updated",e.form)},error:function(e){s.kX.error(e.message,"OKAY",{duration:0}).subscribe()}})},parseForm:function(e){e.main.value=void 0===e.main.value?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];var t=0;for(var r in e.tabs)0===t&&(e.tabs[r].active=!0),e.tabs[r].active=void 0!==e.tabs[r].active&&e.tabs[r].active,e.tabs[r].fields=this.formValidation.createFields(e.tabs[r].fields),t++;return e}},template:'\n    <div class="form flex-auto" id="crud-form">\n        <div v-if="Object.values( form ).length === 0" class="flex items-center justify-center h-full">\n            <ns-spinner />\n        </div>\n        <div v-if="Object.values( form ).length > 0">\n            <div class="flex flex-col">\n                <div class="flex justify-between items-center" v-if="form.main">\n                    <label for="title" class="font-bold my-2 text-gray-700">\n                        <span v-if="form.main.name">{{ form.main.label }}</span>\n                    </label>\n                    <div for="title" class="text-sm my-2 text-gray-700">\n                        <a v-if="returnUrl" :href="returnUrl" class="rounded-full border border-gray-400 hover:border-red-600 hover:bg-red-600 hover:text-white bg-white px-2 py-1">{{ __( \'Go Back\' ) }}</a>\n                    </div>\n                </div>\n                <template v-if="form.main.name">\n                    <div :class="form.main.disabled ? \'border-gray-500\' : form.main.errors.length > 0 ? \'border-red-600\' : \'border-blue-500\'" class="flex border-2 rounded overflow-hidden">\n                        <input v-model="form.main.value" \n                            @blur="formValidation.checkField( form.main )" \n                            @change="formValidation.checkField( form.main )" \n                            :disabled="form.main.disabled"\n                            type="text" \n                            :class="form.main.disabled ? \'bg-gray-400\' : \'\'"\n                            class="flex-auto text-gray-700 outline-none h-10 px-2">\n                        <button :disabled="form.main.disabled" :class="form.main.disabled ? \'bg-gray-500\' : form.main.errors.length > 0 ? \'bg-red-500\' : \'bg-blue-500\'" @click="submit()" class="outline-none px-4 h-10 text-white border-l border-gray-400"><slot name="save">Save</slot></button>\n                    </div>\n                    <p class="text-xs text-gray-600 py-1" v-if="form.main.description && form.main.errors.length === 0">{{ form.main.description }}</p>\n                    <p class="text-xs py-1 text-red-500" v-for="error of form.main.errors">\n                        <span v-if="error.identifier=== \'required\'"><slot name="error-required">{{ error.identifier }}</slot></span>\n                        <span v-if="error.identifier=== \'invalid\'"><slot name="error-invalid">{{ error.message }}</slot></span>\n                    </p>\n                </template>\n            </div>\n            <div id="tabs-container" class="my-5" v-if="disableTabs !== \'true\'">\n                <div class="header flex" style="margin-bottom: -1px;">\n                    <div v-for="( tab , identifier ) of form.tabs" \n                        @click="toggle( identifier )" \n                        :class="tab.active ? \'border-b-0 bg-white\' : \'border bg-gray-200\'" \n                        class="tab rounded-tl rounded-tr border border-gray-400  px-3 py-2 text-gray-700 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n                </div>\n                <div class="border border-gray-400 p-4 bg-white">\n                    <div class="-mx-4 flex flex-wrap">\n                        <div :class="fieldClass || \'px-4 w-full md:w-1/2 lg:w-1/3\'" v-for="field of activeTabFields">\n                            <ns-field @blur="formValidation.checkField( field )" @change="formValidation.checkField( field )" :field="field"/>\n                        </div>\n                    </div>\n                    <div class="flex justify-end" v-if="! form.main.name">\n                        <button :disabled="form.main.disabled" :class="form.main.disabled ? \'bg-gray-500\' : form.main.errors.length > 0 ? \'bg-red-500\' : \'bg-blue-500\'" @click="submit()" class="outline-none px-4 h-10 text-white border-l border-gray-400"><slot name="save">Save</slot></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    '}),g=n.default.component("ns-textarea",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <textarea \n                :rows="field.data ? ( field.data.rows || 10 ) : 10"\n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5" :placeholder="placeholder"></textarea>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),y=r(381),_=r.n(y),x=r(7144),w=r.n(x);r(8681);const C=n.default.extend({name:"ns-date-range-picker",data:function(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:w()},mounted:function(){void 0!==this.field.value&&(this.dateRange=this.field.value)},watch:{dateRange:function(){this.field.value=this.dateRange,this.$emit("change",this)}},methods:{__:u.__,getFormattedDate:function(e){return null!==e?_()(e).format("YYYY-MM-DD HH:mm"):(0,u.__)("N/D")},clearDate:function(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]});var k=r(1900);const S=(0,k.Z)(C,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex flex-auto flex-col mb-2"},[t("label",{staticClass:"block leading-5 font-medium",class:e.hasError?"text-red-700":"text-gray-700",attrs:{for:e.field.name}},[e._t("default")],2),e._v(" "),t("div",{staticClass:"mt-1 relative flex border-2 rounded-md focus:shadow-sm",class:e.hasError?"border-red-400":"border-gray-200"},[e.leading?t("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{staticClass:"text-gray-500 sm:text-sm sm:leading-5"},[e._v("\n            "+e._s(e.leading)+"\n            ")])]):e._e(),e._v(" "),t("button",{staticClass:"px-3 outline-none bg-red-500 font-semibold text-white",on:{click:function(t){return e.clearDate()}}},[t("i",{staticClass:"las la-times"})]),e._v(" "),t("date-range-picker",{ref:"picker",staticClass:"w-full flex items-center",attrs:{"locale-data":{firstDay:1,format:"dd-mm-yyyy HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,disabled:e.field.disabled,linkedCalendars:!0},on:{blur:function(t){return e.$emit("blur",this)},update:function(t){return e.$emit("change",this)}},scopedSlots:e._u([{key:"input",fn:function(r){return[t("div",{staticClass:"flex justify-between items-center w-full py-2"},[t("span",{staticClass:"text-xs"},[e._v(e._s(e.__("Range Starts"))+" : "+e._s(e.getFormattedDate(r.startDate)))]),e._v(" "),t("span",{staticClass:"text-xs"},[e._v(e._s(e.__("Range Ends"))+" : "+e._s(e.getFormattedDate(r.endDate)))])])]}}]),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),e.field.errors&&0!==e.field.errors.length?e._e():t("p",{staticClass:"text-xs text-gray-500"},[e._t("description")],2),e._v(" "),e._l(e.field.errors,(function(r,n){return t("p",{key:n,staticClass:"text-xs text-red-400"},["required"===r.identifier?e._t(r.identifier,(function(){return[e._v(e._s(e.__("This field is required.")))]})):e._e(),e._v(" "),"email"===r.identifier?e._t(r.identifier,(function(){return[e._v(e._s(e.__("This field must contain a valid email address.")))]})):e._e(),e._v(" "),"invalid"===r.identifier?e._t(r.identifier,(function(){return[e._v(e._s(r.message))]})):e._e()],2)}))],2)}),[],!1,null,null,null).exports;var j=r(7217),P=n.default.component("ns-field",{data:function(){return{}},mounted:function(){},components:{nsDateRangePicker:S,nsDateTimePicker:j.Z},computed:{isInputField:function(){return["text","password","email","number","tel"].includes(this.field.type)},isDateField:function(){return["date"].includes(this.field.type)},isSelectField:function(){return["select"].includes(this.field.type)},isTextarea:function(){return["textarea"].includes(this.field.type)},isCheckbox:function(){return["checkbox"].includes(this.field.type)},isMultiselect:function(){return["multiselect"].includes(this.field.type)},isSelectAudio:function(){return["select-audio"].includes(this.field.type)},isSwitch:function(){return["switch"].includes(this.field.type)},isMedia:function(){return["media"].includes(this.field.type)},isCkEditor:function(){return["ckeditor"].includes(this.field.type)},isDateTimePicker:function(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker:function(){return["daterangepicker"].includes(this.field.type)},isCustom:function(){return["custom"].includes(this.field.type)}},props:["field"],methods:{addOption:function(e){"select"===this.field.type&&this.field.options.forEach((function(e){return e.selected=!1})),e.selected=!0;var t=this.field.options.indexOf(e);this.field.options.splice(t,1),this.field.options.unshift(e),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:e})},refreshMultiselect:function(){this.field.value=this.field.options.filter((function(e){return e.selected})).map((function(e){return e.value}))},removeOption:function(e){e.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:e})}},template:'\n    <div class="flex flex-auto">\n        <ns-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isInputField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-input>\n        <ns-date-time-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateTimePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-time-picker>\n        <ns-date @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date>\n        <ns-media-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isMedia">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-media-input>\n        <ns-select @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select>\n        <ns-date-range-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateRangePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-range-picker>\n        <ns-select-audio @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectAudio">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select-audio>\n        <ns-textarea @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isTextarea">\n            <template>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-textarea v-slot>\n        <ns-checkbox @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isCheckbox">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-checkbox>\n        <ns-multiselect \n            @addOption="addOption( $event )" \n            @removeOption="removeOption( $event )" \n            :field="field" \n            v-if="isMultiselect">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-multiselect>\n        <ns-ckeditor \n            :field="field" \n            v-if="isCkEditor">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-ckeditor>\n        <ns-switch \n            :field="field" \n            @change="$emit( \'change\', field )"\n            v-if="isSwitch">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-switch>\n        <template v-if="isCustom">\n            <keep-alive>\n                <component \n                    :field="field"\n                    @blur="$emit( \'blur\', field )" \n                    @change="$emit( \'change\', field )" \n                    v-bind:is="field.component"></component>\n            </keep-alive>\n        </template>\n    </div>\n    '}),O=n.default.component("ns-multiselect",{data:function(){return{showPanel:!1,search:""}},props:["field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},_options:function(){var e=this;return this.field.options.map((function(t){return t.selected=void 0!==t.selected&&t.selected,e.field.value&&e.field.value.includes(t.value)&&(t.selected=!0),t}))}},methods:{__:u.__,addOption:function(e){this.field.disabled||(this.$emit("addOption",e),this.$forceUpdate(),setTimeout((function(){}),100))},removeOption:function(e,t){var r=this;if(!this.field.disabled)return t.preventDefault(),t.stopPropagation(),this.$emit("removeOption",e),this.$forceUpdate(),setTimeout((function(){r.search=""}),100),!1}},mounted:function(){var e=this;this.field.value&&this.field.value.reverse().forEach((function(t){var r=e.field.options.filter((function(e){return e.value===t}));r.length>=0&&e.addOption(r[0])}))},template:'\n    <div class="flex flex-col">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block mb-1 leading-5 font-medium"><slot></slot></label>\n        <div class="bg-white flex flex-col">\n            <div @click="showPanel = !showPanel" :class="showPanel ? \'\' : \'\'" class="select-preview flex justify-between rounded border-2 border-gray-200 p-2 items-center">\n                <div class="flex -mx-1 -my-1 flex-wrap">\n                    <div class="px-1 my-1" v-for="(option,index) of _options.filter( o => o.selected )">\n                        <div class="rounded bg-blue-400 text-white flex justify-between p-1 items-center">\n                            <span class="pr-8">{{ option.label }}</span>\n                            <button @click="removeOption( option, $event )" class="rounded outline-none hover:bg-blue-500 h-6 w-6 flex items-center justify-center">\n                                <i class="las la-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <i class="las la-angle-down" v-if="showPanel"></i>\n                    <i class="las la-angle-up" v-if="!showPanel"></i>\n                </div>\n            </div>\n            <div class="h-0 z-10" v-if="showPanel" :class="showPanel ? \'shadow\' : \'\'">\n                <div class="bg-white shadow">\n                    <div class="search border-b border-gray-200">\n                        <input v-model="search" class="p-2 w-full text-gray-600 outline-none" placeholder="Search">\n                    </div>\n                    <div class="h-40 overflow-y-auto">\n                        <div @click="addOption( option )" v-for="(option, index) of _options" :class="option.selected ? \'bg-blue-300 text-white\' : \'text-gray-600\'" class="option p-2 flex justify-between cursor-pointer hover:bg-blue-200 hover:text-white">\n                            <span>{{ option.label }}</span>\n                            <span>\n                                <i v-if="option.checked" class="las la-check"></i>\n                            </span>\n                        </div>\n                    </div>\n                    <div v-if="_options.length === 0" class="p-2 text-center text-gray-400">{{ __( \'Nothing to display\' ) }}</div>\n                </div>\n            </div>\n        </div>\n        <div class="my-2">\n            <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n            <p v-for="error of field.errors" class="text-xs text-red-400">\n                <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n                <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n                <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n            </p>\n        </div>\n    </div>\n    '}),T=n.default.component("ns-switch",{data:function(){return{}},mounted:function(){},computed:{_options:function(){var e=this;return this.field.options.map((function(t){return t.selected=t.value===e.field.value,t}))},hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":""},sizeClass:function(){return" w-1/".concat(this._options.length<=4?this._options.length:4)},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__,setSelected:function(e){this.field.value=e.value,this._options.forEach((function(e){return e.selected=!1})),e.selected=!0,this.$forceUpdate(),this.$emit("change",e.value)}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div class="rounded-lg flex overflow-hidden w-40 shadow my-2" :class="hasError ? \'border border-red-400\' : \'\'">\n            <button \n                :disabled="option.disabled" \n                v-for="option of _options" \n                @click="setSelected( option )" \n                :class="option.selected ? \'bg-blue-400 text-white \' + sizeClass : \'bg-gray-100 text-gray-800\' + \' \' + inputClass + \' \' + sizeClass" \n                class="px-3 py-2 flex-no-wrap outline-none">{{ option.label }}</button>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n        </p>\n    </div>\n    '}),E=n.default.component("ns-date",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-auto flex-col mb-2">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" type="date"\n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),$=r(2285),F=r(9045),L=n.default.component("ns-media-input",{template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <div class="rounded overflow-hidden flex">\n                <div \n                    v-if="field.data && field.data.type === \'model\'"\n                    class="form-input flex w-full sm:text-sm items-center sm:leading-5 h-10">\n                    <template v-if="field.value && field.value.name">\n                        <img class="w-8 h-8 m-1" :src="field.value.sizes.thumb" :alt="field.value.name">\n                        <span class="text-xs text-gray-600">{{ field.value.name }}</span>\n                    </template>\n                </div>\n                <input \n                    v-if="! field.data || field.data.type === \'undefined\' || field.data.type === \'url\'"\n                    v-model="field.value" \n                    @blur="$emit( \'blur\', this )" \n                    @change="$emit( \'change\', this )" \n                    :id="field.name" :type="type || field.type || \'text\'" \n                    :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n                <button \n                    @click="toggleMedia( field )"\n                    class="w-10 h-10 flex items-center justify-center border-l-2 border-gray-200 hover:bg-blue-400 hover:text-white outline-none">\n                    <i class="las la-photo-video"></i>\n                </button>\n            </div>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    ',computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},data:function(){return{}},props:["placeholder","leading","type","field"],mounted:function(){},methods:{toggleMedia:function(){var e=this;new Promise((function(t,r){$.G.show(F.Z,Object.assign({resolve:t,reject:r},e.field.data||{}))})).then((function(t){"use-selected"===t.event&&(e.field.data&&"url"!==e.field.data.type?e.field.data&&"model"!==e.field.data.type||(e.field.value=t.value[0]):e.field.value=t.value[0].sizes.original,e.$forceUpdate())}))}}}),D=n.default.component("ns-close-button",{template:'\n    <button @click="clicked( $event )" class="outline-none hover:bg-red-400 hover:text-white hover:border-red-600 rounded-full h-8 w-8 border items-center justify-center">\n        <i class="las la-times"></i>\n    </button>\n    ',methods:{clicked:function(e){this.$emit("click",e)}}}),V=n.default.component("ns-icon-button",{template:'\n    <button @click="clicked( $event )" :class="buttonClass ? buttonClass : \'hover:bg-blue-400 hover:text-white hover:border-blue-600\'" class="rounded-full h-8 w-8 border items-center justify-center">\n        <i :class="className" class="las"></i>\n    </button>\n    ',props:["className","buttonClass"],methods:{clicked:function(e){this.$emit("click",e)}}}),A=r(1272),N=r.n(A),Z=r(5234),q=r.n(Z),I=n.default.component("ns-ckeditor",{data:function(){return{editor:q()}},components:{ckeditor:N().component},mounted:function(){},methods:{__:u.__},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <ckeditor class="w-full" :editor="editor" v-model="field.value"></ckeditor>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),G=n.default.component("ns-tabs",{data:function(){return{childrens:[]}},props:["active"],computed:{activeComponent:function(){var e=this.$children.filter((function(e){return e.active}));return e.length>0&&e[0]}},methods:{toggle:function(e){this.$emit("active",e.identifier),this.$emit("changeTab",e.identifier)}},mounted:function(){this.childrens=this.$children},template:'\n    <div class="tabs flex flex-col flex-auto">\n        <div class="header flex" style="margin-bottom: -1px;">\n            <div v-for="( tab , identifier ) of childrens" @click="toggle( tab )" :class="active === tab.identifier ? \'border-b-0 bg-white z-10\' : \'border bg-gray-200\'" class="tab rounded-tl rounded-tr border border-gray-400  px-3 py-2 text-gray-700 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n        </div>\n        <slot></slot>\n    </div>\n    '}),R=n.default.component("ns-tabs-item",{data:function(){return{}},mounted:function(){},props:["label","identifier","padding"],template:'\n    <div :class="( padding || \'p-4\' )" class="border flex-auto border-gray-400 bg-white" v-if="$parent.active === identifier">\n        <slot></slot>\n    </div>\n    '}),M=r(7995),Y=r(4503),z=r(4914);const H=n.default.extend({data:function(){return{fields:[],validation:new b.Z}},methods:{__:u.__,popupCloser:Y.Z,popupResolver:z.Z,closePopup:function(){this.popupResolver(!1)},useFilters:function(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters:function(){this.fields.forEach((function(e){return e.value=""})),this.popupResolver(null)}},mounted:function(){this.fields=this.validation.createFields(this.$popupParams.queryFilters),this.popupCloser()}});const X=(0,k.Z)(H,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"bg-white shadow-lg w-95vw h-95vh md:w-2/5-screen overflow-hidden md:h-5/6-screen flex flex-col"},[t("div",{staticClass:"p-2 border-b flex justify-between items-center"},[t("h3",[e._v(e._s(e.__("Search Filters")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 border-b flex-auto overflow-y-auto"},e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),1),e._v(" "),t("div",{staticClass:"p-2 flex justify-between"},[t("div",[t("ns-button",{attrs:{type:"danger"},on:{click:function(t){return e.clearFilters()}}},[e._v(e._s(e.__("Clear Filters")))])],1),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.useFilters()}}},[e._v(e._s(e.__("Use Filters")))])],1)])])}),[],!1,null,null,null).exports;function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function U(){U=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new E(n||[]);return s(o,"_invoke",{value:j(e,r,a)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",b={};function m(){}function g(){}function y(){}var _={};c(_,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x($([])));w&&w!==r&&n.call(w,o)&&(_=w);var C=y.prototype=m.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(s,i,o,a){var l=d(e[s],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==W(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,a)}))}a(l.arg)}var i;s(this,"_invoke",{value:function(e,n){function s(){return new t((function(t,s){r(e,n,t,s)}))}return i=i?i.then(s,s):s()}})}function j(t,r,n){var s=f;return function(i,o){if(s===h)throw new Error("Generator is already running");if(s===v){if("throw"===i)throw o;return{value:e,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=P(a,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=h;var c=d(t,r,n);if("normal"===c.type){if(s=n.done?v:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=v,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,s=t.iterator[n];if(s===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=d(s,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function $(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,i=function r(){for(;++s<t.length;)if(n.call(t,s))return r.value=t[s],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(W(t)+" is not iterable")}return g.prototype=y,s(C,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:g,configurable:!0}),g.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},k(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,s,i){void 0===i&&(i=Promise);var o=new S(u(e,r,n,s),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=$,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function s(n,s){return a.type="throw",a.arg=t,r.next=n,s&&(r.method="next",r.arg=e),!!s}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;T(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:$(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}var B=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const Q={data:function(){return{isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],withFilters:!1,columns:[],selectedEntries:[],globallyChecked:!1,result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}},mounted:function(){void 0!==this.identifier&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},props:["src","create-url","mode","identifier","queryParams"],computed:{getParsedSrc:function(){return"".concat(this.src,"?").concat(this.sortColumn).concat(this.searchQuery).concat(this.queryFiltersString).concat(this.queryPage).concat(this.getQueryParams()?"&"+this.getQueryParams():"")},showQueryFilters:function(){return this.queryFilters.length>0},getSelectedAction:function(){var e=this,t=this.bulkActions.filter((function(t){return t.identifier===e.bulkAction}));return t.length>0&&t[0]},pagination:function(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage:function(){return this.result?"&page=".concat(this.page):""},resultInfo:function(){return(0,u.__)("displaying {perPage} on {items} items").replace("{perPage}",this.result.total).replace("{items}",this.result.total)}},methods:{__:u.__,getQueryParams:function(){var e=this;return this.queryParams?Object.keys(this.queryParams).map((function(t){return"".concat(t,"=").concat(e.queryParams[t])})).join("&"):""},pageNumbers:function(e,t){var r=[];t-3>1&&r.push(1,"...");for(var n=1;n<=e;n++)t+3>n&&t-3<n&&r.push(n);return t+3<e&&r.push("...",e),r.filter((function(e){return e>0||"string"==typeof e}))},downloadContent:function(){nsHttpClient.post("".concat(this.src,"/export?").concat(this.getParsedSrc),{entries:this.selectedEntries.map((function(e){return e.$id}))}).subscribe((function(e){setTimeout((function(){return document.location=e.url}),300),s.kX.success((0,u.__)("The document has been generated.")).subscribe()}),(function(e){s.kX.error(e.message||(0,u.__)("Unexpected error occured.")).subscribe()}))},clearSelectedEntries:function(){var e=this;$.G.show(M.Z,{title:(0,u.__)("Clear Selected Entries ?"),message:(0,u.__)("Would you like to clear all selected entries ?"),onAction:function(t){t&&(e.selectedEntries=[])}})},refreshRow:function(e){if(!0===e.$checked){0===this.selectedEntries.filter((function(t){return t.$id===e.$id})).length&&this.selectedEntries.push(e)}else{var t=this.selectedEntries.filter((function(t){return t.$id===e.$id}));if(t.length>0){var r=this.selectedEntries.indexOf(t[0]);this.selectedEntries.splice(r,1)}}},handleShowOptions:function(e){this.result.data.forEach((function(t){t.$id!==e.$id&&(t.$toggled=!1)}))},handleGlobalChange:function(e){var t=this;this.globallyChecked=e,this.result.data.forEach((function(r){r.$checked=e,t.refreshRow(r)}))},loadConfig:function(){var e=this;nsHttpClient.get("".concat(this.src,"/config?").concat(this.getQueryParams())).subscribe((function(t){e.columns=t.columns,e.bulkActions=t.bulkActions,e.queryFilters=t.queryFilters,e.refresh()}),(function(e){s.kX.error(e.message,"OK",{duration:!1}).subscribe()}))},cancelSearch:function(){this.searchInput="",this.search()},search:function(){this.searchInput?this.searchQuery="&search=".concat(this.searchInput):this.searchQuery="",this.refresh()},sort:function(e){for(var t in this.columns)t!==e&&(this.columns[t].$sorted=!1,this.columns[t].$direction="");switch(this.columns[e].$sorted=!0,this.columns[e].$direction){case"asc":this.columns[e].$direction="desc";break;case"desc":this.columns[e].$direction="";break;case"":this.columns[e].$direction="asc"}["asc","desc"].includes(this.columns[e].$direction)?this.sortColumn="active=".concat(e,"&direction=").concat(this.columns[e].$direction):this.sortColumn="",this.$emit("sort",this.columns[e]),this.refresh()},bulkDo:function(){var e=this;return this.bulkAction?this.selectedEntries.length>0?confirm(this.getSelectedAction.confirm||this.$slots["error-bulk-confirmation"]||(0,u.__)("Would you like to perform the selected bulk action on the selected entries ?"))?nsHttpClient.post("".concat(this.src,"/bulk-actions"),{action:this.bulkAction,entries:this.selectedEntries.map((function(e){return e.$id}))}).subscribe({next:function(t){s.kX.info(t.message).subscribe(),e.selectedEntries=[],e.refresh()},error:function(e){s.kX.error(e.message).subscribe()}}):void 0:s.kX.error(this.$slots["error-no-selection"]?this.$slots["error-no-selection"][0].text:(0,u.__)("No selection has been made.")).subscribe():s.kX.error(this.$slots["error-no-action"]?this.$slots["error-no-action"][0].text:(0,u.__)("No action has been selected.")).subscribe()},openQueryFilter:function(){return B(this,void 0,void 0,U().mark((function e(){var t,r=this;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){$.G.show(X,{resolve:e,reject:t,queryFilters:r.queryFilters})}));case 3:t=e.sent,this.withFilters=!1,this.queryFiltersString="",null!==t&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(t))),this.refresh(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})))},refresh:function(){var e=this;this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get("".concat(this.getParsedSrc)).subscribe((function(t){t.data=t.data.map((function(t){return e.selectedEntries.filter((function(e){return e.$id===t.$id})).length>0&&(t.$checked=!0),t})),e.isRefreshing=!1,e.result=t,e.page=t.current_page}),(function(t){e.isRefreshing=!1,s.kX.error(t.message).subscribe()}))}}};const K=(0,k.Z)(Q,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full rounded-lg bg-white",class:"light"!==e.mode?"shadow mb-8":"",attrs:{id:"crud-table"}},["light"!==e.mode?t("div",{staticClass:"p-2 border-b border-gray-200 flex flex-col md:flex-row justify-between flex-wrap",attrs:{id:"crud-table-header"}},[t("div",{staticClass:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex",attrs:{id:"crud-search-box"}},[t("div",{staticClass:"px-2 flex items-center justify-center"},[t("a",{staticClass:"rounded-full hover:border-blue-400 hover:text-white hover:bg-blue-400 text-sm h-10 flex items-center justify-center cursor-pointer bg-white px-3 outline-none text-gray-800 border border-gray-400",attrs:{href:e.createUrl||"#"}},[t("i",{staticClass:"las la-plus"})])]),e._v(" "),t("div",{staticClass:"px-2"},[t("div",{staticClass:"rounded-full p-1 bg-gray-200 flex"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"w-36 md:w-auto bg-transparent outline-none px-2",attrs:{type:"text"},domProps:{value:e.searchInput},on:{input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),e._v(" "),t("button",{staticClass:"rounded-full w-8 h-8 bg-white outline-none hover:bg-blue-400 hover:text-white",on:{click:function(t){return e.search()}}},[t("i",{staticClass:"las la-search"})]),e._v(" "),e.searchQuery?t("button",{staticClass:"ml-1 rounded-full w-8 h-8 bg-red-400 text-white outline-none hover:bg-red-500 hover:text-white",on:{click:function(t){return e.cancelSearch()}}},[t("i",{staticClass:"las la-times"})]):e._e()])]),e._v(" "),t("div",{staticClass:"px-2 flex"},[t("button",{staticClass:"rounded-full hover:border-blue-400 hover:text-white hover:bg-blue-400 text-sm h-10 bg-white px-3 outline-none text-gray-800 border border-gray-400",on:{click:function(t){return e.refresh()}}},[t("i",{staticClass:"las la-sync",class:e.isRefreshing?"animate-spin":""})])]),e._v(" "),e.showQueryFilters?t("div",{staticClass:"px-2 flex"},[t("button",{staticClass:"border rounded-full hover:border-blue-400 hover:text-white hover:bg-blue-400 text-sm h-10 px-3 outline-none bg-white",class:e.withFilters?"bg-blue-100 border-blue-200":"text-gray-800 border-gray-400",on:{click:function(t){return e.openQueryFilter()}}},[e.withFilters?e._e():t("i",{staticClass:"las la-filter"}),e._v(" "),e.withFilters?t("i",{staticClass:"las la-check"}):e._e(),e._v(" "),e.withFilters?e._e():t("span",[e._v(e._s(e.__("Filters")))]),e._v(" "),e.withFilters?t("span",[e._v(e._s(e.__("Has Filters")))]):e._e()])]):e._e()]),e._v(" "),t("div",{staticClass:"-mx-1 flex flex-wrap w-full md:w-auto",attrs:{id:"crud-buttons"}},[e.selectedEntries.length>0?t("div",{staticClass:"px-1 flex"},[t("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 hover:border-blue-400 hover:text-white hover:bg-blue-400 outline-none border-gray-400 border text-gray-700",on:{click:function(t){return e.clearSelectedEntries()}}},[t("i",{staticClass:"lar la-check-square"}),e._v(" "+e._s(e.__("{entries} entries selected").replace("{entries}",e.selectedEntries.length))+"\n                ")])]):e._e(),e._v(" "),t("div",{staticClass:"px-1 flex"},[t("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 bg-teal-400 outline-none text-white font-semibold",on:{click:function(t){return e.downloadContent()}}},[t("i",{staticClass:"las la-download"}),e._v(" "+e._s(e.__("Download")))])])])]):e._e(),e._v(" "),t("div",{staticClass:"flex"},[t("div",{staticClass:"overflow-x-auto flex-auto"},[Object.values(e.columns).length>0?t("table",{staticClass:"table w-full"},[t("thead",[t("tr",{staticClass:"text-gray-700 border-b border-gray-200"},[t("th",{staticClass:"text-center px-2 border-gray-200 bg-gray-100 border w-16 py-2"},[t("ns-checkbox",{attrs:{checked:e.globallyChecked},on:{change:function(t){return e.handleGlobalChange(t)}}})],1),e._v(" "),e._l(e.columns,(function(r,n){return t("th",{key:n,staticClass:"cursor-pointer justify-betweenw-40 border bg-gray-100 text-left px-2 border-gray-200 py-2",style:{"min-width":r.width||"auto"},on:{click:function(t){return e.sort(n)}}},[t("div",{staticClass:"w-full flex justify-between items-center"},[t("span",{staticClass:"flex"},[e._v(e._s(r.label))]),e._v(" "),t("span",{staticClass:"h-6 w-6 flex justify-center items-center"},["desc"===r.$direction?t("i",{staticClass:"las la-sort-amount-up"}):e._e(),e._v(" "),"asc"===r.$direction?t("i",{staticClass:"las la-sort-amount-down"}):e._e()])])])})),e._v(" "),t("th",{staticClass:"text-left px-2 py-2 w-16 border border-gray-200 bg-gray-100"})],2)]),e._v(" "),t("tbody",[void 0!==e.result.data&&e.result.data.length>0?e._l(e.result.data,(function(r,n){return t("ns-table-row",{key:n,attrs:{columns:e.columns,row:r},on:{updated:function(t){return e.refreshRow(t)},reload:function(t){return e.refresh()},toggled:function(t){return e.handleShowOptions(t)}}})})):e._e(),e._v(" "),e.result&&0!==e.result.data.length?e._e():t("tr",[t("td",{staticClass:"text-center text-gray-600 py-3",attrs:{colspan:Object.values(e.columns).length+2}},[e._v(e._s(e.__("There is nothing to display...")))])])],2)]):e._e()])]),e._v(" "),t("div",{staticClass:"p-2 flex flex-col md:flex-row justify-between"},[e.bulkActions.length>0?t("div",{staticClass:"mb-2 md:mb-0 flex justify-between rounded-full bg-gray-200 p-1",attrs:{id:"grouped-actions"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.bulkAction,expression:"bulkAction"}],staticClass:"text-gray-800 outline-none bg-transparent",attrs:{id:"grouped-actions"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.bulkAction=t.target.multiple?r:r[0]}}},[t("option",{attrs:{selected:"",value:""}},[e._t("bulk-label",(function(){return[e._v(e._s(e.__("Bulk Actions")))]}))],2),e._v(" "),e._l(e.bulkActions,(function(r,n){return t("option",{key:n,domProps:{value:r.identifier}},[e._v(e._s(r.label))])}))],2),e._v(" "),t("button",{staticClass:"h-8 w-8 outline-none hover:bg-blue-400 hover:text-white rounded-full bg-white flex items-center justify-center",on:{click:function(t){return e.bulkDo()}}},[e._t("bulk-go",(function(){return[e._v(e._s(e.__("Go")))]}))],2)]):e._e(),e._v(" "),t("div",{staticClass:"flex"},[t("div",{staticClass:"items-center flex text-gray-600 mx-4"},[e._v(e._s(e.resultInfo))]),e._v(" "),t("div",{staticClass:"flex -mx-1",attrs:{id:"pagination"}},[e.result.current_page?[t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=e.result.first_page,e.refresh()}}},[t("i",{staticClass:"las la-angle-double-left"})]),e._v(" "),e._l(e.pagination,(function(r,n){return["..."!==e.page?t("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full hover:bg-blue-400 hover:text-white",class:e.page==r?"bg-blue-400 text-white":"bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=r,e.refresh()}}},[e._v(e._s(r))]):e._e(),e._v(" "),"..."===e.page?t("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"}},[e._v("...")]):e._e()]})),e._v(" "),t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=e.result.last_page,e.refresh()}}},[t("i",{staticClass:"las la-angle-double-right"})])]:e._e()],2)])])])}),[],!1,null,null,null).exports;var J=r(3571),ee=r(1726),te=r(7259);const re=n.default.extend({methods:{__:u.__},data:function(){return{svg:""}},mounted:function(){this.svg=(0,ee.createAvatar)(te,{seed:this.displayName})},computed:{avatarUrl:function(){return 0===this.url.length?"":this.url}},props:["url","display-name"]});const ne=(0,k.Z)(re,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flex justify-between items-center flex-shrink-0"},[t("span",{staticClass:"hidden md:inline-block text-gray-600 px-2"},[e._v(e._s(e.__("Howdy, {name}").replace("{name}",this.displayName)))]),e._v(" "),t("span",{staticClass:"md:hidden text-gray-600 px-2"},[e._v(e._s(e.displayName))]),e._v(" "),t("div",{staticClass:"px-2"},[t("div",{staticClass:"w-8 h-8 overflow-hidden rounded-full bg-gray-600"},[""!==e.avatarUrl?t("img",{staticClass:"w-8 h-8 overflow-hidden rounded-full",attrs:{src:e.avatarUrl,alt:e.displayName,srcset:""}}):e._e(),e._v(" "),""===e.avatarUrl?t("div",{domProps:{innerHTML:e._s(e.svg)}}):e._e()])])])}),[],!1,null,null,null).exports;var se=r(9341),ie=r(5425),oe=r(1156)},6261:(e,t,r)=>{"use strict";r.d(t,{W:()=>c,f:()=>u});var n=r(538),s=r(2077),i=r.n(s),o=r(6740),a=r.n(o),l=new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join(""),c=n.default.filter("currency",(function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full";switch(ns.currency.ns_currency_prefered){case"iso":t=ns.currency.ns_currency_iso;break;case"symbol":t=ns.currency.ns_currency_symbol}if("full"===n){var s={decimal:ns.currency.ns_currency_decimal_separator,separator:ns.currency.ns_currency_thousand_separator,precision:parseInt(ns.currency.ns_currency_precision),symbol:""};r=a()(e,s).format()}else r=i()(e).format("0.0a");return"".concat("before"===ns.currency.ns_currency_position?t:"").concat(r).concat("after"===ns.currency.ns_currency_position?t:"")})),u=function(e){var t="0.".concat(l);return parseFloat(i()(e).format(t))}},7761:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var n=r(538).default.filter("truncate",(function(e,t){return e?(e=e.toString()).length>t?e.substring(0,t)+"...":e:""}))},40:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}r.d(t,{Z:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,r=[{key:"validateFields",value:function(e){var t=this;return 0===e.map((function(e){return t.checkField(e),e.errors?0===e.errors.length:0})).filter((function(e){return!1===e})).length}},{key:"validateFieldsErrors",value:function(e){var t=this;return e.map((function(e){return t.checkField(e),e.errors})).flat()}},{key:"validateForm",value:function(e){e.main&&this.validateField(e.main);var t=[];for(var r in e.tabs){var n=[],s=this.validateFieldsErrors(e.tabs[r].fields);s.length>0&&n.push(s),e.tabs[r].errors=n.flat(),t.push(n.flat())}return t.flat().filter((function(e){return void 0!==e}))}},{key:"initializeTabs",value:function(e){var t=0;for(var r in e)0===t&&(e[r].active=!0),e[r].active=void 0!==e[r].active&&e[r].active,e[r].fields=this.createFields(e[r].fields),t++;return e}},{key:"validateField",value:function(e){return this.checkField(e)}},{key:"fieldsValid",value:function(e){return!(e.map((function(e){return e.errors&&e.errors.length>0})).filter((function(e){return e})).length>0)}},{key:"createFields",value:function(e){return e.map((function(e){return e.type=e.type||"text",e.errors=e.errors||[],e.disabled=e.disabled||!1,"custom"===e.type&&(e.component=nsExtraComponents[e.name]),e}))}},{key:"createForm",value:function(e){if(e.main&&(e.main=this.createFields([e.main])[0]),e.tabs)for(var t in e.tabs)e.tabs[t].fields=this.createFields(e.tabs[t].fields),e.tabs[t].errors=[];return e}},{key:"enableFields",value:function(e){return e.map((function(e){return e.disabled=!1}))}},{key:"disableFields",value:function(e){return e.map((function(e){return e.disabled=!0}))}},{key:"disableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!0),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!0}))}},{key:"enableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!1),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!1}))}},{key:"getValue",value:function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"checkField",value:function(e){var t=this;return void 0!==e.validation&&(e.errors=[],this.detectValidationRules(e.validation).forEach((function(r){t.fieldPassCheck(e,r)}))),e}},{key:"extractForm",value:function(e){var t={};if(e.main&&(t[e.main.name]=e.main.value),e.tabs)for(var r in e.tabs)void 0===t[r]&&(t[r]={}),t[r]=this.extractFields(e.tabs[r].fields);return t}},{key:"extractFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"detectValidationRules",value:function(e){var t=function(e){var t;return["email","required"].includes(e)?{identifier:e}:(t=/(min)\:([0-9])+/g.exec(e))||(t=/(max)\:([0-9])+/g.exec(e))?{identifier:t[1],value:t[2]}:e};return Array.isArray(e)?e.filter((function(e){return"string"==typeof e})).map(t):e.split("|").map(t)}},{key:"triggerError",value:function(e,t){if(t.errors){var r=function(r){var n=r.split(".").filter((function(e){return!/^\d+$/.test(e)}));2===n.length&&e.tabs[n[0]].fields.forEach((function(e){e.name===n[1]&&t.errors[r].forEach((function(t){var r={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(r)}))})),r===e.main.name&&t.errors[r].forEach((function(t){e.main.errors.push({identifier:"invalid",invalid:!0,message:t,name:e.main.name})}))};for(var n in t.errors)r(n)}}},{key:"triggerFieldsErrors",value:function(e,t){if(t&&t.errors){var r=function(r){e.forEach((function(e){e.name===r&&t.errors[r].forEach((function(t){var r={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(r)}))}))};for(var n in t.errors)r(n)}}},{key:"fieldPassCheck",value:function(e,t){if("required"===t.identifier){if(void 0===e.value||null===e.value||0===e.value.length)return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(r,n){r.identifier===t.identifier&&!0===r.invalid&&e.errors.splice(n,1)}))}if("email"===t.identifier&&e.value.length>0){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e.value))return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(r,n){!0===r[t.identifier]&&e.errors.splice(n,1)}))}return e}}],r&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},9165:(e,t,r)=>{"use strict";r.d(t,{__:()=>n,c:()=>s});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NexoPOS";return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e},s=function(e,t){return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e}},4503:(e,t,r)=>{"use strict";function n(){var e=this;Object.keys(this).includes("$popup")&&this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close()),"press-esc"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close())}))}r.d(t,{Z:()=>n})},4914:(e,t,r)=>{"use strict";function n(e){void 0!==this.$popupParams.resolve&&this.$popupParams.reject&&(!1!==e?this.$popupParams.resolve(e):this.$popupParams.reject(e)),this.$popup.close()}r.d(t,{Z:()=>n})},2285:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(9248);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={primarySelector:void 0,popupClass:"shadow-lg h-half w-1/2 bg-white"},this.container=document.createElement("div"),this.popupBody=document.createElement("div"),this.config=Object.assign(this.config,t),void 0===this.config.primarySelector&&document.querySelectorAll(".is-popup").length>0){var r=document.querySelectorAll(".is-popup").length;this.parentWrapper=document.querySelectorAll(".is-popup")[r-1]}else this.parentWrapper=document.querySelector("body").querySelectorAll("div")[0];this.event=new n.x}var t,r,s;return t=e,r=[{key:"open",value:function(e){var t,r,n,s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=document.querySelector("body").querySelectorAll("div")[0];this.parentWrapper.style.filter="blur(4px)",o.style.filter="blur(6px)",this.container.setAttribute("class","absolute top-0 left-0 w-full h-full flex items-center justify-center is-popup"),this.container.addEventListener("click",(function(e){s.event.next({event:"click-overlay",value:!0}),e.stopPropagation()})),this.popupBody.addEventListener("click",(function(e){e.stopImmediatePropagation()})),this.container.style.background="rgb(51 51 51 / 20%)",this.container.id="popup-container-"+document.querySelectorAll(".is-popup").length,this.popupBody.setAttribute("class"," zoom-out-entrance"),this.popupBody.innerHTML='<div class="popup-body"></div>',this.container.appendChild(this.popupBody),document.body.appendChild(this.container);var a=Vue.extend(e);this.instance=new a({propsData:{popup:this}}),this.instance.template=(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.template)||void 0,this.instance.render=e.render||void 0,this.instance.methods=(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.methods)||(null==e?void 0:e.methods),this.instance.data=(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.data)||(null==e?void 0:e.data),this.instance.$popup=this,this.instance.$popupParams=i,this.instance.$mount("#".concat(this.container.id," .popup-body"))}},{key:"close",value:function(){var e=this;this.instance.$destroy(),this.event.unsubscribe(),this.parentWrapper.style.filter="blur(0px)";var t=document.querySelector("body").querySelectorAll("div")[0];document.querySelectorAll(".is-popup").length<=1&&(t.style.filter="blur(0px)"),this.popupBody.classList.remove("zoom-out-entrance"),this.popupBody.classList.add("zoom-in-exit"),this.container.classList.remove("is-popup"),setTimeout((function(){e.container.remove()}),300)}}],s=[{key:"show",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return n.open(t,r),n}}],r&&i(t.prototype,r),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},2767:(e,t,r)=>{"use strict";function n(e){POS.changeVisibleSection(e)}r.d(t,{Z:()=>n})},4085:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});var n=r(3260);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===window.snackbarQueue&&(window.snackbarQueue=[],this.queue=window.snackbarQueue)}var t,r,s;return t=e,r=[{key:"show",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return n.Observable.create((function(n){var i=r.__createSnack({message:e,label:t,type:s.type}),o=i.buttonNode,a=(i.textNode,i.snackWrapper,i.sampleSnack);o.addEventListener("click",(function(e){n.onNext(o),n.onCompleted(),a.remove()})),r.__startTimer(s.duration,a)}))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"error"};return this.show(e,t,Object.assign(Object.assign({},r),{type:"error"}))}},{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"success"};return this.show(e,t,Object.assign(Object.assign({},r),{type:"success"}))}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return this.show(e,t,Object.assign(Object.assign({},r),{type:"info"}))}},{key:"__startTimer",value:function(e,t){var r,n=function(){e>0&&!1!==e&&(r=setTimeout((function(){t.remove()}),e))};t.addEventListener("mouseenter",(function(){clearTimeout(r)})),t.addEventListener("mouseleave",(function(){n()})),n()}},{key:"__createSnack",value:function(e){var t=e.message,r=e.label,n=e.type,s=void 0===n?"info":n,i=document.getElementById("snack-wrapper")||document.createElement("div"),o=document.createElement("div"),a=document.createElement("p"),l=document.createElement("div"),c=document.createElement("button"),u="",d="";switch(s){case"info":u="text-white hover:bg-blue-400 bg-blue-500",d="bg-gray-900 text-white";break;case"error":u="text-red-700 hover:bg-white bg-white",d="bg-red-500 text-white";break;case"success":u="text-green-700 hover:bg-white bg-white",d="bg-green-500 text-white"}return a.textContent=t,r&&(c.textContent=r,c.setAttribute("class","px-3 py-2 shadow rounded uppercase ".concat(u)),l.appendChild(c)),o.appendChild(a),o.appendChild(l),o.setAttribute("class","md:rounded py-2 px-3 md:w-2/5 w-full z-10 md:my-2 shadow-lg flex justify-between items-center zoom-in-entrance anim-duration-300 ".concat(d)),i.appendChild(o),null===document.getElementById("snack-wrapper")&&(i.setAttribute("id","snack-wrapper"),i.setAttribute("class","absolute bottom-0 w-full flex justify-between items-center flex-col"),document.body.appendChild(i)),{snackWrapper:i,sampleSnack:o,buttonsWrapper:l,buttonNode:c,textNode:a}}}],r&&i(t.prototype,r),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},3612:(e,t,r)=>{"use strict";r.d(t,{$:()=>u});var n=r(277),s=r(9165),i=r(2285),o=r(1836);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:String(t)}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.product=t}var t,r,a;return t=e,(r=[{key:"run",value:function(e){var t=this;return new Promise((function(r,a){var l=new i.G({popupClass:"shadow-lg h-1/2-screen w-3/4 md:w-1/2 lg:w-2/5 xl:w-1/4 bg-white"}),c=t.product;if(!1===POS.options.getValue().ns_pos_show_quantity&&POS.processingAddQueue){if("enabled"===c.$original().stock_management){var u=POS.getStockUsage(c.$original().id,e.unit_quantity_id)-(c.quantity||0);if(1>parseFloat(e.$quantities().quantity)-u)return n.kX.error((0,s.__)("Unable to add the product, there is not enough stock. Remaining %s").replace("%s",(e.$quantities().quantity-u).toString())).subscribe()}r({quantity:1})}else l.open(o.Z,{resolve:r,reject:a,product:c,data:e})}))}}])&&l(t.prototype,r),a&&l(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},6702:(e,t,r)=>{"use strict";var n=r(538),s=(r(4975),r(2633)),i=r(1630),o=r.n(i),a=r(6178).Z,l=r(8454).Z,c=r(9742).Z;window.nsComponents=Object.assign({},s),n.default.use(o()),new n.default({el:"#pos-app",components:Object.assign({NsPos:a,NsPosCart:l,NsPosGrid:c},window.nsComponents)})},4975:(e,t,r)=>{"use strict";var n=r(381),s=r.n(n);ns.date.moment=s()(ns.date.current),ns.date.interval=setInterval((function(){ns.date.moment.add(1,"seconds"),ns.date.current=s()(ns.date.current).add(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}),1e3),ns.date.getNowString=function(){var e=Date.parse((new Date).toLocaleString("en-US",{timeZone:ns.date.timeZone}));return s()(e).format("YYYY-MM-DD HH:mm:ss")},ns.date.getMoment=function(){var e=Date.parse((new Date).toLocaleString("en-US",{timeZone:ns.date.timeZone}));return s()(e)}},6700:(e,t,r)=>{var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-ps":315,"./ar-ps.js":315,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":4415,"./fy.js":4415,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku-kmr":563,"./ku-kmr.js":563,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function s(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=i,e.exports=s,s.id=6700},7217:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(381),s=r.n(n);const i={name:"ns-date-time-picker",props:["field","date"],data:function(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:s(),months:new Array(11).fill("").map((function(e,t){return t})),daysOfWeek:new Array(7).fill("").map((function(e,t){return t})),calendar:[[]]}},computed:{momentCopy:function(){return s()()}},watch:{visible:function(){var e=this;this.visible&&setTimeout((function(){e.$refs.hours.addEventListener("focus",(function(){this.select()})),e.$refs.minutes.addEventListener("focus",(function(){this.select()}))}),100)}},mounted:function(){var e=this;document.addEventListener("mousedown",(function(t){return e.checkClickedItem(t)})),this.field?this.currentDay=[void 0,"",null].includes(this.field.value)?s()():s()(this.field.value):this.currentDay=[void 0,"",null].includes(this.date)?s()():s()(this.date),console.log(this.date),this.hours=this.currentDay.format("HH"),this.minutes=this.currentDay.format("mm"),this.build()},methods:{__:r(9165).__,erase:function(){this.selectDate()},setYear:function(e){parseInt(e.srcElement.value)>0&&parseInt(e.srcElement.value)<9999&&(this.currentDay.year(e.srcElement.value),this.updateDateTime())},subYear:function(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.updateDateTime())},addYear:function(){this.currentDay.add(1,"year"),this.updateDateTime()},toggleView:function(e){var t=this;this.currentView=e,"years"===this.currentView&&setTimeout((function(){t.$refs.year.select()}),100)},setMonth:function(e){this.currentDay.month(e),this.updateDateTime()},detectHoursChange:function(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.updateDateTime()},detectMinuteChange:function(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.updateDateTime()},updateDateTime:function(){this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.build(),this.selectDate(this.currentDay)},checkClickedItem:function(e){!this.$el.contains(e.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(e){[void 0].includes(e)?(this.field&&(this.field.value=null),this.$emit("change",null)):(this.currentDay=e,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.field&&(this.field.value=this.currentDay.format("YYYY/MM/DD HH:mm")),this.$emit("change",this.field?this.field:this.currentDay))},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");;){0===e.day()&&this.calendar[0].length>0&&this.calendar.push([]);var r=this.calendar.length-1;if(this.calendar[r].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(s().now(),"day")}),e.isSame(t,"day"))break;e.add(1,"day")}}}};const o=(0,r(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"picker mb-2"},[e.field?t("label",{staticClass:"block leading-5 font-medium text-gray-700"},[e._v(e._s(e.field.label))]):e._e(),e._v(" "),t("div",{staticClass:"rounded cursor-pointer bg-white px-1 py-1 flex items-center text-gray-700",class:e.field?"mt-1 border-2":"shadow",on:{click:function(t){e.visible=!e.visible}}},[t("i",{staticClass:"las la-clock text-2xl"}),e._v(" "),e.currentDay&&e.field?t("span",{staticClass:"mx-1 text-sm"},[null!==e.field.value?t("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD HH:mm")))]):e._e(),e._v(" "),null===e.field.value?t("span",[e._v("N/A")]):e._e()]):e._e(),e._v(" "),e.currentDay&&e.date?t("span",{staticClass:"mx-1 text-sm"},[null!==e.date?t("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD HH:mm")))]):e._e(),e._v(" "),null===e.date?t("span",[e._v("N/A")]):e._e()]):e._e()]),e._v(" "),e.field?t("p",{staticClass:"text-sm text-gray-500 py-1"},[e._v(e._s(e.field.description))]):e._e(),e._v(" "),e.visible?t("div",{staticClass:"relative z-10 h-0 w-0"},[t("div",{staticClass:"absolute w-72 shadow-lg rounded bg-white anim-duration-300 zoom-in-entrance flex flex-col",class:e.field?"-mt-4":"mt-2"},["years"===e.currentView?t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[t("span",{staticClass:"mr-2 cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("months")}}},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),t("span",{staticClass:"cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"h-32 flex items-center justify-center text-gray-700"},[t("div",{staticClass:"rounded border-blue-400 border-2 flex w-2/3 overflow-hidden"},[t("button",{staticClass:"bg-blue-400 text-white px-4 py-2",on:{click:function(t){return e.subYear()}}},[t("i",{staticClass:"las la-minus"})]),e._v(" "),t("input",{ref:"year",staticClass:"p-2 w-24 text-center",attrs:{type:"text"},domProps:{value:e.currentDay.format("YYYY")},on:{change:function(t){return e.setYear(t)}}}),e._v(" "),t("button",{staticClass:"bg-blue-400 text-white px-4 py-2",on:{click:function(t){return e.addYear()}}},[t("i",{staticClass:"las la-plus"})])])])]):e._e(),e._v(" "),"months"===e.currentView?t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[t("span",{staticClass:"mr-2 border-b border-blue-400 border-dashed"},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),t("span",{staticClass:"cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-gray-700"},e._l(e.months,(function(r,n){return t("div",{key:n,staticClass:"h-8 flex justify-center items-center text-sm"},[[t("div",{staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:e.momentCopy.month(r).format("MM")===e.currentDay.format("MM")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(t){return e.setMonth(r)}}},[e._v("\n                                "+e._s(e.momentCopy.format("MMM"))+"\n                            ")])]],2)})),0)]):e._e(),e._v(" "),"days"===e.currentView?t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[t("span",{staticClass:"mr-2 cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("months")}}},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),t("span",{staticClass:"cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},[t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sun")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Mon")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Tue")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Wed")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Thr")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Fri")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sat")))])]),e._v(" "),e._l(e.calendar,(function(r,n){return t("div",{key:n,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},e._l(e.daysOfWeek,(function(n,s){return t("div",{key:s,staticClass:"h-8 flex justify-center items-center text-sm"},[e._l(r,(function(r,s){return[r.dayOfWeek===n?t("div",{key:s,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:r.date.format("DD")===e.currentDay.format("DD")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(t){return e.selectDate(r.date)}}},[e._v("\n                                "+e._s(r.date.format("DD"))+"\n                            ")]):e._e()]}))],2)})),0)}))],2):e._e(),e._v(" "),t("div",{staticClass:"border-t border-gray-200 w-full p-2"},[t("div",{staticClass:"-mx-1 flex justify-between"},[t("div",{staticClass:"px-1"},[t("div",{staticClass:"-mx-1 flex"},[e.field?t("div",{staticClass:"px-1"},[t("button",{staticClass:"border hover:text-white rounded w-8 h-8 flex items-center justify-center hover:bg-blue-500",on:{click:function(t){return e.erase()}}},[t("i",{staticClass:"las la-trash"})])]):e._e(),e._v(" "),"days"!==e.currentView?t("div",{staticClass:"px-1"},[t("button",{staticClass:"border hover:text-white rounded w-8 h-8 flex items-center justify-center hover:bg-red-500",on:{click:function(t){return e.toggleView("days")}}},[t("i",{staticClass:"las la-sign-out-alt"})])]):e._e()])]),e._v(" "),t("div",{staticClass:"px-2"},[t("div",{staticClass:"rounded flex"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hours,expression:"hours"}],ref:"hours",staticClass:"w-12 p-1 text-center border border-gray-200 active:border-blue-400",attrs:{placeholder:"HH",type:"number"},domProps:{value:e.hours},on:{change:function(t){return e.detectHoursChange(t)},input:function(t){t.target.composing||(e.hours=t.target.value)}}}),e._v(" "),t("span",{staticClass:"mx-1"},[e._v(":")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.minutes,expression:"minutes"}],ref:"minutes",staticClass:"w-12 p-1 text-center border border-gray-200 active:border-blue-400",attrs:{placeholder:"mm",type:"number"},domProps:{value:e.minutes},on:{change:function(t){return e.detectMinuteChange(t)},input:function(t){t.target.composing||(e.minutes=t.target.value)}}})])])])])])]):e._e()])}),[],!1,null,null,null).exports},5425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(381),s=r.n(n);const i={name:"ns-datepicker",props:["label","date"],data:function(){return{visible:!1,currentDay:null,daysOfWeek:new Array(7).fill("").map((function(e,t){return t})),calendar:[[]]}},mounted:function(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null].includes(this.date)?s()():s()(this.date),this.build()},methods:{__:r(9165).__,checkClickedItem:function(e){!this.$el.contains(e.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(e){this.currentDay=e,this.visible=!1,this.$emit("change",e)},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");;){0===e.day()&&this.calendar[0].length>0&&this.calendar.push([]);var r=this.calendar.length-1;if(this.calendar[r].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(s().now(),"day")}),e.isSame(t,"day"))break;e.add(1,"day")}}}};const o=(0,r(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"picker"},[t("div",{staticClass:"rounded cursor-pointer bg-white shadow px-1 py-1 flex items-center text-gray-700",on:{click:function(t){e.visible=!e.visible}}},[t("i",{staticClass:"las la-clock text-2xl"}),e._v(" "),t("span",{staticClass:"mx-1 text-sm"},[t("span",[e._v(e._s(e.label||e.__("Date"))+" : ")]),e._v(" "),e.currentDay?t("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD")))]):e._e(),e._v(" "),null===e.currentDay?t("span",[e._v(e._s(e.__("N/A")))]):e._e()])]),e._v(" "),e.visible?t("div",{staticClass:"relative h-0 w-0 -mb-2"},[t("div",{staticClass:"w-72 mt-2 shadow rounded bg-white anim-duration-300 zoom-in-entrance flex flex-col"},[t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"p-2 flex items-center"},[t("div",[t("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(t){return e.subMonth()}}},[t("i",{staticClass:"las la-angle-left"})])]),e._v(" "),t("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[e._v(e._s(e.currentDay.format("MMM"))+" "+e._s(e.currentDay.format("YYYY")))]),e._v(" "),t("div",[t("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(t){return e.addMonth()}}},[t("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},[t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sun")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Mon")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Tue")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Wed")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Thr")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Fri")))]),e._v(" "),t("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sat")))])]),e._v(" "),e._l(e.calendar,(function(r,n){return t("div",{key:n,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},e._l(e.daysOfWeek,(function(n,s){return t("div",{key:s,staticClass:"h-8 flex justify-center items-center text-sm"},[e._l(r,(function(r,s){return[r.dayOfWeek===n?t("div",{key:s,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:r.date.format("DD")===e.currentDay.format("DD")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(t){return e.selectDate(r.date)}}},[e._v("\n                                "+e._s(r.date.format("DD"))+"\n                            ")]):e._e()]}))],2)})),0)}))],2),e._v(" "),t("div")])]):e._e()])}),[],!1,null,null,null).exports},9341:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n={name:"ns-notice",props:["color"],computed:{actualColor:function(){return this.color||"blue"}}};const s=(0,r(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-4",class:"bg-"+e.actualColor+"-100 border-l-4 border-"+e.actualColor+"-500 text-"+e.actualColor+"-700",attrs:{role:"alert"}},[t("p",{staticClass:"font-bold"},[e._t("title")],2),e._v(" "),t("p",[e._t("description")],2)])}),[],!1,null,null,null).exports},3571:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});function n(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const i={name:"ns-numpad",props:["value","currency","floating","limit"],data:function(){return{number:parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join("")),screenValue:0,order:null,cursor:parseInt(ns.currency.ns_currency_precision),orderSubscription:null,allSelected:!0,keys:[].concat(n([7,8,9].map((function(e){return{identifier:e,value:e}}))),n([4,5,6].map((function(e){return{identifier:e,value:e}}))),n([1,2,3].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){this.floating&&this.value>0?this.screenValue=parseFloat(this.value/this.number):this.screenValue=0},watch:{value:function(){this.value.toString().length>0&&(this.floating?this.screenValue=Math.round(this.value*this.number).toString():this.screenValue=this.value)}},methods:{increaseBy:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));this.screenValue=(parseFloat(e.value)*t+(parseFloat(this.screenValue)||0)).toString(),this.allSelected=!1},inputValue:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));if("next"!==e.identifier){if("backspace"===e.identifier)this.allSelected?(this.screenValue="0",this.allSelected=!1):this.screenValue=this.screenValue.toString().substr(0,this.screenValue.length-1);else if(e.value.toString().match(/^\d+$/)){if(this.limit>0&&this.screenValue.length>=this.limit)return;this.allSelected?(this.screenValue=e.value.toString(),this.allSelected=!1):(this.screenValue+=""+e.value.toString(),"percentage"===this.mode&&(this.screenValue=this.screenValue>100?100:this.screenValue))}"0"===this.screenValue&&(this.screenValue="");var r=this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/this.number):this.screenValue;this.$emit("changed",r)}else this.$emit("next",this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/t):this.screenValue)}}};const o=(0,r(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid grid-flow-row grid-cols-3 gap-2 grid-rows-3",staticStyle:{padding:"1px"},attrs:{id:"numpad"}},[e._l(e.keys,(function(r,n){return t("div",{key:n,staticClass:"select-none hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",staticStyle:{margin:"-1px"},on:{click:function(t){return e.inputValue(r)}}},[void 0!==r.value?t("span",[e._v(e._s(r.value))]):e._e(),e._v(" "),r.icon?t("i",{staticClass:"las",class:r.icon}):e._e()])})),e._v(" "),e._t("numpad-footer")],2)}),[],!1,null,null,null).exports},1156:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n={name:"ns-paginate",props:["pagination"],data:function(){return{page:1,path:""}},mounted:function(){this.path=this.pagination.path},computed:{getPagination:function(){return this.pagination?this.pageNumbers(this.pagination.last_page,this.pagination.current_page):[]}},methods:{gotoPage:function(e){this.page=e,this.$emit("load","".concat(this.path,"?page=").concat(this.page))},pageNumbers:function(e,t){var r=[];t-3>1&&r.push(1,"...");for(var n=1;n<=e;n++)t+3>n&&t-3<n&&r.push(n);return t+3<e&&r.push("...",e),console.log(r),r.filter((function(e){return e>0||"string"==typeof e}))}}};const s=(0,r(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex -mx-1",attrs:{id:"pagination"}},[e.pagination.current_page?[t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(e.pagination.first_page)}}},[t("i",{staticClass:"las la-angle-double-left"})]),e._v(" "),e._l(e.getPagination,(function(r,n){return["..."!==e.page?t("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full hover:bg-blue-400 hover:text-white",class:e.page==r?"bg-blue-400 text-white":"bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(r)}}},[e._v(e._s(r))]):e._e(),e._v(" "),"..."===e.page?t("a",{key:n,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"}},[e._v("...")]):e._e()]})),e._v(" "),t("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(e.pagination.last_page)}}},[t("i",{staticClass:"las la-angle-double-right"})])]:e._e()],2)}),[],!1,null,null,null).exports},9045:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(277),s=r(4503),i=r(9165);const o={name:"ns-media",props:["popup"],components:{VueUpload:r(2948)},data:function(){return{pages:[{label:(0,i.__)("Upload"),name:"upload",selected:!1},{label:(0,i.__)("Gallery"),name:"gallery",selected:!0}],resources:[],response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},queryPage:1,bulkSelect:!1,files:[]}},mounted:function(){this.popupCloser();var e=this.pages.filter((function(e){return"gallery"===e.name}))[0];this.select(e)},watch:{files:function(){this.files.filter((function(e){return"0.00"===e.progress})).length>0&&(this.$refs.upload.active=!0)}},computed:{postMedia:function(){return n.kq.applyFilters("http-client-url","/api/nexopos/v4/medias")},currentPage:function(){return this.pages.filter((function(e){return e.selected}))[0]},hasOneSelected:function(){return this.response.data.filter((function(e){return e.selected})).length>0},selectedResource:function(){return this.response.data.filter((function(e){return e.selected}))[0]},csrf:function(){return ns.authentication.csrf},isPopup:function(){return void 0!==this.$popup},user_id:function(){return this.isPopup&&this.$popupParams.user_id||0}},methods:{popupCloser:s.Z,__:i.__,cancelBulkSelect:function(){this.bulkSelect=!1,this.response.data.forEach((function(e){return e.selected=!1}))},deleteSelected:function(){var e=this;if(confirm("Delete selected resources ?"))return n.ih.post("/api/nexopos/v4/medias/bulk-delete",{ids:this.response.data.filter((function(e){return e.selected})).map((function(e){return e.id}))}).subscribe((function(t){n.kX.success(t.message).subscribe(),e.loadGallery()}),(function(e){n.kX.error(e.message).subscribe()}))},select:function(e){this.pages.forEach((function(e){return e.selected=!1})),e.selected=!0,"gallery"===e.name&&this.loadGallery()},loadGallery:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=null===t?this.queryPage:t,this.queryPage=t,n.ih.get("/api/nexopos/v4/medias?page=".concat(t,"&user_id=").concat(this.user_id)).subscribe((function(t){t.data.forEach((function(e){return e.selected=!1})),e.response=t}))},useSelectedEntries:function(){this.$popupParams.resolve({event:"use-selected",value:this.response.data.filter((function(e){return e.selected}))}),this.$popup.close()},selectResource:function(e){var t=this;this.bulkSelect||this.response.data.forEach((function(r,n){n!==t.response.data.indexOf(e)&&(r.selected=!1)})),e.selected=!e.selected}}};const a=(0,r(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex bg-white shadow-xl overflow-hidden",class:e.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full"},[t("div",{staticClass:"sidebar w-48 bg-gray-200 h-full flex-shrink-0"},[t("h3",{staticClass:"text-xl font-bold text-gray-800 my-4 text-center"},[e._v(e._s(e.__("Medias Manager")))]),e._v(" "),t("ul",e._l(e.pages,(function(r,n){return t("li",{key:n,staticClass:"hover:bg-white py-2 px-3 text-gray-700 border-l-8 cursor-pointer",class:r.selected?"bg-white border-blue-400":"border-transparent",on:{click:function(t){return e.select(r)}}},[e._v(e._s(r.label))])})),0)]),e._v(" "),"upload"===e.currentPage.name?t("div",{staticClass:"content w-full overflow-hidden flex"},[t("vue-upload",{ref:"upload",staticClass:"flex-auto flex bg-white shadow",attrs:{drop:!0,multiple:!0,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":e.csrf},accept:"image/*","post-action":e.postMedia},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[t("div",{staticClass:"border-dashed border-2 flex flex-auto m-2 p-2 flex-col border-blue-400 items-center justify-center"},[t("h3",{staticClass:"text-3xl font-bold text-gray-600 mb-4"},[e._v(e._s(e.__("Click Here Or Drop Your File To Upload")))]),e._v(" "),t("div",{staticClass:"rounded w-full md:w-2/3 text-gray-700 bg-gray-500 h-56 overflow-y-auto p-2"},[t("ul",e._l(e.files,(function(r,n){return t("li",{key:n,staticClass:"p-2 mb-2 shadow bg-white flex items-center justify-between rounded"},[t("span",[e._v(e._s(r.name))]),e._v(" "),t("span",{staticClass:"rounded bg-blue-400 flex items-center justify-center text-xs p-2"},[e._v(e._s(r.progress)+"%")])])})),0)])])])],1):e._e(),e._v(" "),"gallery"===e.currentPage.name?t("div",{staticClass:"content flex-col w-full overflow-hidden flex"},[e.popup?t("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[t("div"),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.popup.close()}}})],1)]):e._e(),e._v(" "),t("div",{staticClass:"flex flex-auto overflow-hidden"},[t("div",{staticClass:"bg-white shadow content flex flex-auto flex-col overflow-y-auto",attrs:{id:"grid"}},[t("div",{staticClass:"flex flex-auto"},[t("div",{staticClass:"p-2 overflow-x-auto"},[t("div",{staticClass:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-6"},e._l(e.response.data,(function(r,n){return t("div",{key:n},[t("div",{staticClass:"p-2"},[t("div",{staticClass:"rounded-lg w-32 h-32 bg-gray-500 m-2 overflow-hidden flex items-center justify-center",class:r.selected?"ring-4 ring-blue-500 ring-opacity-50":"",on:{click:function(t){return e.selectResource(r)}}},[t("img",{staticClass:"object-cover h-full",attrs:{src:r.sizes.thumb,alt:r.name}})])])])})),0)]),e._v(" "),0===e.response.data.length?t("div",{staticClass:"flex flex-auto items-center justify-center"},[t("h3",{staticClass:"text-2xl text-gray-600 font-bold"},[e._v(e._s(e.__("Nothing has already been uploaded")))])]):e._e()])]),e._v(" "),!e.bulkSelect&&e.hasOneSelected?t("div",{staticClass:"w-64 flex-shrink-0 bg-gray-200",attrs:{id:"preview"}},[t("div",{staticClass:"h-64 bg-gray-600 flex items-center justify-center"},[t("img",{attrs:{src:e.selectedResource.sizes.thumb,alt:e.selectedResource.name}})]),e._v(" "),t("div",{staticClass:"p-4 text-gray-700 text-sm",attrs:{id:"details"}},[t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("File Name"))+": ")]),t("span",[e._v(e._s(e.selectedResource.name))])]),e._v(" "),t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("Uploaded At"))+":")]),t("span",[e._v(e._s(e.selectedResource.created_at))])]),e._v(" "),t("p",{staticClass:"flex flex-col mb-2"},[t("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("By"))+" :")]),t("span",[e._v(e._s(e.selectedResource.user.username))])])])]):e._e()]),e._v(" "),t("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[t("div",{staticClass:"flex -mx-2 flex-shrink-0"},[t("div",{staticClass:"px-2 flex-shrink-0 flex"},[t("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[e.bulkSelect?t("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){return e.cancelBulkSelect()}}},[t("i",{staticClass:"las la-times"})]):e._e(),e._v(" "),e.hasOneSelected&&!e.bulkSelect?t("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){e.bulkSelect=!0}}},[t("i",{staticClass:"las la-check-circle"})]):e._e(),e._v(" "),e.hasOneSelected?t("button",{staticClass:"bg-red-400 text-white hover:bg-red-500 hover:text-white py-2 px-3",on:{click:function(t){return e.deleteSelected()}}},[t("i",{staticClass:"las la-trash"})]):e._e()])])]),e._v(" "),t("div",{staticClass:"flex-shrink-0 -mx-2 flex"},[t("div",{staticClass:"px-2"},[t("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[t("button",{staticClass:"p-2",class:1===e.response.current_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:1===e.response.current_page},on:{click:function(t){return e.loadGallery(e.response.current_page-1)}}},[e._v(e._s(e.__("Previous")))]),e._v(" "),t("hr",{staticClass:"border-r border-gray-700"}),e._v(" "),t("button",{staticClass:"p-2",class:e.response.current_page===e.response.last_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:e.response.current_page===e.response.last_page},on:{click:function(t){return e.loadGallery(e.response.current_page+1)}}},[e._v(e._s(e.__("Next")))])])]),e._v(" "),e.popup&&e.hasOneSelected?t("div",{staticClass:"px-2"},[t("button",{staticClass:"rounded shadow p-2 bg-blue-400 text-white text-sm",on:{click:function(t){return e.useSelectedEntries()}}},[e._v(e._s(e.__("Use Selected")))])]):e._e()])])]):e._e()])}),[],!1,null,null,null).exports},8454:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Te});var n=r(2285),s=r(4914),i=r(9165);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const l={name:"ns-pos-discount-popup",data:function(){return{finalValue:1,virtualStock:null,popupSubscription:null,mode:"",type:"",allSelected:!0,isLoading:!1,keys:[].concat(o([7,8,9].map((function(e){return{identifier:e,value:e}}))),o([4,5,6].map((function(e){return{identifier:e,value:e}}))),o([1,2,3].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){var e=this;this.mode=this.$popupParams.reference.discount_type||"percentage",this.type=this.$popupParams.type,"percentage"===this.mode?this.finalValue=this.$popupParams.reference.discount_percentage||1:this.finalValue=this.$popupParams.reference.discount||1,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.$popup.close()}))},methods:{__:i.__,setPercentageType:function(e){this.mode=e},inputValue:function(e){"next"===e.identifier?(this.$popupParams.onSubmit({discount_type:this.mode,discount_percentage:"percentage"===this.mode?this.finalValue:void 0,discount:"flat"===this.mode?this.finalValue:void 0}),this.$popup.close()):"backspace"===e.identifier?this.allSelected?(this.finalValue=0,this.allSelected=!1):(this.finalValue=this.finalValue.toString(),this.finalValue=this.finalValue.substr(0,this.finalValue.length-1)||0):this.allSelected?(this.finalValue=e.value,this.finalValue=parseFloat(this.finalValue),this.allSelected=!1):(this.finalValue+=""+e.value,this.finalValue=parseFloat(this.finalValue),"percentage"===this.mode&&(this.finalValue=this.finalValue>100?100:this.finalValue))}}};var c=r(1900);const u=(0,c.Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow min-h-2/5-screen w-6/7-screen md:w-3/5-screen lg:w-3/5-screen xl:w-2/5-screen relative",attrs:{id:"discount-popup"}},[t("div",{staticClass:"flex-shrink-0 py-2 border-b border-gray-200"},["product"===e.type?t("h1",{staticClass:"text-xl font-bold text-gray-700 text-center"},[e._v(e._s(e.__("Product Discount")))]):e._e(),e._v(" "),"cart"===e.type?t("h1",{staticClass:"text-xl font-bold text-gray-700 text-center"},[e._v(e._s(e.__("Cart Discount")))]):e._e()]),e._v(" "),t("div",{staticClass:"h-16 bg-gray-800 text-white border-gray-200 flex items-center justify-center",attrs:{id:"screen"}},[t("h1",{staticClass:"font-bold text-3xl"},["flat"===e.mode?t("span",[e._v(e._s(e._f("currency")(e.finalValue)))]):e._e(),e._v(" "),"percentage"===e.mode?t("span",[e._v(e._s(e.finalValue)+"%")]):e._e()])]),e._v(" "),t("div",{staticClass:"flex",attrs:{id:"switch-mode"}},[t("button",{staticClass:"outline-none w-1/2 py-2 flex items-center justify-center",class:"flat"===e.mode?"bg-gray-800 text-white":"",on:{click:function(t){return e.setPercentageType("flat")}}},[e._v(e._s(e.__("Flat")))]),e._v(" "),t("hr",{staticClass:"border-r border-gray-200"}),e._v(" "),t("button",{staticClass:"outline-none w-1/2 py-2 flex items-center justify-center",class:"percentage"===e.mode?"bg-gray-800 text-white":"",on:{click:function(t){return e.setPercentageType("percentage")}}},[e._v(e._s(e.__("Percentage")))])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-3",attrs:{id:"numpad"}},e._l(e.keys,(function(r,n){return t("div",{key:n,staticClass:"hover:bg-blue-400 hover:text-white hover:border-blue-600 text-xl font-bold border border-gray-200 h-24 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.inputValue(r)}}},[void 0!==r.value?t("span",[e._v(e._s(r.value))]):e._e(),e._v(" "),r.icon?t("i",{staticClass:"las",class:r.icon}):e._e()])})),0)])}),[],!1,null,null,null).exports;var d=r(7995);function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const h={name:"sample-payment",props:["label","identifier"],data:function(){return{backValue:"0",number:parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join("")),order:null,cursor:parseInt(ns.currency.ns_currency_precision),orderSubscription:null,allSelected:!0,keys:[].concat(f([7,8,9].map((function(e){return{identifier:e,value:e}}))),f([4,5,6].map((function(e){return{identifier:e,value:e}}))),f([1,2,3].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){var e=this;this.orderSubscription=POS.order.subscribe((function(t){e.order=t}))},destroyed:function(){this.orderSubscription.unsubscribe()},methods:{__:i.__,toggleDiscount:function(){var e=this;n.G.show(u,{reference:this.order,type:"cart",onSubmit:function(t){POS.updateCart(e.order,t)}})},makeFullPayment:function(){var e=this;n.G.show(d.Z,{title:(0,i.__)("Confirm Full Payment"),message:(0,i.__)("A full payment will be made using {paymentType} for {total}").replace("{paymentType}",this.label).replace("{total}",this.$options.filters.currency(this.order.total)),onAction:function(t){if(t){var r=POS.order.getValue();r.tendered<r.total&&POS.addPayment({value:e.order.total-r.tendered,identifier:e.identifier,selected:!1,label:e.label,readonly:!1}),e.$emit("submit"),e.backValue="0"}}})},increaseBy:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));this.backValue=(parseFloat(e.value)*t+(parseFloat(this.backValue)||0)).toString(),this.allSelected=!1},inputValue:function(e){parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));"next"===e.identifier?(POS.addPayment({value:parseFloat(this.backValue/this.number),identifier:this.identifier,selected:!1,label:this.label,readonly:!1}),this.backValue="0"):"backspace"===e.identifier?this.allSelected?(this.backValue="0",this.allSelected=!1):this.backValue=this.backValue.substr(1):e.value.toString().match(/^\d+$/)&&(this.allSelected?(this.backValue=e.value.toString(),this.allSelected=!1):(this.backValue+=e.value.toString(),"percentage"===this.mode&&(this.backValue=this.backValue>100?100:this.backValue))),"0"===this.backValue&&(this.backValue="")}}};const v=(0,c.Z)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-full w-full py-2"},[e.order?t("div",{staticClass:"px-2 pb-2"},[t("div",{staticClass:"grid grid-cols-2 gap-2"},[t("div",{staticClass:"h-16 flex justify-between items-center bg-blue-400 text-white text-xl md:text-3xl p-2",attrs:{id:"details"}},[t("span",[e._v(e._s(e.__("Total"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.total)))])]),e._v(" "),t("div",{staticClass:"cursor-pointer h-16 flex justify-between items-center bg-red-400 text-white text-xl md:text-3xl p-2",attrs:{id:"discount"},on:{click:function(t){return e.toggleDiscount()}}},[t("span",[e._v(e._s(e.__("Discount"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.discount)))])]),e._v(" "),t("div",{staticClass:"h-16 flex justify-between items-center bg-green-400 text-white text-xl md:text-3xl p-2",attrs:{id:"paid"}},[t("span",[e._v(e._s(e.__("Paid"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.tendered)))])]),e._v(" "),t("div",{staticClass:"h-16 flex justify-between items-center bg-teal-400 text-white text-xl md:text-3xl p-2",attrs:{id:"change"}},[t("span",[e._v(e._s(e.__("Change"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.change)))])]),e._v(" "),t("div",{staticClass:"col-span-2 h-16 flex justify-between items-center bg-gray-300 text-gray-800 text-xl md:text-3xl p-2",attrs:{id:"change"}},[t("span",[e._v(e._s(e.__("Screen"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.backValue/e.number)))])])])]):e._e(),e._v(" "),t("div",{staticClass:"px-2 pb-2"},[t("div",{staticClass:"-mx-2 flex flex-wrap"},[t("div",{staticClass:"pl-2 pr-1 flex-auto"},[t("div",{staticClass:"grid grid-flow-row grid-cols-3 gap-2 grid-rows-3",staticStyle:{padding:"1px"},attrs:{id:"numpad"}},[e._l(e.keys,(function(r,n){return t("div",{key:n,staticClass:"hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",staticStyle:{margin:"-1px"},on:{click:function(t){return e.inputValue(r)}}},[void 0!==r.value?t("span",[e._v(e._s(r.value))]):e._e(),e._v(" "),r.icon?t("i",{staticClass:"las",class:r.icon}):e._e()])})),e._v(" "),t("div",{staticClass:"hover:bg-green-500 col-span-3 bg-green-400 text-2xl text-white border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.makeFullPayment()}}},[e._v("\n                        "+e._s(e.__("Full Payment")))])],2)]),e._v(" "),t("div",{staticClass:"w-1/2 md:w-72 pr-2 pl-1"},[t("div",{staticClass:"grid grid-flow-row grid-rows-1 gap-2"},[t("div",{staticClass:"hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.increaseBy({value:100})}}},[t("span",[e._v(e._s(e._f("currency")(100)))])]),e._v(" "),t("div",{staticClass:"hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.increaseBy({value:500})}}},[t("span",[e._v(e._s(e._f("currency")(500)))])]),e._v(" "),t("div",{staticClass:"hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.increaseBy({value:1e3})}}},[t("span",[e._v(e._s(e._f("currency")(1e3)))])])])])])])])}),[],!1,null,null,null).exports,b={name:"cash-payment",props:["identifier","label"],components:{samplePayment:v}};const m=(0,c.Z)(b,(function(){var e=this;return(0,e._self._c)("sample-payment",{attrs:{identifier:e.identifier,label:e.label},on:{submit:function(t){return e.$emit("submit")}}})}),[],!1,null,null,null).exports;const g={name:"creditcart-payment",props:["identifier"]};const y=(0,c.Z)(g,(function(){return(0,this._self._c)("h1",[this._v("Credit Card")])}),[],!1,null,null,null).exports;const _={name:"bank-payment",props:["identifier","label"],components:{samplePayment:v}};const x=(0,c.Z)(_,(function(){var e=this;return(0,e._self._c)("sample-payment",{attrs:{identifier:e.identifier,label:e.label},on:{submit:function(t){return e.$emit("submit")}}})}),[],!1,null,null,null).exports;var w=r(3571),C=r(277);const k={name:"ns-account-payment",components:{nsNumpad:w.Z},props:["identifier","label"],data:function(){return{subscription:null,screenValue:0,order:null}},methods:{__:i.__,handleChange:function(e){this.screenValue=e},proceedAddingPayment:function(e){var t=parseFloat(e),r=this.order.payments;return t<=0?C.kX.error((0,i.__)("Please provide a valid payment amount.")).subscribe():r.filter((function(e){return"account-payment"===e.identifier})).length>0?C.kX.error((0,i.__)("The customer account can only be used once per order. Consider deleting the previously used payment.")).subscribe():t>this.order.customer.account_amount?C.kX.error((0,i.__)("Not enough funds to add {amount} as a payment. Available balance {balance}.").replace("{amount}",this.$options.filters.currency(t)).replace("{balance}",this.$options.filters.currency(this.order.customer.account_amount))).subscribe():(POS.addPayment({value:t,identifier:"account-payment",selected:!1,label:this.label,readonly:!1}),this.order.customer.account_amount-=t,POS.selectCustomer(this.order.customer),void this.$emit("submit"))},proceedFullPayment:function(){this.proceedAddingPayment(this.order.total)},makeFullPayment:function(){var e=this;Popup.show(d.Z,{title:(0,i.__)("Confirm Full Payment"),message:(0,i.__)("You're about to use {amount} from the customer account to make a payment. Would you like to proceed ?").replace("{amount}",this.$options.filters.currency(this.order.total)),onAction:function(t){t&&e.proceedFullPayment()}})}},mounted:function(){var e=this;this.subscription=POS.order.subscribe((function(t){return e.order=t}))},destroyed:function(){this.subscription.unsubscribe()}};const S=(0,c.Z)(k,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-full w-full py-2"},[e.order?t("div",{staticClass:"px-2 pb-2"},[t("div",{staticClass:"grid grid-cols-2 gap-2"},[t("div",{staticClass:"h-16 flex justify-between items-center bg-blue-400 text-white text-xl md:text-3xl p-2",attrs:{id:"details"}},[t("span",[e._v(e._s(e.__("Total"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.total)))])]),e._v(" "),t("div",{staticClass:"cursor-pointer h-16 flex justify-between items-center bg-red-400 text-white text-xl md:text-3xl p-2",attrs:{id:"discount"},on:{click:function(t){return e.toggleDiscount()}}},[t("span",[e._v(e._s(e.__("Discount"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.discount)))])]),e._v(" "),t("div",{staticClass:"h-16 flex justify-between items-center bg-green-400 text-white text-xl md:text-3xl p-2",attrs:{id:"paid"}},[t("span",[e._v(e._s(e.__("Paid"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.tendered)))])]),e._v(" "),t("div",{staticClass:"h-16 flex justify-between items-center bg-teal-400 text-white text-xl md:text-3xl p-2",attrs:{id:"change"}},[t("span",[e._v(e._s(e.__("Change"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.change)))])]),e._v(" "),t("div",{staticClass:"col-span-2 h-16 flex justify-between items-center bg-blue-400 text-white text-xl md:text-3xl p-2",attrs:{id:"change"}},[t("span",[e._v(e._s(e.__("Current Balance"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.customer.account_amount)))])]),e._v(" "),t("div",{staticClass:"col-span-2 h-16 flex justify-between items-center bg-gray-300 text-gray-800 text-xl md:text-3xl p-2",attrs:{id:"change"}},[t("span",[e._v(e._s(e.__("Screen"))+" : ")]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.screenValue)))])])])]):e._e(),e._v(" "),t("div",{staticClass:"px-2 pb-2"},[t("div",{staticClass:"-mx-2 flex flex-wrap"},[t("div",{staticClass:"pl-2 pr-1 flex-auto"},[t("ns-numpad",{attrs:{floating:!0},on:{changed:function(t){return e.handleChange(t)},next:function(t){return e.proceedAddingPayment(t)}},scopedSlots:e._u([{key:"numpad-footer",fn:function(){return[t("div",{staticClass:"hover:bg-green-500 col-span-3 bg-green-400 text-2xl text-white border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.makeFullPayment()}}},[e._v("\n                        "+e._s(e.__("Full Payment")))])]},proxy:!0}])})],1),e._v(" "),t("div",{staticClass:"w-1/2 md:w-72 pr-2 pl-1"},[t("div",{staticClass:"grid grid-flow-row grid-rows-1 gap-2"},[t("div",{staticClass:"hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.increaseBy({value:100})}}},[t("span",[e._v(e._s(e._f("currency")(100)))])]),e._v(" "),t("div",{staticClass:"hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.increaseBy({value:500})}}},[t("span",[e._v(e._s(e._f("currency")(500)))])]),e._v(" "),t("div",{staticClass:"hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.increaseBy({value:1e3})}}},[t("span",[e._v(e._s(e._f("currency")(1e3)))])])])])])])])}),[],!1,null,null,null).exports;var j=r(8674);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){var n;return n=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==P(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $={name:"ns-pos-payment",data:function(){return{paymentTypesSubscription:null,paymentsType:[],order:null,showPayment:!1,orderSubscription:null,currentPaymentComponent:null}},computed:{activePayment:function(){var e;return(e=this.paymentsType.filter((function(e){return e.selected}))).length>0&&e[0]},expectedPayment:function(){var e=this.order.customer.group.minimal_credit_payment;return this.order.total*e/100}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){if("click-overlay"===t.event)e.closePopup()})),this.order=this.$popupParams.order,this.paymentTypesSubscription=POS.paymentsType.subscribe((function(t){e.paymentsType=t,t.filter((function(e){e.selected&&POS.selectedPaymentType.next(e)}))}))},watch:{activePayment:function(e){this.loadPaymentComponent(e)}},destroyed:function(){this.paymentTypesSubscription.unsubscribe()},methods:{__:i.__,resolveIfQueued:s.Z,loadPaymentComponent:function(e){switch(e.identifier){case"cash-payment":this.currentPaymentComponent=m;break;case"creditcard-payment":this.currentPaymentComponent=y;break;case"bank-payment":this.currentPaymentComponent=x;break;case"account-payment":this.currentPaymentComponent=S;break;default:this.currentPaymentComponent=v}},select:function(e){this.showPayment=!1,POS.setPaymentActive(e)},closePopup:function(){this.$popup.close(),POS.selectedPaymentType.next(null)},deletePayment:function(e){POS.removePayment(e)},selectPaymentAsActive:function(e){this.select(this.paymentsType.filter((function(t){return t.identifier===e.target.value}))[0])},submitOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.G.show(j.Z);try{var s=T(T({},POS.order.getValue()),t);POS.submitOrder(s).then((function(t){r.close(),C.kX.success(t.message).subscribe(),POS.printOrderReceipt(t.data.order),e.$popup.close()}),(function(e){r.close(),C.kX.error(e.message).subscribe()}))}catch(e){r.close(),C.kX.error(error.message).subscribe()}}}};const F=(0,c.Z)($,(function(){var e=this,t=e._self._c;return e.order?t("div",{staticClass:"w-screen h-screen p-4 flex overflow-hidden"},[t("div",{staticClass:"flex flex-col flex-auto lg:flex-row bg-white shadow-xl"},[t("div",{staticClass:"w-full lg:w-56 bg-gray-300 lg:h-full flex justify-between px-2 lg:px-0 lg:block items-center lg:items-start"},[t("h3",{staticClass:"text-xl text-center my-4 font-bold lg:my-8 text-gray-700"},[e._v(e._s(e.__("Payments Gateway")))]),e._v(" "),t("ul",{staticClass:"hidden lg:block"},[e._l(e.paymentsType,(function(r){return t("li",{key:r.identifier,staticClass:"cursor-pointer hover:bg-gray-400 py-2 px-3",class:r.selected&&!e.showPayment?"bg-white text-gray-800":"text-gray-700",on:{click:function(t){return e.select(r)}}},[e._v(e._s(r.label))])})),e._v(" "),t("li",{staticClass:"cursor-pointer text-gray-700 hover:bg-gray-400 py-2 px-3 border-t border-gray-400 mt-4 flex items-center justify-between",class:e.showPayment?"bg-white text-gray-800":"text-gray-700",on:{click:function(t){e.showPayment=!0}}},[t("span",[e._v(e._s(e.__("Payment List")))]),e._v(" "),t("span",{staticClass:"px-2 rounded-full h-8 w-8 flex items-center justify-center bg-green-500 text-white"},[e._v(e._s(e.order.payments.length))])])],2),e._v(" "),t("ns-close-button",{staticClass:"lg:hidden",on:{click:function(t){return e.closePopup()}}})],1),e._v(" "),t("div",{staticClass:"overflow-hidden flex flex-col flex-auto"},[t("div",{staticClass:"flex flex-col flex-auto overflow-hidden"},[t("div",{staticClass:"h-12 bg-gray-300 hidden items-center justify-between lg:flex"},[t("div"),e._v(" "),t("div",{staticClass:"px-2"},[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),e.showPayment?e._e():t("div",{staticClass:"flex flex-auto overflow-y-auto"},[t(e.currentPaymentComponent,{tag:"component",attrs:{label:e.activePayment.label,identifier:e.activePayment.identifier},on:{submit:function(t){return e.submitOrder()}}})],1),e._v(" "),e.showPayment?t("div",{staticClass:"flex flex-auto overflow-y-auto p-2 flex-col"},[t("h3",{staticClass:"text-center font-bold py-2 text-gray-700"},[e._v(e._s(e.__("List Of Payments")))]),e._v(" "),t("ul",{staticClass:"flex-auto"},[0===e.order.payments.length?t("li",{staticClass:"p-2 bg-gray-200 flex justify-center mb-2 items-center"},[t("h3",{staticClass:"font-semibold"},[e._v(e._s(e.__("No Payment added.")))])]):e._e(),e._v(" "),e._l(e.order.payments,(function(r,n){return t("li",{key:n,staticClass:"p-2 bg-gray-200 flex justify-between mb-2 items-center"},[t("span",[e._v(e._s(r.label))]),e._v(" "),t("div",{staticClass:"flex items-center"},[t("span",[e._v(e._s(e._f("currency")(r.value)))]),e._v(" "),t("button",{staticClass:"rounded-full bg-red-400 h-8 w-8 flex items-center justify-center text-white ml-2",on:{click:function(t){return e.deletePayment(r)}}},[t("i",{staticClass:"las la-trash-alt"})])])])}))],2)]):e._e()]),e._v(" "),t("div",{staticClass:"flex flex-col lg:flex-row w-full bg-gray-300 justify-between p-2"},[t("div",{staticClass:"flex mb-1"},[t("div",{staticClass:"flex items-center lg:hidden"},[t("h3",{staticClass:"font-semibold mr-2"},[e._v(e._s(e.__("Select Payment")))]),e._v(" "),t("select",{staticClass:"p-2 rounded border-2 border-blue-400 bg-white shadow",on:{change:function(t){return e.selectPaymentAsActive(t)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.__("Choose Payment")))]),e._v(" "),e._l(e.paymentsType,(function(r){return t("option",{key:r.identifier,domProps:{selected:e.activePayment.identifier===r.identifier,value:r.identifier},on:{click:function(t){return e.select(r)}}},[e._v(e._s(r.label))])}))],2)])]),e._v(" "),t("div",{staticClass:"flex justify-end"},[e.order.tendered>=e.order.total?t("ns-button",{attrs:{type:e.order.tendered>=e.order.total?"success":"info"},on:{click:function(t){return e.submitOrder()}}},[t("span",[t("i",{staticClass:"las la-cash-register"}),e._v(" "+e._s(e.__("Submit Payment")))])]):e._e(),e._v(" "),e.order.tendered<e.order.total?t("ns-button",{attrs:{type:e.order.tendered>=e.order.total?"success":"info"},on:{click:function(t){return e.submitOrder({payment_status:"unpaid"})}}},[t("span",[t("i",{staticClass:"las la-bookmark"}),e._v(" "+e._s(e.__("Layaway"))+"  "+e._s(e._f("currency")(e.expectedPayment)))])]):e._e()],1)])])])]):e._e()}),[],!1,null,null,null).exports;r(1836);var L=r(3612),D=r(8997),V=r(7366);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z(n.key),n)}}function Z(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:String(t)}var q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.order=t}var t,r,n;return t=e,(r=[{key:"run",value:function(){var e=this;return new Promise((function(t,r){return 0===e.order.products.length?(C.kX.error((0,i.__)("You need to provide some products before proceeding.")).subscribe(),r(!1)):t(!0)}))}}])&&N(t.prototype,r),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:String(t)}window.ProductsQueue=q;var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.order=t}var t,r,s;return t=e,(r=[{key:"run",value:function(){var e=this;return new Promise((function(t,r){return void 0===e.order.customer?n.G.show(V.Z,{resolve:t,reject:r}):t(!0)}))}}])&&G(t.prototype,r),s&&G(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function H(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:String(t)}window.CustomerQueue=M;var X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.order=t}var t,r,s;return t=e,(r=[{key:"run",value:function(){var e=this;return new Promise((function(t,r){n.G.show(F,{resolve:t,reject:r,order:e.order})}))}}])&&z(t.prototype,r),s&&z(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}function B(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:String(t)}window.PaymentQueue=X;var Q=r(8997).Z,K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.order=t}var t,r,s;return t=e,(r=[{key:"run",value:function(){var e=this;return new Promise((function(t,r){if(void 0===e.order.type)return n.G.show(Q,{resolve:t,reject:r});t(!0)}))}}])&&U(t.prototype,r),s&&U(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.TypeQueue=K;var J=r(2767),ee=r(1294),te=r(4503);const re={name:"ns-pos-hold-orders",data:function(){return{order:{},title:"",show:!0}},mounted:function(){this.popupCloser(),this.show=POS.getHoldPopupEnabled(),this.show||this.$popupParams.resolve({title:this.title}),this.$refs.reference.focus(),this.$refs.reference.select(),this.order=this.$popupParams.order,this.title=this.$popupParams.order.title||""},methods:{__:i.__,popupCloser:te.Z,submitHold:function(){this.$popup.close(),this.$popupParams.resolve({title:this.title})}}};const ne=(0,c.Z)(re,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow-lg w-6/7-screen md:w-3/7-screen lg:w-2/6-screen"},[t("div",{staticClass:"p-2 flex justify-between border-b items-center"},[t("h3",{staticClass:"font-semibold"},[e._v(e._s(e.__("Hold Order")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.$popup.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto"},[t("div",{staticClass:"border-b h-16 flex items-center justify-center"},[t("span",{staticClass:"text-5xl text-gray-700"},[e._v(e._s(e._f("currency")(e.order.total)))])]),e._v(" "),t("div",{staticClass:"p-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],ref:"reference",staticClass:"rounded border-2 border-blue-400 bg-white p-2 w-full",attrs:{type:"text",placeholder:"Order Reference"},domProps:{value:e.title},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitHold()},input:function(t){t.target.composing||(e.title=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"p-2"},[t("p",{staticClass:"text-gray-600"},[e._v("\n                "+e._s(e.__("The current order will be set on hold. You can retreive this order from the pending order button. Providing a reference to it might help you to identify the order more quickly."))+"\n            ")])])]),e._v(" "),t("div",{staticClass:"flex"},[t("div",{staticClass:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-green-500 text-white font-semibold",on:{click:function(t){return e.submitHold()}}},[e._v("\n            "+e._s(e.__("Confirm"))+"\n        ")]),e._v(" "),t("div",{staticClass:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-red-500 text-white font-semibold",on:{click:function(t){return e.$popup.close()}}},[e._v("\n            "+e._s(e.__("Cancel"))+"\n        ")])])])}),[],!1,null,null,null).exports;var se=r(40);const ie={name:"ns-pos-note-popup",data:function(){return{validation:new se.Z,fields:[{label:(0,i.__)("Note"),name:"note",value:"",description:(0,i.__)("More details about this order"),type:"textarea"},{label:(0,i.__)("Display On Receipt"),name:"note_visibility",value:"",options:[{label:(0,i.__)("Yes"),value:"visible"},{label:(0,i.__)("No"),value:"hidden"}],description:(0,i.__)("Will display the note on the receipt"),type:"switch"}]}},mounted:function(){var e=this;this.popupCloser(),this.fields.forEach((function(t){"note"===t.name?t.value=e.$popupParams.note:"note_visibility"===t.name&&(t.value=e.$popupParams.note_visibility)}))},methods:{__:i.__,popupResolver:s.Z,popupCloser:te.Z,closePopup:function(){this.popupResolver(!1)},saveNote:function(){if(!this.validation.validateFields(this.fields)){var e=this.validation.validateFieldsErrors(this.fields);return this.validation.triggerFieldsErrors(this.fields,e),this.$forceUpdate(),console.log(this.fields),C.kX.error((0,i.__)("Unable to proceed the form is not valid.")).subscribe()}return this.popupResolver(this.validation.extractFields(this.fields))}}};const oe=(0,c.Z)(ie,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg bg-white w-95vw md:w-3/5-screen lg:w-2/5-screen"},[t("div",{staticClass:"p-2 flex justify-between items-center border-b border-gray-200"},[t("h3",{staticClass:"font-bold"},[e._v(e._s(e.__("Order Note")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 border-b border-gray-200"},e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),1),e._v(" "),t("div",{staticClass:"p-2 flex justify-end"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.saveNote()}}},[e._v("Save")])],1)])}),[],!1,null,null,null).exports;const ae={name:"ns-pos-tax-popup",data:function(){return{validation:new se.Z,tax_group:[],order:null,orderSubscriber:null,optionsSubscriber:null,options:{},tax_groups:[],activeTab:"",group_fields:[{label:(0,i.__)("Select Tax"),name:"tax_group_id",description:(0,i.__)("Define the tax that apply to the sale."),type:"select",disabled:!0,value:"",options:[]},{label:(0,i.__)("Type"),name:"tax_type",disabled:!0,value:"",description:(0,i.__)("Define how the tax is computed"),type:"select",options:[{label:(0,i.__)("Exclusive"),value:"exclusive"},{label:(0,i.__)("Inclusive"),value:"inclusive"}]}]}},mounted:function(){var e=this;this.loadGroups(),this.popupCloser(),this.activeTab=this.$popupParams.activeTab||"settings",this.group_fields.forEach((function(t){t.value=e.$popupParams[t.name]||void 0})),this.orderSubscriber=POS.order.subscribe((function(t){e.order=t})),this.optionsSubscriber=POS.options.subscribe((function(t){e.options=t,["variable_vat","products_variable_vat"].includes(e.options.ns_pos_vat)&&e.group_fields.forEach((function(e){return e.disabled=!1}))}))},destroyed:function(){this.orderSubscriber.unsubscribe(),this.optionsSubscriber.unsubscribe()},methods:{__:i.__,popupCloser:te.Z,popupResolver:s.Z,changeActive:function(e){this.activeTab=e},closePopup:function(){this.popupResolver(!1)},saveTax:function(){var e=this.validation.extractFields(this.group_fields);this.popupResolver(e)},loadGroups:function(){var e=this;C.ih.get("/api/nexopos/v4/taxes/groups").subscribe((function(t){e.groups=t,e.group_fields.forEach((function(t){"tax_group_id"===t.name&&(t.options=e.groups.map((function(e){return{label:e.name,value:e.id}})))}))}))}}};const le=(0,c.Z)(ae,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow-lg w-95vw md:w-3/5-screen lg:w-2/5-screen"},[t("div",{staticClass:"p-2 flex justify-between items-center border-b border-gray-200"},[t("h3",{staticClass:"text-blog"},[e._v(e._s(e.__("Tax & Summary")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 bg-gray-50"},[t("ns-tabs",{attrs:{active:e.activeTab},on:{changeTab:function(t){return e.changeActive(t)}}},[t("ns-tabs-item",{attrs:{padding:"0",label:e.__("Settings"),identifier:"settings",active:!0}},[t("div",{staticClass:"p-2 border-b border-gray-200"},e._l(e.group_fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),1),e._v(" "),t("div",{staticClass:"flex justify-end p-2"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.saveTax()}}},[e._v("Save")])],1)]),e._v(" "),t("ns-tabs-item",{attrs:{padding:"0",label:e.__("Summary"),identifier:"summary",active:!1}},[e.order?t("div",{staticClass:"p-2"},[e._l(e.order.taxes,(function(r){return t("div",{key:r.id,staticClass:"border-blue-200 mb-2 border bg-blue-100 shadow p-2 w-full flex justify-between items-center text-gray-700"},[t("span",[e._v(e._s(r.tax_name))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(r.tax_value)))])])})),e._v(" "),0===e.order.taxes.length?t("div",{staticClass:"p-2 text-center text-gray-600"},[e._v("No tax is active")]):e._e()],2):e._e()])],1)],1)])}),[],!1,null,null,null).exports;const ce={name:"ns-pos-coupons-popup",data:function(){return{orderSubscriber:null,hasLoaded:!1,order:null,coupons:[]}},mounted:function(){var e=this;this.popupCloser(),this.orderSubscriber=POS.order.subscribe((function(t){e.order=t})),this.loadCoupons()},destroyed:function(){this.orderSubscriber.unsubscribe()},methods:{__:i.__,popupCloser:te.Z,popupResolver:s.Z,closePopup:function(){this.popupResolver(!1)},loadCoupons:function(){var e=this;this.hasLoaded=!1,nsHttpClient.get("/api/nexopos/v4/customers/".concat(this.order.customer_id,"/coupons")).subscribe((function(t){e.hasLoaded=!0,e.coupons=t}))}}};(0,c.Z)(ce,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg bg-white w-95vw md:w-3/5-screen lg:w-2/5-screen"},[t("div",{staticClass:"border-b border-gray-200 p-2 flex justify-between items-center"},[t("h3",{staticClass:"font-bold"},[e._v(e._s(e.__("Coupons")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2"},[e.hasLoaded?e._e():t("div",{staticClass:"p-4"},[t("ns-spinner")],1),e._v(" "),e.hasLoaded?t("ul",[e._l(e.coupons,(function(r){return t("li",{key:r.id,staticClass:"p-2 cursor-pointer flex justify-between bg-gray-100 hover:bg-blue-200"},[t("span",[e._v(e._s(r.name))]),e._v(" "),t("span",[t("button",{staticClass:"rounded-full px-3 py-1"},[e._v(e._s(e.__("Use")))])])])})),e._v(" "),0===e.coupons.length&&e.hasLoaded?t("li",{staticClass:"py-3 text-center"},[e._v(e._s(e.__("No coupon available for this customer")))]):e._e()],2):e._e()])])}),[],!1,null,null,null).exports;var ue=r(5140);const de={name:"ns-pos-order-settings",mounted:function(){var e=this;nsHttpClient.get("/api/nexopos/v4/fields/ns.pos-order-settings").subscribe((function(t){t.forEach((function(t){t.value=e.$popupParams.order[t.name]||""})),e.fields=e.validation.createFields(t)}),(function(e){})),this.popupCloser()},data:function(){return{fields:[],validation:new se.Z}},methods:{__,popupCloser,popupResolver,closePopup:function(){this.popupResolver(!1)},saveSettings:function(){var e=this.validation.extractFields(this.fields);this.popupResolver(e)}}};const fe=(0,c.Z)(de,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg flex flex-col bg-white w-95vw h-95vh md:w-3/5-screen md:h-3/5-screen lg:w-2/5-screen"},[t("div",{staticClass:"p-2 border-b items-center flex justify-between"},[t("h3",{staticClass:"text-semibold"},[e._v(e._s(e.__("Order Settings")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 flex-auto bg-gray-100 overflow-y-auto"},e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),1),e._v(" "),t("div",{staticClass:"p-2 flex justify-end"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.saveSettings()}}},[e._v(e._s(e.__("Save")))])],1)])}),[],!1,null,null,null).exports;const pe={name:"ns-pos-product-price-product",components:{nsNumpad:w.Z},computed:{},data:function(){return{product:{}}},mounted:function(){this.popupCloser(),this.product=this.$popupParams.product},methods:{popupResolver,popupCloser,__,updateProductPrice:function(e){this.product.unit_price=e},resolveProductPrice:function(e){this.popupResolver(this.product.unit_price)}}};const he=(0,c.Z)(pe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow-lg w-95vw md:w-3/5-screen lg:w-2/5-screen"},[t("div",{staticClass:"popup-heading"},[t("h3",[e._v(e._s(e.__("Product Price")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.popupResolver(!1)}}})],1)]),e._v(" "),t("div",{staticClass:"flex flex-col"},[t("div",{staticClass:"h-16 flex items-center justify-center bg-gray-800 text-white font-bold"},[t("h2",{staticClass:"text-2xl"},[e._v(e._s(e._f("currency")(e.product.unit_price)))])]),e._v(" "),t("div",{staticClass:"p-2"},[t("ns-numpad",{attrs:{floating:!0,value:e.product.unit_price},on:{changed:function(t){return e.updateProductPrice(t)},next:function(t){return e.resolveProductPrice(t)}}})],1)])])}),[],!1,null,null,null).exports;var ve=r(2277);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function me(){me=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new E(n||[]);return s(o,"_invoke",{value:j(e,r,a)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",b={};function m(){}function g(){}function y(){}var _={};c(_,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x($([])));w&&w!==r&&n.call(w,o)&&(_=w);var C=y.prototype=m.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(s,i,o,a){var l=d(e[s],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==be(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,a)}))}a(l.arg)}var i;s(this,"_invoke",{value:function(e,n){function s(){return new t((function(t,s){r(e,n,t,s)}))}return i=i?i.then(s,s):s()}})}function j(t,r,n){var s=f;return function(i,o){if(s===h)throw new Error("Generator is already running");if(s===v){if("throw"===i)throw o;return{value:e,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=P(a,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=h;var c=d(t,r,n);if("normal"===c.type){if(s=n.done?v:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=v,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,s=t.iterator[n];if(s===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=d(s,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function $(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,i=function r(){for(;++s<t.length;)if(n.call(t,s))return r.value=t[s],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(be(t)+" is not iterable")}return g.prototype=y,s(C,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:g,configurable:!0}),g.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},k(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,s,i){void 0===i&&(i=Promise);var o=new S(u(e,r,n,s),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=$,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function s(n,s){return a.type="throw",a.arg=t,r.next=n,s&&(r.method="next",r.arg=e),!!s}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;T(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:$(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function ge(e,t,r,n,s,i,o){try{var a=e[i](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,s)}const ye={name:"ns-pos-quick-product-popup",methods:{__:i.__,popupCloser:te.Z,popupResolver:s.Z,close:function(){this.popupResolver(!1)},addProduct:function(){var e,t=this;return(e=me().mark((function e(){var r,n,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validation.validateFields(t.fields)){e.next=3;break}return e.abrupt("return",C.kX.error((0,i.__)("Unable to proceed. The form is not valid.")).subscribe());case 3:return r=t.validation.extractFields(t.fields),n={unit:t.units.filter((function(e){return e.id===r.unit_id}))[0],incl_tax_sale_price:parseFloat(r.unit_price),excl_tax_sale_price:parseFloat(r.unit_price),sale_price:parseFloat(r.unit_price),sale_price_tax:0,sale_price_edit:0,wholesale_price_tax:0,incl_tax_wholesale_price:0,excl_tax_wholesale_price:0,wholesale_price:0,wholesale_price_edit:0,custom_price_tax:0,custom_price:0,custom_price_edit:0,incl_tax_custom_price:0,excl_tax_custom_price:0},e.prev=5,e.next=8,new Promise((function(e,t){r.tax_group_id?nsHttpClient.get("/api/nexopos/v4/taxes/groups/".concat(r.tax_group_id)).subscribe((function(t){n.sale_price_tax=t.taxes.map((function(e){return POS.getVatValue(n.sale_price,e.rate,r.tax_type)})).reduce((function(e,t){return e+t})),n.wholesale_price_tax=t.taxes.map((function(e){return POS.getVatValue(n.wholesale_price,e.rate,r.tax_type)})).reduce((function(e,t){return e+t})),n.excl_tax_sale_price=n.sale_price+n.sale_price_tax,n.incl_tax_sale_price=n.sale_price-n.sale_price_tax,s=t,e(!0)}),(function(e){t(!1)})):(n.sale_price_tax=0,n.wholesale_price_tax=0,n.excl_tax_sale_price=r.unit_price,e(!0))}));case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(5),e.abrupt("return",C.kX.error((0,i.__)("An error has occured while computing the product.")).subscribe());case 13:r.$quantities=function(){return n},r.$original=function(){return{stock_management:"disabled",category_id:0,tax_group:s,tax_type:r.tax_type}},r.unit_name=t.units.filter((function(e){return e.id===r.unit_id}))[0].name,r.quantity=parseFloat(r.quantity),POS.addToCart(r),t.close();case 19:case"end":return e.stop()}}),e,null,[[5,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function o(e){ge(i,n,s,o,a,"next",e)}function a(e){ge(i,n,s,o,a,"throw",e)}o(void 0)}))})()},loadData:function(){var e=this;this.loaded=!1,(0,ve.D)(nsHttpClient.get("/api/nexopos/v4/units"),nsHttpClient.get("/api/nexopos/v4/taxes/groups")).subscribe({next:function(t){e.units=t[0],e.tax_groups=t[1],e.fields.filter((function(e){"tax_group_id"===e.name&&(e.options=t[1].map((function(e){return{label:e.name,value:e.id}}))),"unit_id"===e.name&&(e.options=t[0].map((function(e){return{label:e.name,value:e.id}})))})),e.buildForm()},error:function(e){}})},buildForm:function(){this.fields=this.validation.createFields(this.fields),this.loaded=!0}},data:function(){return{units:[],tax_groups:[],loaded:!1,validation:new se.Z,fields:[{label:(0,i.__)("Name"),name:"name",type:"text",description:(0,i.__)("Provide a unique name for the product."),validation:"required"},{label:(0,i.__)("Unit Price"),name:"unit_price",type:"text",description:(0,i.__)("Define what is the sale price of the item."),validation:"required"},{label:(0,i.__)("Quantity"),name:"quantity",type:"text",value:1,description:(0,i.__)("Set the quantity of the product."),validation:"required"},{label:(0,i.__)("Unit"),name:"unit_id",type:"select",options:[],description:(0,i.__)("Assign a unit to the product."),validation:"required"},{label:(0,i.__)("Tax Type"),name:"tax_type",type:"select",options:[{label:(0,i.__)("Disabled"),value:""},{label:(0,i.__)("Inclusive"),value:"inclusive"},{label:(0,i.__)("Exclusive"),value:"exclusive"}],description:(0,i.__)("Define what is tax type of the item.")},{label:(0,i.__)("Tax Group"),name:"tax_group_id",type:"select",options:[],description:(0,i.__)("Choose the tax group that should apply to the item.")}]}},mounted:function(){this.popupCloser(),this.loadData()}};const _e=(0,c.Z)(ye,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-95vw flex flex-col h-95vh shadow-lg md:w-3/5-screen lg:w-2/5-screen md:h-3/5-screen bg-white"},[t("div",{staticClass:"header bg-white border-b flex justify-between p-2 items-center"},[t("h3",[e._v(e._s(e.__("Product / Service")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"p-2 flex-auto overflow-y-auto"},[e.loaded?e._e():t("div",{staticClass:"h-full w-full flex justify-center items-center"},[t("ns-spinner")],1),e._v(" "),e.loaded?e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})):e._e()],2),e._v(" "),t("div",{staticClass:"border-t flex justify-between p-2"},[t("div"),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.addProduct()}}},[e._v(e._s(e.__("Create")))])],1)])])}),[],!1,null,null,null).exports;function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function we(){we=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new E(n||[]);return s(o,"_invoke",{value:j(e,r,a)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",b={};function m(){}function g(){}function y(){}var _={};c(_,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x($([])));w&&w!==r&&n.call(w,o)&&(_=w);var C=y.prototype=m.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(s,i,o,a){var l=d(e[s],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==xe(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,a)}))}a(l.arg)}var i;s(this,"_invoke",{value:function(e,n){function s(){return new t((function(t,s){r(e,n,t,s)}))}return i=i?i.then(s,s):s()}})}function j(t,r,n){var s=f;return function(i,o){if(s===h)throw new Error("Generator is already running");if(s===v){if("throw"===i)throw o;return{value:e,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=P(a,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=h;var c=d(t,r,n);if("normal"===c.type){if(s=n.done?v:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=v,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,s=t.iterator[n];if(s===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=d(s,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function $(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,i=function r(){for(;++s<t.length;)if(n.call(t,s))return r.value=t[s],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(xe(t)+" is not iterable")}return g.prototype=y,s(C,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:g,configurable:!0}),g.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},k(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,s,i){void 0===i&&(i=Promise);var o=new S(u(e,r,n,s),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=$,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function s(n,s){return a.type="throw",a.arg=t,r.next=n,s&&(r.method="next",r.arg=e),!!s}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;T(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:$(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t,r){var n;return n=function(e,t){if("object"!=xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xe(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t,r,n,s,i,o){try{var a=e[i](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,s)}function Pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function o(e){je(i,n,s,o,a,"next",e)}function a(e){je(i,n,s,o,a,"throw",e)}o(void 0)}))}}const Oe={name:"ns-pos-cart",data:function(){return{popup:null,products:[],visibleSection:null,visibleSectionSubscriber:null,optionsSubscriber:null,options:{},typeSubscribe:null,orderSubscribe:null,productSubscribe:null,settingsSubscribe:null,settings:{},types:[],order:{}}},computed:{selectedType:function(){return this.order.type?this.order.type.label:"N/A"},isVisible:function(){return"cart"===this.visibleSection},customerName:function(){return this.order.customer?this.order.customer.name:"N/A"},couponName:function(){return"Apply Coupon"}},mounted:function(){var e=this;this.optionsSubscriber=POS.options.subscribe((function(t){e.options=t})),this.typeSubscribe=POS.types.subscribe((function(t){return e.types=t})),this.orderSubscribe=POS.order.subscribe((function(t){e.order=t})),this.productSubscribe=POS.products.subscribe((function(t){e.products=t,e.$forceUpdate()})),this.settingsSubscribe=POS.settings.subscribe((function(t){e.settings=t})),this.visibleSectionSubscriber=POS.visibleSection.subscribe((function(t){e.visibleSection=t}))},destroyed:function(){this.visibleSectionSubscriber.unsubscribe(),this.typeSubscribe.unsubscribe(),this.orderSubscribe.unsubscribe(),this.productSubscribe.unsubscribe(),this.settingsSubscribe.unsubscribe(),this.optionsSubscriber.unsubscribe()},methods:{__:i.__,switchTo:J.Z,openAddQuickProduct:function(){new Promise((function(e,t){n.G.show(_e,{resolve:e,reject:t})})).then((function(e){})).catch((function(e){}))},changeProductPrice:function(e){var t=this;return Pe(we().mark((function r(){var s,o;return we().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.settings.edit_purchase_price){r.next=2;break}return r.abrupt("return",C.kX.error((0,i.__)("You don't have the right to edit the purchase price.")).subscribe());case 2:if(!t.settings.unit_price_editable){r.next=19;break}return r.prev=3,r.next=6,new Promise((function(t,r){return n.G.show(he,{product:Object.assign({},e),resolve:t,reject:r})}));case 6:return s=r.sent,o=ke(ke({},e.$quantities()),{custom_price_edit:s}),e.$quantities=function(){return o},e.mode="custom",e=POS.computeProductTax(e),POS.refreshProducts(POS.products.getValue()),POS.refreshCart(),r.abrupt("return",C.kX.success((0,i.__)("The product price has been updated.")).subscribe());case 16:return r.prev=16,r.t0=r.catch(3),r.abrupt("return");case 19:return r.abrupt("return",C.kX.error((0,i.__)("The editable price feature is disabled.")).subscribe());case 20:case"end":return r.stop()}}),r,null,[[3,16]])})))()},selectCoupon:function(){return Pe(we().mark((function e(){return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){n.G.show(ue.Z,{resolve:e,reject:t})}));case 3:e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))()},defineOrderSettings:function(){var e=this;return Pe(we().mark((function t(){var r;return we().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.settings.edit_settings){t.next=2;break}return t.abrupt("return",C.kX.error((0,i.__)("You're not allowed to edit the order settings.")).subscribe());case 2:return t.prev=2,t.next=5,new Promise((function(t,r){n.G.show(fe,{resolve:t,reject:r,order:e.order})}));case 5:r=t.sent,POS.order.next(ke(ke({},e.order),r)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})))()},openNotePopup:function(){var e=this;return Pe(we().mark((function t(){var r,s;return we().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(t,r){var s=e.order.note,i=e.order.note_visibility;n.G.show(oe,{resolve:t,reject:r,note:s,note_visibility:i})}));case 3:r=t.sent,s=ke(ke({},e.order),r),POS.order.next(s),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),!1!==t.t0&&C.kX.error(t.t0.message).subscribe();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},selectTaxGroup:function(){var e=arguments,t=this;return Pe(we().mark((function r(){var s,i,o;return we().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.length>0&&void 0!==e[0]?e[0]:"settings",r.prev=1,r.next=4,new Promise((function(e,r){var i=t.order.taxes,o=t.order.tax_group_id,a=t.order.tax_type;n.G.show(le,{resolve:e,reject:r,taxes:i,tax_group_id:o,tax_type:a,activeTab:s})}));case 4:i=r.sent,o=ke(ke({},t.order),i),POS.order.next(o),POS.refreshCart(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))()},openTaxSummary:function(){this.selectTaxGroup("summary")},voidOngoingOrder:function(){POS.voidOrder(this.order)},holdOrder:function(){var e=this;return Pe(we().mark((function t(){var r,s,i;return we().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("hold"!==e.order.payment_status&&e.order.payments.length>0)){t.next=2;break}return t.abrupt("return",C.kX.error("Unable to hold an order which payment status has been updated already.").subscribe());case 2:r=C.kq.applyFilters("ns-hold-queue",[q,M,K]),t.t0=we().keys(r);case 4:if((t.t1=t.t0()).done){t.next=18;break}return s=t.t1.value,t.prev=6,i=new r[s](e.order),t.next=10,i.run();case 10:t.sent,t.next=16;break;case 13:return t.prev=13,t.t2=t.catch(6),t.abrupt("return",!1);case 16:t.next=4;break;case 18:C.kq.applyFilters("ns-override-hold-popup",(function(){new Promise((function(t,r){n.G.show(ne,{resolve:t,reject:r,order:e.order})})).then((function(t){e.order.title=t.title,e.order.payment_status="hold",POS.order.next(e.order);var r=n.G.show(j.Z);POS.submitOrder().then((function(e){r.close(),C.kX.success(e.message).subscribe()}),(function(e){r.close(),C.kX.error(e.message).subscribe()}))}))}))();case 20:case"end":return t.stop()}}),t,null,[[6,13]])})))()},openDiscountPopup:function(e,t){return this.settings.products_discount||"product"!==t?this.settings.cart_discount||"cart"!==t?void n.G.show(u,{reference:e,type:t,onSubmit:function(r){"product"===t?POS.updateProduct(e,r):"cart"===t&&POS.updateCart(e,r)}},{popupClass:"bg-white h:2/3 shadow-lg xl:w-1/4 lg:w-2/5 md:w-2/3 w-full"}):C.kX.error("You're not allowed to add a discount on the cart.").subscribe():C.kX.error("You're not allowed to add a discount on the product.").subscribe()},selectCustomer:function(){n.G.show(V.Z)},toggleMode:function(e){"normal"===e.mode?n.G.show(d.Z,{title:"Enable WholeSale Price",message:"Would you like to switch to wholesale price ?",onAction:function(t){t&&POS.updateProduct(e,{mode:"wholesale"})}}):n.G.show(d.Z,{title:"Enable Normal Price",message:"Would you like to switch to normal price ?",onAction:function(t){t&&POS.updateProduct(e,{mode:"normal"})}})},remove:function(e){n.G.show(d.Z,{title:"Confirm Your Action",message:"Would you like to delete this product ?",onAction:function(t){t&&POS.removeProduct(e)}})},changeQuantity:function(e){new L.$(e).run({unit_quantity_id:e.unit_quantity_id,unit_name:e.unit_name,$quantities:e.$quantities}).then((function(t){POS.updateProduct(e,t)}))},payOrder:function(){var e=this;return Pe(we().mark((function t(){var r,n,s;return we().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=C.kq.applyFilters("ns-pay-queue",[q,M,K,X]),t.t0=we().keys(r);case 2:if((t.t1=t.t0()).done){t.next=16;break}return n=t.t1.value,t.prev=4,s=new r[n](e.order),t.next=8,s.run();case 8:t.sent,t.next=14;break;case 11:return t.prev=11,t.t2=t.catch(4),t.abrupt("return",!1);case 14:t.next=2;break;case 16:case"end":return t.stop()}}),t,null,[[4,11]])})))()},openOrderType:function(){n.G.show(D.Z)},openShippingPopup:function(){n.G.show(ee.Z)}}};const Te=(0,c.Z)(Oe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-auto flex flex-col",attrs:{id:"pos-cart"}},["cart"===e.visibleSection?t("div",{staticClass:"flex pl-2",attrs:{id:"tools"}},[t("div",{staticClass:"flex cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 bg-white font-semibold text-gray-700",on:{click:function(t){return e.switchTo("cart")}}},[t("span",[e._v(e._s(e.__("Cart")))]),e._v(" "),e.order?t("span",{staticClass:"flex items-center justify-center text-sm rounded-full h-6 w-6 bg-green-500 text-white ml-1"},[e._v(e._s(e.order.products.length))]):e._e()]),e._v(" "),t("div",{staticClass:"cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 bg-gray-300 border-t border-r border-l border-gray-300 text-gray-600",on:{click:function(t){return e.switchTo("grid")}}},[e._v("\n            "+e._s(e.__("Products"))+"\n        ")])]):e._e(),e._v(" "),t("div",{staticClass:"rounded shadow bg-white flex-auto flex overflow-hidden"},[t("div",{staticClass:"cart-table flex flex-auto flex-col overflow-hidden"},[t("div",{staticClass:"w-full p-2 border-b border-gray-300",attrs:{id:"cart-toolbox"}},[t("div",{staticClass:"border border-gray-300 rounded overflow-hidden"},[t("div",{staticClass:"flex flex-wrap"},[t("div",[t("button",{staticClass:"w-full h-10 px-3 bg-gray-200 border-r border-gray-300 outline-none",on:{click:function(t){return e.openNotePopup()}}},[t("i",{staticClass:"las la-comment"}),e._v(" "),t("span",{staticClass:"ml-1 hidden md:inline-block"},[e._v(e._s(e.__("Comments")))])])]),e._v(" "),t("div",[t("button",{staticClass:"w-full h-10 px-3 bg-gray-200 border-r border-gray-300 outline-none flex items-center",on:{click:function(t){return e.selectTaxGroup()}}},[t("i",{staticClass:"las la-balance-scale-left"}),e._v(" "),t("span",{staticClass:"ml-1 hidden md:inline-block"},[e._v(e._s(e.__("Taxes")))]),e._v(" "),e.order.taxes&&e.order.taxes.length>0?t("span",{staticClass:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-blue-400 text-white"},[e._v(e._s(e.order.taxes.length))]):e._e()])]),e._v(" "),t("div",[t("button",{staticClass:"w-full h-10 px-3 bg-gray-200 border-r border-gray-300 outline-none flex items-center",on:{click:function(t){return e.selectCoupon()}}},[t("i",{staticClass:"las la-tags"}),e._v(" "),t("span",{staticClass:"ml-1 hidden md:inline-block"},[e._v(e._s(e.__("Coupons")))]),e._v(" "),e.order.coupons&&e.order.coupons.length>0?t("span",{staticClass:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-blue-400 text-white"},[e._v(e._s(e.order.coupons.length))]):e._e()])]),e._v(" "),t("div",[t("button",{staticClass:"w-full h-10 px-3 bg-gray-200 border-r border-gray-300 outline-none flex items-center",on:{click:function(t){return e.defineOrderSettings()}}},[t("i",{staticClass:"las la-tools"}),e._v(" "),t("span",{staticClass:"ml-1 hidden md:inline-block"},[e._v(e._s(e.__("Settings")))])])]),e._v(" "),"yes"===e.options.ns_pos_quick_product?t("div",[t("button",{staticClass:"w-full h-10 px-3 bg-gray-200 border-r border-gray-300 outline-none flex items-center",on:{click:function(t){return e.openAddQuickProduct()}}},[t("i",{staticClass:"las la-plus"}),e._v(" "),t("span",{staticClass:"ml-1 hidden md:inline-block"},[e._v(e._s(e.__("Product")))])])]):e._e()])])]),e._v(" "),t("div",{staticClass:"w-full text-gray-700 font-semibold flex",attrs:{id:"cart-table-header"}},[t("div",{staticClass:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0 border-gray-200 bg-gray-100"},[e._v(e._s(e.__("Product")))]),e._v(" "),t("div",{staticClass:"hidden lg:flex lg:w-1/6 p-2 border-b border-t-0 border-gray-200 bg-gray-100"},[e._v(e._s(e.__("Quantity")))]),e._v(" "),t("div",{staticClass:"hidden lg:flex lg:w-1/6 p-2 border border-r-0 border-t-0 border-gray-200 bg-gray-100"},[e._v(e._s(e.__("Total")))])]),e._v(" "),t("div",{staticClass:"flex flex-auto flex-col overflow-auto",attrs:{id:"cart-products-table"}},[0===e.products.length?t("div",{staticClass:"text-gray-700 flex"},[t("div",{staticClass:"w-full text-center py-4 border-b border-gray-200"},[t("h3",{staticClass:"text-gray-600"},[e._v(e._s(e.__("No products added...")))])])]):e._e(),e._v(" "),e._l(e.products,(function(r,n){return t("div",{key:r.barcode,staticClass:"text-gray-700 flex",attrs:{"product-index":n}},[t("div",{staticClass:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0 border-gray-200"},[t("div",{staticClass:"flex justify-between product-details mb-1"},[t("h3",{staticClass:"font-semibold"},[e._v("\n                                "+e._s(r.name)+"  "+e._s(r.unit_name)+"\n                            ")]),e._v(" "),t("div",{staticClass:"-mx-1 flex product-options"},[t("div",{staticClass:"px-1"},[t("a",{staticClass:"hover:text-red-400 cursor-pointer outline-none border-dashed py-1 border-b border-red-400 text-sm",on:{click:function(t){return e.remove(r)}}},[t("i",{staticClass:"las la-trash text-xl"})])]),e._v(" "),t("div",{staticClass:"px-1"},[t("a",{staticClass:"hover:text-blue-600 cursor-pointer outline-none border-dashed py-1 border-b text-sm",class:"wholesale"===r.mode?"text-green-600 border-green-600":"border-blue-400",on:{click:function(t){return e.toggleMode(r)}}},[t("i",{staticClass:"las la-award text-xl"})])])])]),e._v(" "),t("div",{staticClass:"flex justify-between product-controls"},[t("div",{staticClass:"-mx-1 flex flex-wrap"},[t("div",{staticClass:"px-1 w-1/2 md:w-auto mb-1"},[t("a",{staticClass:"cursor-pointer outline-none border-dashed py-1 border-b text-sm",class:"wholesale"===r.mode?"text-green-600 hover:text-green-700 border-green-600":"hover:text-blue-400 border-blue-400",on:{click:function(t){return e.changeProductPrice(r)}}},[e._v(e._s(e.__("Price"))+" : "+e._s(e._f("currency")(r.unit_price)))])]),e._v(" "),t("div",{staticClass:"px-1 w-1/2 md:w-auto mb-1"},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openDiscountPopup(r,"product")}}},[e._v(e._s(e.__("Discount"))+" "),"percentage"===r.discount_type?t("span",[e._v(e._s(r.discount_percentage)+"%")]):e._e(),e._v(" : "+e._s(e._f("currency")(r.discount)))])]),e._v(" "),t("div",{staticClass:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.changeQuantity(r)}}},[e._v(e._s(e.__("Quantity :"))+" "+e._s(r.quantity))])]),e._v(" "),t("div",{staticClass:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},[t("span",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm"},[e._v(e._s(e.__("Total :"))+" "+e._s(e._f("currency")(r.total_price)))])])])])]),e._v(" "),t("div",{staticClass:"hidden lg:flex w-1/6 p-2 border-b border-gray-200 items-center justify-center cursor-pointer hover:bg-blue-100",on:{click:function(t){return e.changeQuantity(r)}}},[t("span",{staticClass:"border-b border-dashed border-blue-400 p-2"},[e._v(e._s(r.quantity))])]),e._v(" "),t("div",{staticClass:"hidden lg:flex w-1/6 p-2 border border-r-0 border-t-0 border-gray-200 items-center justify-center"},[e._v(e._s(e._f("currency")(r.total_price)))])])}))],2),e._v(" "),t("div",{staticClass:"flex",attrs:{id:"cart-products-summary"}},["both"===e.visibleSection?t("table",{staticClass:"table w-full text-sm text-gray-700"},[t("tr",[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.selectCustomer()}}},[e._v("Customer : "+e._s(e.customerName))])]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[e._v(e._s(e.__("Sub Total")))]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2 text-right",attrs:{width:"200"}},[e._v(e._s(e._f("currency")(e.order.subtotal)))])]),e._v(" "),t("tr",[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openOrderType()}}},[e._v(e._s(e.__("Type :"))+" "+e._s(e.selectedType))])]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("span",[e._v(e._s(e.__("Discount")))]),e._v(" "),"percentage"===e.order.discount_type?t("span",[e._v("("+e._s(e.order.discount_percentage)+"%)")]):e._e(),e._v(" "),"flat"===e.order.discount_type?t("span",[e._v("("+e._s(e.__("Flat"))+")")]):e._e()]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2 text-right",attrs:{width:"200"}},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openDiscountPopup(e.order,"cart")}}},[e._v(e._s(e._f("currency")(e.order.discount)))])])]),e._v(" "),e.order.type&&"delivery"===e.order.type.identifier?t("tr",[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}}),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openShippingPopup()}}},[e._v(e._s(e.__("Shipping")))])]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2 text-right",attrs:{width:"200"}},[e._v(e._s(e._f("currency")(e.order.shipping)))])]):e._e(),e._v(" "),t("tr",{staticClass:"bg-green-200"},[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[e.order?t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openTaxSummary()}}},[e._v("Tax : "+e._s(e._f("currency")(e.order.tax_value)))]):e._e()]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[e._v(e._s(e.__("Total")))]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2 text-right",attrs:{width:"200"}},[e._v(e._s(e._f("currency")(e.order.total)))])])]):e._e(),e._v(" "),"cart"===e.visibleSection?t("table",{staticClass:"table w-full text-sm text-gray-700"},[t("tr",[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.selectCustomer()}}},[e._v(e._s(e.__("Customer :"))+" "+e._s(e.customerName))])]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("div",{staticClass:"flex justify-between"},[t("span",[e._v(e._s(e.__("Sub Total")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.subtotal)))])])])]),e._v(" "),t("tr",[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openOrderType()}}},[e._v(e._s(e.__("Type :"))+" "+e._s(e.selectedType))])]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("div",{staticClass:"flex justify-between items-center"},[t("p",[t("span",[e._v(e._s(e.__("Discount")))]),e._v(" "),"percentage"===e.order.discount_type?t("span",[e._v("("+e._s(e.order.discount_percentage)+"%)")]):e._e(),e._v(" "),"flat"===e.order.discount_type?t("span",[e._v("("+e._s(e.__("Flat"))+")")]):e._e()]),e._v(" "),t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openDiscountPopup(e.order,"cart")}}},[e._v(e._s(e._f("currency")(e.order.discount)))])])])]),e._v(" "),e.order.type&&"delivery"===e.order.type.identifier?t("tr",[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}}),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openShippingPopup()}}},[e._v(e._s(e.__("Shipping")))]),e._v(" "),t("span")])]):e._e(),e._v(" "),t("tr",{staticClass:"bg-green-200"},[t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[e.order?t("a",{staticClass:"hover:text-blue-400 cursor-pointer outline-none border-dashed py-1 border-b border-blue-400 text-sm",on:{click:function(t){return e.openTaxSummary()}}},[e._v(e._s(e.__("Tax :"))+" "+e._s(e._f("currency")(e.order.tax_value)))]):e._e()]),e._v(" "),t("td",{staticClass:"border border-gray-300 p-2",attrs:{width:"200"}},[t("div",{staticClass:"flex justify-between w-full"},[t("span",[e._v(e._s(e.__("Total")))]),e._v(" "),t("span",[e._v(e._s(e._f("currency")(e.order.total)))])])])])]):e._e()]),e._v(" "),t("div",{staticClass:"h-16 flex flex-shrink-0 border-t border-gray-200",attrs:{id:"cart-bottom-buttons"}},[t("div",{staticClass:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-green-500 text-white hover:bg-green-600 border-r border-green-600 flex-auto",attrs:{id:"pay-button"},on:{click:function(t){return e.payOrder()}}},[t("i",{staticClass:"mr-2 text-2xl lg:text-xl las la-cash-register"}),e._v(" "),t("span",{staticClass:"text-lg hidden md:inline lg:text-2xl"},[e._v(e._s(e.__("Pay")))])]),e._v(" "),t("div",{staticClass:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-blue-500 text-white border-r hover:bg-blue-600 border-blue-600 flex-auto",attrs:{id:"hold-button"},on:{click:function(t){return e.holdOrder()}}},[t("i",{staticClass:"mr-2 text-2xl lg:text-xl las la-pause"}),e._v(" "),t("span",{staticClass:"text-lg hidden md:inline lg:text-2xl"},[e._v(e._s(e.__("Hold")))])]),e._v(" "),t("div",{staticClass:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-white border-r border-gray-200 hover:bg-indigo-100 flex-auto text-gray-700",attrs:{id:"discount-button"},on:{click:function(t){return e.openDiscountPopup(e.order,"cart")}}},[t("i",{staticClass:"mr-2 text-2xl lg:text-xl las la-percent"}),e._v(" "),t("span",{staticClass:"text-lg hidden md:inline lg:text-2xl"},[e._v(e._s(e.__("Discount")))])]),e._v(" "),t("div",{staticClass:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-red-500 text-white border-gray-200 hover:bg-red-600 flex-auto",attrs:{id:"void-button"},on:{click:function(t){return e.voidOngoingOrder(e.order)}}},[t("i",{staticClass:"mr-2 text-2xl lg:text-xl las la-trash"}),e._v(" "),t("span",{staticClass:"text-lg hidden md:inline lg:text-2xl"},[e._v(e._s(e.__("Void")))])])])])])])}),[],!1,null,null,null).exports},9742:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(277),s=r(2767),i=r(4503);const o={name:"ns-pos-search-product",data:function(){return{searchValue:"",products:[],isLoading:!1}},mounted:function(){this.$refs.searchField.focus(),this.popupCloser()},methods:{__:r(9165).__,popupCloser:i.Z,addToCart:function(e){POS.addToCart(e),this.$popup.close()},search:function(){var e=this;this.isLoading=!0,n.ih.post("/api/nexopos/v4/products/search",{search:this.searchValue}).subscribe((function(t){e.isLoading=!1,e.products=t,1===e.products.length&&e.addToCart(e.products[0])}),(function(t){e.isLoading=!1,n.kX.error(t.message).subscribe()}))}}};var a=r(1900);const l=(0,a.Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow-lg w-95vw h-95vh md:h-3/5-screen md:w-2/4-screen flex flex-col overflow-hidden"},[t("div",{staticClass:"p-2 border-b border-gray-300 flex justify-between items-center"},[t("h3",{staticClass:"text-gray-700"},[e._v(e._s(e.__("Search Product")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.$popup.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-hidden flex flex-col"},[t("div",{staticClass:"p-2 border-b border-gray-300"},[t("div",{staticClass:"flex border-blue-400 border-2 rounded overflow-hidden"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],ref:"searchField",staticClass:"p-2 outline-none flex-auto text-gray-700 bg-blue-100",attrs:{type:"text"},domProps:{value:e.searchValue},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()},input:function(t){t.target.composing||(e.searchValue=t.target.value)}}}),e._v(" "),t("button",{staticClass:"px-2 bg-blue-400 text-white",on:{click:function(t){return e.search()}}},[e._v(e._s(e.__("Search")))])])]),e._v(" "),t("div",{staticClass:"overflow-y-auto flex-auto relative"},[t("ul",[e._l(e.products,(function(r){return t("li",{key:r.id,staticClass:"hover:bg-blue-100 cursor-pointer p-2 flex justify-between border-b",on:{click:function(t){return e.addToCart(r)}}},[t("div",{staticClass:"text-gray-700"},[e._v("\n                        "+e._s(r.name)+"\n                    ")]),e._v(" "),t("div")])})),e._v(" "),0===e.products.length?t("li",{staticClass:"text-gray-700 text-center p-2"},[e._v(e._s(e.__("There is nothing to display. Have you started the search ?")))]):e._e()],2),e._v(" "),e.isLoading?t("div",{staticClass:"absolute h-full w-full flex items-center justify-center z-10 top-0",staticStyle:{background:"rgb(187 203 214 / 29%)"}},[t("ns-spinner")],1):e._e()])])])}),[],!1,null,null,null).exports,c={name:"ns-pos-grid",data:function(){return{items:Array.from({length:1e3},(function(e,t){return{data:"#"+t}})),products:[],categories:[],breadcrumbs:[],autoFocus:!1,barcode:"",previousCategory:null,order:null,visibleSection:null,breadcrumbsSubsribe:null,orderSubscription:null,visibleSectionSubscriber:null,currentCategory:null,interval:null,searchTimeout:null,gridItemsWidth:0,gridItemsHeight:0,screenSubscriber:null,rebuildGridTimeout:null,rebuildGridComplete:!1}},computed:{hasCategories:function(){return this.categories.length>0}},watch:{barcode:function(){var e=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){e.submitSearch(e.barcode)}),200)}},mounted:function(){var e=this;this.loadCategories(),this.breadcrumbsSubsribe=POS.breadcrumbs.subscribe((function(t){e.breadcrumbs=t})),this.visibleSectionSubscriber=POS.visibleSection.subscribe((function(t){e.visibleSection=t})),this.screenSubscriber=POS.screen.subscribe((function(t){clearTimeout(e.rebuildGridTimeout),e.rebuildGridComplete=!1,e.rebuildGridTimeout=setTimeout((function(){e.rebuildGridComplete=!0,e.computeGridWidth()}),500)})),this.orderSubscription=POS.order.subscribe((function(t){return e.order=t})),this.interval=setInterval((function(){return e.checkFocus()}),500)},destroyed:function(){this.orderSubscription.unsubscribe(),this.breadcrumbsSubsribe.unsubscribe(),this.visibleSectionSubscriber.unsubscribe(),this.screenSubscriber.unsubscribe(),clearInterval(this.interval)},methods:{switchTo:s.Z,computeGridWidth:function(){null!==document.getElementById("grid-items")&&(this.gridItemsWidth=document.getElementById("grid-items").offsetWidth,this.gridItemsHeight=document.getElementById("grid-items").offsetHeight)},cellSizeAndPositionGetter:function(e,t){var r={xs:{width:this.gridItemsWidth/2,items:2,height:200},sm:{width:this.gridItemsWidth/2,items:2,height:200},md:{width:this.gridItemsWidth/3,items:3,height:150},lg:{width:this.gridItemsWidth/4,items:4,height:150},xl:{width:this.gridItemsWidth/6,items:6,height:150}},n=r[POS.responsive.screenIs].width,s=r[POS.responsive.screenIs].height;return{width:n-0,height:s,x:t%r[POS.responsive.screenIs].items*n-0,y:parseInt(t/r[POS.responsive.screenIs].items)*s}},openSearchPopup:function(){Popup.show(l)},submitSearch:function(e){var t=this;e.length>0&&n.ih.get("/api/nexopos/v4/products/search/using-barcode/".concat(e)).subscribe((function(e){t.barcode="",POS.addToCart(e.product)}),(function(e){t.barcode="",n.kX.error(e.message).subscribe()}))},checkFocus:function(){this.autoFocus&&(0===document.querySelectorAll(".is-popup").length&&this.$refs.search.focus())},loadCategories:function(e){var t=this;n.ih.get("/api/nexopos/v4/categories/pos/".concat(e?e.id:"")).subscribe((function(e){t.categories=e.categories.map((function(e){return{data:e}})),t.products=e.products.map((function(e){return{data:e}})),t.previousCategory=e.previousCategory,t.currentCategory=e.currentCategory,t.updateBreadCrumb(t.currentCategory)}))},updateBreadCrumb:function(e){if(e){var t=this.breadcrumb.filter((function(t){return t.id===e.id}));if(t.length>0){var r=!0,n=this.breadcrumb.filter((function(e){return e.id===t[0].id&&r?(r=!1,!0):r}));this.breadcrumb=n}else this.breadcrumb.push(e)}else this.breadcrumb=[];POS.breadcrumbs.next(this.breadcrumb)},addToTheCart:function(e){POS.addToCart(e)}}};const u=(0,a.Z)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-auto flex flex-col",attrs:{id:"pos-grid"}},["grid"===e.visibleSection?t("div",{staticClass:"flex pl-2",attrs:{id:"tools"}},[t("div",{staticClass:"flex cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 bg-gray-300 border-t border-r border-l border-gray-300 text-gray-600",on:{click:function(t){return e.switchTo("cart")}}},[t("span",[e._v("Cart")]),e._v(" "),e.order?t("span",{staticClass:"flex items-center justify-center text-sm rounded-full h-6 w-6 bg-green-500 text-white ml-1"},[e._v(e._s(e.order.products.length))]):e._e()]),e._v(" "),t("div",{staticClass:"cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 bg-white font-semibold text-gray-700",on:{click:function(t){return e.switchTo("grid")}}},[e._v("\n            Products\n        ")])]):e._e(),e._v(" "),t("div",{staticClass:"rounded shadow bg-white overflow-hidden flex-auto flex flex-col"},[t("div",{staticClass:"p-2 border-b border-gray-200",attrs:{id:"grid-header"}},[t("div",{staticClass:"border rounded flex border-gray-300 overflow-hidden"},[t("button",{staticClass:"w-10 h-10 bg-gray-200 border-r border-gray-300 outline-none",on:{click:function(t){return e.openSearchPopup()}}},[t("i",{staticClass:"las la-search"})]),e._v(" "),t("button",{staticClass:"outline-none w-10 h-10 border-r border-gray-300",class:e.autoFocus?"pos-button-clicked bg-gray-300":"bg-gray-200",on:{click:function(t){e.autoFocus=!e.autoFocus}}},[t("i",{staticClass:"las la-barcode"})]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.barcode,expression:"barcode"}],ref:"search",staticClass:"flex-auto outline-none px-2 bg-gray-100",attrs:{type:"text"},domProps:{value:e.barcode},on:{input:function(t){t.target.composing||(e.barcode=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"p-2 border-gray-200",attrs:{id:"grid-breadscrumb"}},[t("ul",{staticClass:"flex"},[t("li",[t("a",{staticClass:"px-3 text-gray-700",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loadCategories()}}},[e._v("Home ")]),e._v(" "),t("i",{staticClass:"las la-angle-right"})]),e._v(" "),t("li",e._l(e.breadcrumbs,(function(r){return t("a",{key:r.id,staticClass:"px-3 text-gray-700",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loadCategories(r)}}},[e._v(e._s(r.name)+" "),t("i",{staticClass:"las la-angle-right"})])})),0)])]),e._v(" "),t("div",{staticClass:"overflow-hidden h-full flex-col flex",attrs:{id:"grid-items"}},[e.rebuildGridComplete?e._e():t("div",{staticClass:"h-full w-full flex-col flex items-center justify-center"},[t("ns-spinner"),e._v(" "),t("span",{staticClass:"text-gray-600 my-2"},[e._v("Rebuilding...")])],1),e._v(" "),e.rebuildGridComplete?[e.hasCategories?t("VirtualCollection",{attrs:{cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,collection:e.categories,height:e.gridItemsHeight,width:e.gridItemsWidth},scopedSlots:e._u([{key:"cell",fn:function(r){var n=r.data;return t("div",{staticClass:"w-full h-full"},[t("div",{key:n.id,staticClass:"hover:bg-gray-200 w-full h-full cursor-pointer border border-gray-200 flex flex-col items-center justify-center overflow-hidden",on:{click:function(t){return e.loadCategories(n)}}},[t("div",{staticClass:"h-full w-full flex items-center justify-center"},[n.preview_url?t("img",{staticClass:"object-cover h-full",attrs:{src:n.preview_url,alt:n.name}}):e._e(),e._v(" "),n.preview_url?e._e():t("i",{staticClass:"las la-image text-gray-600 text-6xl"})]),e._v(" "),t("div",{staticClass:"h-0 w-full"},[t("div",{staticClass:"relative w-full flex items-center justify-center -top-10 h-20 py-2",staticStyle:{background:"rgb(255 255 255 / 73%)"}},[t("h3",{staticClass:"text-sm font-bold text-gray-700 py-2 text-center"},[e._v(e._s(n.name))])])])])])}}],null,!1,1415940505)}):e._e(),e._v(" "),e.hasCategories?e._e():t("VirtualCollection",{attrs:{cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,collection:e.products,height:e.gridItemsHeight,width:e.gridItemsWidth},scopedSlots:e._u([{key:"cell",fn:function(r){var n=r.data;return t("div",{staticClass:"w-full h-full"},[t("div",{key:n.id,staticClass:"hover:bg-gray-200 w-full h-full cursor-pointer border border-gray-200 flex flex-col items-center justify-center overflow-hidden",on:{click:function(t){return e.addToTheCart(n)}}},[t("div",{staticClass:"h-full w-full flex items-center justify-center overflow-hidden"},[n.galleries&&n.galleries.filter((function(e){return 1===e.featured})).length>0?t("img",{staticClass:"object-cover h-full",attrs:{src:n.galleries.filter((function(e){return 1===e.featured}))[0].url,alt:n.name}}):e._e(),e._v(" "),n.galleries&&0!==n.galleries.filter((function(e){return 1===e.featured})).length?e._e():t("i",{staticClass:"las la-image text-gray-600 text-6xl"})]),e._v(" "),t("div",{staticClass:"h-0 w-full"},[t("div",{staticClass:"relative w-full flex flex-col items-center justify-center -top-10 h-20 p-2",staticStyle:{background:"rgb(255 255 255 / 73%)"}},[t("h3",{staticClass:"text-sm text-gray-700 text-center w-full"},[e._v(e._s(n.name))]),e._v(" "),n.unit_quantities&&1===n.unit_quantities.length?t("span",{staticClass:"text-sm text-gray-600"},[e._v(e._s(e._f("currency")(n.unit_quantities[0].sale_price)))]):e._e()])])])])}}],null,!1,3326882304)})]:e._e()],2)])])}),[],!1,null,null,null).exports},6178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(8454),s=r(9742);const i={name:"ns-pos",computed:{buttons:function(){return POS.header.buttons}},mounted:function(){var e=this;this.visibleSectionSubscriber=POS.visibleSection.subscribe((function(t){e.visibleSection=t}))},destroyed:function(){this.visibleSectionSubscriber.unsubscribe()},data:function(){return{visibleSection:null,visibleSectionSubscriber:null}},components:{NsPosCart:n.Z,NsPosGrid:s.Z}};const o=(0,r(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-full flex-auto bg-gray-300 flex flex-col",attrs:{id:"pos-container"}},[t("div",{staticClass:"flex overflow-hidden flex-shrink-0 px-2 pt-2"},[t("div",{staticClass:"-mx-2 flex overflow-x-auto pb-1"},e._l(e.buttons,(function(e,r){return t("div",{key:r,staticClass:"flex px-2 flex-shrink-0"},[t(e,{tag:"component"})],1)})),0)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-hidden flex p-2"},[t("div",{staticClass:"flex flex-auto overflow-hidden -m-2"},[["both","cart"].includes(e.visibleSection)?t("div",{staticClass:"flex overflow-hidden p-2",class:"both"===e.visibleSection?"w-1/2":"w-full"},[t("ns-pos-cart")],1):e._e(),e._v(" "),["both","grid"].includes(e.visibleSection)?t("div",{staticClass:"p-2 flex overflow-hidden",class:"both"===e.visibleSection?"w-1/2":"w-full"},[t("ns-pos-grid")],1):e._e()])])])}),[],!1,null,null,null).exports},7995:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.onAction(!1),e.$popup.close())}))},methods:{__:r(9165).__,emitAction:function(e){this.$popupParams.onAction(e),this.$popup.close()}}};const s=(0,r(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col bg-white shadow-lg w-5/7-screen md:w-4/7-screen lg:w-2/7-screen",class:e.size,attrs:{id:"popup"}},[t("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[t("h2",{staticClass:"text-xl md:text-3xl font-body text-gray-700 text-center"},[e._v(e._s(e.title))]),e._v(" "),t("p",{staticClass:"py-4 text-sm md:text-base text-gray-600 text-center"},[e._v(e._s(e.message))])]),e._v(" "),t("div",{staticClass:"flex border-t border-gray-200 text-gray-700"},[t("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Yes")))]),e._v(" "),t("hr",{staticClass:"border-r border-gray-200"}),e._v(" "),t("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!1)}}},[e._v(e._s(e.__("No")))])])])}),[],!1,null,null,null).exports},5140:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(4503),s=r(4914),i=r(277),o=r(9165),a=r(7366);r(4085);const l={name:"ns-pos-coupons-load-popup",data:function(){return{placeHolder:(0,o.__)("Coupon Code"),couponCode:null,order:null,activeTab:"apply-coupon",orderSubscriber:null,customerCoupon:null}},mounted:function(){var e=this;this.popupCloser(),this.$refs.coupon.select(),this.orderSubscriber=POS.order.subscribe((function(t){e.order=t,e.order.coupons.length>0&&(e.activeTab="active-coupons")})),this.$popupParams&&this.$popupParams.apply_coupon&&(this.couponCode=this.$popupParams.apply_coupon,this.getCoupon(this.couponCode).subscribe({next:function(t){e.customerCoupon=t,e.apply()}}))},destroyed:function(){this.orderSubscriber.unsubscribe()},methods:{__:o.__,popupCloser:n.Z,popupResolver:s.Z,selectCustomer:function(){Popup.show(a.Z)},cancel:function(){this.customerCoupon=null,this.couponCode=null},removeCoupon:function(e){this.order.coupons.splice(e,1),POS.refreshCart()},apply:function(){var e=this;try{var t=this.customerCoupon;if(null!==this.customerCoupon.coupon.valid_hours_start&&!ns.date.moment.isAfter(this.customerCoupon.coupon.valid_hours_start)&&this.customerCoupon.coupon.valid_hours_start.length>0)return i.kX.error((0,o.__)("The coupon is out from validity date range.")).subscribe();if(null!==this.customerCoupon.coupon.valid_hours_end&&!ns.date.moment.isBefore(this.customerCoupon.coupon.valid_hours_end)&&this.customerCoupon.coupon.valid_hours_end.length>0)return i.kX.error((0,o.__)("The coupon is out from validity date range.")).subscribe();var r=this.customerCoupon.coupon.products;if(r.length>0){var n=r.map((function(e){return e.product_id}));if(0===this.order.products.filter((function(e){return n.includes(e.product_id)})).length)return i.kX.error((0,o.__)("This coupon requires products that aren't available on the cart at the moment.")).subscribe()}var s=this.customerCoupon.coupon.categories;if(s.length>0){var a=s.map((function(e){return e.category_id}));if(0===this.order.products.filter((function(e){return a.includes(e.$original().category_id)})).length)return i.kX.error((0,o.__)("This coupon requires products that belongs to specific categories that aren't included at the moment.").replace("%s")).subscribe()}this.cancel();var l={active:t.coupon.active,customer_coupon_id:t.id,minimum_cart_value:t.coupon.minimum_cart_value,maximum_cart_value:t.coupon.maximum_cart_value,name:t.coupon.name,type:t.coupon.type,value:0,limit_usage:t.coupon.limit_usage,code:t.coupon.code,discount_value:t.coupon.discount_value,categories:t.coupon.categories,products:t.coupon.products};POS.pushCoupon(l),this.activeTab="active-coupons",setTimeout((function(){e.popupResolver(l)}),500),i.kX.success((0,o.__)("The coupon has applied to the cart.")).subscribe()}catch(e){console.log(e)}},getCouponType:function(e){switch(e){case"percentage_discount":return(0,o.__)("Percentage");case"flat_discount":return(0,o.__)("Flat");default:return(0,o.__)("Unknown Type")}},getDiscountValue:function(e){switch(e.type){case"percentage_discount":return e.discount_value+"%";case"flat_discount":return this.$options.filters.currency(e.discount_value)}},closePopup:function(){this.popupResolver(!1)},setActiveTab:function(e){this.activeTab=e},getCoupon:function(e){return!this.order.customer_id>0?i.kX.error((0,o.__)("You must select a customer before applying a coupon.")).subscribe():i.ih.post("/api/nexopos/v4/customers/coupons/".concat(e),{customer_id:this.order.customer_id})},loadCoupon:function(){var e=this,t=this.couponCode;this.getCoupon(t).subscribe({next:function(t){e.customerCoupon=t,i.kX.success((0,o.__)("The coupon has been loaded.")).subscribe()},error:function(e){i.kX.error(e.message||(0,o.__)("An unexpected error occured.")).subscribe()}})}}};const c=(0,r(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shadow-lg bg-white w-95vw md:w-3/6-screen lg:w-2/6-screen"},[t("div",{staticClass:"border-b border-gray-200 p-2 flex justify-between items-center"},[t("h3",{staticClass:"font-bold text-gray-700"},[e._v(e._s(e.__("Load Coupon")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),t("div",{staticClass:"p-1"},[t("ns-tabs",{attrs:{active:e.activeTab},on:{changeTab:function(t){return e.setActiveTab(t)}}},[t("ns-tabs-item",{attrs:{label:e.__("Apply A Coupon"),padding:"p-2",identifier:"apply-coupon"}},[t("div",{staticClass:"border-2 border-blue-400 rounded flex"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.couponCode,expression:"couponCode"}],ref:"coupon",staticClass:"w-full p-2",attrs:{type:"text",placeholder:e.placeHolder},domProps:{value:e.couponCode},on:{input:function(t){t.target.composing||(e.couponCode=t.target.value)}}}),e._v(" "),t("button",{staticClass:"bg-blue-400 text-white px-3 py-2",on:{click:function(t){return e.loadCoupon()}}},[e._v(e._s(e.__("Load")))])]),e._v(" "),t("div",{staticClass:"pt-2"},[t("p",{staticClass:"p-2 text-center bg-green-100 text-green-600"},[e._v(e._s(e.__("Input the coupon code that should apply to the POS. If a coupon is issued for a customer, that customer must be selected priorly.")))])]),e._v(" "),e.order&&void 0===e.order.customer_id?t("div",{staticClass:"pt-2",on:{click:function(t){return e.selectCustomer()}}},[t("p",{staticClass:"p-2 cursor-pointer text-center bg-red-100 text-red-600"},[e._v(e._s(e.__("Click here to choose a customer.")))])]):e._e(),e._v(" "),e.order&&void 0!==e.order.customer_id?t("div",{staticClass:"pt-2"},[t("p",{staticClass:"p-2 text-center bg-green-100 text-green-600"},[e._v(e._s(e.__("Loading Coupon For : ")+"".concat(e.order.customer.name," ").concat(e.order.customer.surname)))])]):e._e(),e._v(" "),t("div",{staticClass:"overflow-hidden"},[e.customerCoupon?t("div",{staticClass:"pt-2 fade-in-entrance anim-duration-500 overflow-y-auto h-64"},[t("table",{staticClass:"w-full"},[t("thead",[t("tr",[t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.__("Coupon Name")))]),e._v(" "),t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.customerCoupon.name))])]),e._v(" "),t("tr",[t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.__("Discount"))+" ("+e._s(e.getCouponType(e.customerCoupon.coupon.type))+")")]),e._v(" "),t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.getDiscountValue(e.customerCoupon.coupon)))])]),e._v(" "),t("tr",[t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.__("Usage")))]),e._v(" "),t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.customerCoupon.usage+"/"+(e.customerCoupon.limit_usage||e.__("Unlimited"))))])]),e._v(" "),t("tr",[t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.__("Valid From")))]),e._v(" "),t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.customerCoupon.coupon.valid_hours_start))])]),e._v(" "),t("tr",[t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.__("Valid Till")))]),e._v(" "),t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.customerCoupon.coupon.valid_hours_end))])]),e._v(" "),t("tr",[t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.__("Categories")))]),e._v(" "),t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[t("ul",e._l(e.customerCoupon.coupon.categories,(function(r){return t("li",{key:r.id,staticClass:"rounded-full px-3 py-1 border border-gray-200"},[e._v(e._s(r.category.name))])})),0)])]),e._v(" "),t("tr",[t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[e._v(e._s(e.__("Products")))]),e._v(" "),t("td",{staticClass:"p-2 w-1/2 text-gray-700 border border-gray-200"},[t("ul",e._l(e.customerCoupon.coupon.products,(function(r){return t("li",{key:r.id,staticClass:"rounded-full px-3 py-1 border border-gray-200"},[e._v(e._s(r.product.name))])})),0)])])])])]):e._e()])]),e._v(" "),t("ns-tabs-item",{attrs:{label:e.__("Active Coupons"),padding:"p-1",identifier:"active-coupons"}},[e.order?t("ul",[e._l(e.order.coupons,(function(r,n){return t("li",{key:n,staticClass:"flex justify-between bg-gray-100 items-center px-2 py-1"},[t("div",{staticClass:"flex-auto"},[t("h3",{staticClass:"font-semibold text-gray-700 p-2 flex justify-between"},[t("span",[e._v(e._s(r.name))]),e._v(" "),t("span",[e._v(e._s(e.getDiscountValue(r)))])])]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.removeCoupon(n)}}})],1)])})),e._v(" "),0===e.order.coupons.length?t("li",{staticClass:"flex justify-between bg-gray-100 items-center p-2"},[e._v("\n                        No coupons applies to the cart.\n                    ")]):e._e()],2):e._e()])],1)],1),e._v(" "),e.customerCoupon?t("div",{staticClass:"flex"},[t("button",{staticClass:"w-1/2 px-3 py-2 bg-green-400 text-white font-bold",on:{click:function(t){return e.apply()}}},[e._v("\n            "+e._s(e.__("Apply"))+"\n        ")]),e._v(" "),t("button",{staticClass:"w-1/2 px-3 py-2 bg-red-400 text-white font-bold",on:{click:function(t){return e.cancel()}}},[e._v("\n            "+e._s(e.__("Cancel"))+"\n        ")])]):e._e()])}),[],!1,null,null,null).exports},7366:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(277),s=r(4914),i=r(2285),o=r(2384);const a={data:function(){return{searchCustomerValue:"",orderSubscription:null,order:{},debounceSearch:null,customers:[],isLoading:!1}},computed:{customerSelected:function(){return!1}},watch:{searchCustomerValue:function(e){var t=this;clearTimeout(this.debounceSearch),this.debounceSearch=setTimeout((function(){t.searchCustomer(e)}),500)}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.resolveIfQueued(!1)})),this.orderSubscription=POS.order.subscribe((function(t){e.order=t})),this.getRecentCustomers(),this.$refs.searchField.focus()},destroyed:function(){this.orderSubscription.unsubscribe()},methods:{__:r(9165).__,resolveIfQueued:s.Z,attemptToChoose:function(){if(1===this.customers.length)return this.selectCustomer(this.customers[0]);n.kX.info("Too many result.").subscribe()},openCustomerHistory:function(e,t){t.stopImmediatePropagation(),this.$popup.close(),i.G.show(o.Z,{customer:e,activeTab:"account-payment"})},selectCustomer:function(e){var t=this;this.customers.forEach((function(e){return e.selected=!1})),e.selected=!0,this.isLoading=!0,POS.selectCustomer(e).then((function(r){t.isLoading=!1,t.resolveIfQueued(e)})).catch((function(e){t.isLoading=!1}))},searchCustomer:function(e){var t=this;n.ih.post("/api/nexopos/v4/customers/search",{search:e}).subscribe((function(e){e.forEach((function(e){return e.selected=!1})),t.customers=e}))},createCustomerWithMatch:function(e){this.resolveIfQueued(!1),i.G.show(o.Z,{name:e})},getRecentCustomers:function(){var e=this;this.isLoading=!0,n.ih.get("/api/nexopos/v4/customers").subscribe((function(t){e.isLoading=!1,t.forEach((function(e){return e.selected=!1})),e.customers=t}),(function(t){e.isLoading=!1}))}}};const l=(0,r(1900).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow-xl w-4/5-screen md:w-2/5-screen xl:w-108"},[t("div",{staticClass:"border-b border-gray-200 text-center font-semibold text-2xl text-gray-700 py-2",attrs:{id:"header"}},[t("h2",[e._v(e._s(e.__("Select Customer")))])]),e._v(" "),t("div",{staticClass:"relative"},[t("div",{staticClass:"p-2 border-b border-gray-200 flex justify-between text-gray-600"},[t("span",[e._v("Selected : ")]),e._v(" "),t("div",{staticClass:"flex items-center justify-between"},[t("span",[e._v(e._s(e.order.customer?e.order.customer.name:"N/A"))]),e._v(" "),e.order.customer?t("button",{staticClass:"mx-2 rounded-full h-8 w-8 flex items-center justify-center border border-gray-200 hover:bg-blue-400 hover:text-white hover:border-transparent",on:{click:function(t){return e.openCustomerHistory(e.order.customer,t)}}},[t("i",{staticClass:"las la-eye"})]):e._e()])]),e._v(" "),t("div",{staticClass:"p-2 border-b border-gray-200 flex justify-between text-gray-600"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchCustomerValue,expression:"searchCustomerValue"}],ref:"searchField",staticClass:"rounded border-2 border-blue-400 bg-gray-100 w-full p-2",attrs:{placeholder:"Search Customer",type:"text"},domProps:{value:e.searchCustomerValue},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.attemptToChoose()},input:function(t){t.target.composing||(e.searchCustomerValue=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"h-3/5-screen xl:h-2/5-screen overflow-y-auto"},[t("ul",[e.customers&&0===e.customers.length?t("li",{staticClass:"p-2 text-center text-gray-600"},[e._v("\n                    "+e._s(e.__("No customer match your query..."))+"\n                ")]):e._e(),e._v(" "),e.customers&&0===e.customers.length?t("li",{staticClass:"p-2 cursor-pointer text-center text-gray-600",on:{click:function(t){return e.createCustomerWithMatch(e.searchCustomerValue)}}},[t("span",{staticClass:"border-b border-dashed border-blue-400"},[e._v(e._s(e.__("Create a customer")))])]):e._e(),e._v(" "),e._l(e.customers,(function(r){return t("li",{key:r.id,staticClass:"cursor-pointer hover:bg-gray-100 p-2 border-b border-gray-200 text-gray-600 flex justify-between items-center",on:{click:function(t){return e.selectCustomer(r)}}},[t("span",[e._v(e._s(r.name))]),e._v(" "),t("p",{staticClass:"flex items-center"},[r.owe_amount>0?t("span",{staticClass:"text-red-600"},[e._v("-"+e._s(e._f("currency")(r.owe_amount)))]):e._e(),e._v(" "),r.owe_amount>0?t("span",[e._v("/")]):e._e(),e._v(" "),t("span",{staticClass:"text-green-600"},[e._v(e._s(e._f("currency")(r.purchases_amount)))]),e._v(" "),t("button",{staticClass:"mx-2 rounded-full h-8 w-8 flex items-center justify-center border border-gray-200 hover:bg-blue-400 hover:text-white hover:border-transparent",on:{click:function(t){return e.openCustomerHistory(r,t)}}},[t("i",{staticClass:"las la-eye"})])])])}))],2)]),e._v(" "),e.isLoading?t("div",{staticClass:"z-10 top-0 absolute w-full h-full flex items-center justify-center"},[t("ns-spinner",{attrs:{size:"24",border:"8"}})],1):e._e()])])}),[],!1,null,null,null).exports},2384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(4503),s=r(277),i=r(2285),o=r(7366),a=r(40),l=r(9165);const c={mounted:function(){this.closeWithOverlayClicked(),this.loadTransactionFields()},data:function(){return{fields:[],isSubmiting:!1,formValidation:new a.Z}},methods:{__:l.__,closeWithOverlayClicked:n.Z,proceed:function(){var e=this,t=this.$popupParams.customer,r=this.formValidation.extractFields(this.fields);this.isSubmiting=!0,s.ih.post("/api/nexopos/v4/customers/".concat(t.id,"/account-history"),r).subscribe((function(t){e.isSubmiting=!1,s.kX.success(t.message).subscribe(),e.$popupParams.resolve(t),e.$popup.close()}),(function(t){e.isSubmiting=!1,s.kX.error(t.message).subscribe(),e.$popupParams.reject(t)}))},close:function(){this.$popup.close(),this.$popupParams.reject(!1)},loadTransactionFields:function(){var e=this;s.ih.get("/api/nexopos/v4/fields/ns.customers-account").subscribe((function(t){e.fields=e.formValidation.createFields(t)}))}}};var u=r(1900);const d=(0,u.Z)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-6/7-screen md:w-5/7-screen lg:w-4/7-screen h-6/7-screen md:h-5/7-screen lg:h-5/7-screen overflow-hidden shadow-lg bg-white flex flex-col relative"},[t("div",{staticClass:"p-2 border-b border-gray-200 flex justify-between items-center"},[t("h2",{staticClass:"font-semibold"},[e._v(e._s(e.__("New Transaction")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto overflow-y-auto"},[0===e.fields.length?t("div",{staticClass:"h-full w-full flex items-center justify-center"},[t("ns-spinner")],1):e._e(),e._v(" "),e.fields.length>0?t("div",{staticClass:"p-2"},e._l(e.fields,(function(e,r){return t("ns-field",{key:r,attrs:{field:e}})})),1):e._e()]),e._v(" "),t("div",{staticClass:"p-2 bg-white justify-between border-t border-gray-200 flex"},[t("div"),e._v(" "),t("div",{staticClass:"px-1"},[t("div",{staticClass:"-mx-2 flex flex-wrap"},[t("div",{staticClass:"px-1"},[t("ns-button",{attrs:{type:"danger"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.__("Close")))])],1),e._v(" "),t("div",{staticClass:"px-1"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.proceed()}}},[e._v(e._s(e.__("Proceed")))])],1)])])]),e._v(" "),0===e.isSubmiting?t("div",{staticClass:"h-full w-full absolute flex items-center justify-center",staticStyle:{background:"rgb(0 98 171 / 45%)"}},[t("ns-spinner")],1):e._e()])}),[],!1,null,null,null).exports;var f=r(5140),p=r(7995),h=r(4914);const v={name:"ns-pos-customers",data:function(){return{activeTab:"create-customers",customer:null,subscription:null,orders:[],options:{},optionsSubscriber:null,selectedTab:"orders",isLoadingCoupons:!1,isLoadingRewards:!1,coupons:[],rewardsResponse:[],order:null}},components:{nsPaginate:r(1156).Z},destroyed:function(){this.subscription.unsubscribe(),this.optionsSubscriber.unsubscribe()},mounted:function(){var e=this;this.closeWithOverlayClicked(),this.optionsSubscriber=POS.options.subscribe((function(t){e.options=t})),this.subscription=POS.order.subscribe((function(t){e.order=t,void 0!==e.$popupParams.customer?(e.activeTab="account-payment",e.customer=e.$popupParams.customer,e.loadCustomerOrders(e.customer.id)):void 0!==t.customer&&(e.activeTab="account-payment",e.customer=t.customer,e.loadCustomerOrders(e.customer.id))})),this.popupCloser()},methods:{__:l.__,popupResolver:h.Z,popupCloser:n.Z,getType:function(e){switch(e){case"percentage_discount":return(0,l.__)("Percentage Discount");case"flat_discount":return(0,l.__)("Flat Discount")}},closeWithOverlayClicked:n.Z,doChangeTab:function(e){this.selectedTab=e,"coupons"===e&&this.loadCoupons(),"rewards"===e&&this.loadRewards()},loadCoupons:function(){var e=this;this.isLoadingCoupons=!0,s.ih.get("/api/nexopos/v4/customers/".concat(this.customer.id,"/coupons")).subscribe({next:function(t){e.coupons=t,e.isLoadingCoupons=!1},error:function(t){e.isLoadingCoupons=!1}})},loadRewards:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/nexopos/v4/customers/".concat(this.customer.id,"/rewards");this.isLoadingRewards=!0,s.ih.get(t).subscribe({next:function(t){e.rewardsResponse=t,e.isLoadingRewards=!1},error:function(t){e.isLoadingRewards=!1}})},allowedForPayment:function(e){return["unpaid","partially_paid","hold"].includes(e.payment_status)},prefillForm:function(e){void 0!==this.$popupParams.name&&(e.main.value=this.$popupParams.name)},openCustomerSelection:function(){this.$popup.close(),i.G.show(o.Z)},loadCustomerOrders:function(e){var t=this;s.ih.get("/api/nexopos/v4/customers/".concat(e,"/orders")).subscribe((function(e){t.orders=e}))},newTransaction:function(e){new Promise((function(t,r){i.G.show(d,{customer:e,resolve:t,reject:r})})).then((function(t){POS.loadCustomer(e.id).subscribe((function(e){POS.selectCustomer(e)}))}))},applyCoupon:function(e){var t=this;void 0===this.order.customer?i.G.show(p.Z,{title:(0,l.__)("Use Customer ?"),message:(0,l.__)("No customer is selected. Would you like to proceed with this customer ?"),onAction:function(r){r&&POS.selectCustomer(t.customer).then((function(r){t.proceedApplyingCoupon(e)}))}}):this.order.customer.id===this.customer.id?this.proceedApplyingCoupon(e):this.order.customer.id!==this.customer.id&&i.G.show(p.Z,{title:(0,l.__)("Change Customer ?"),message:(0,l.__)("Would you like to assign this customer to the ongoing order ?"),onAction:function(r){r&&POS.selectCustomer(t.customer).then((function(r){t.proceedApplyingCoupon(e)}))}})},proceedApplyingCoupon:function(e){var t=this;new Promise((function(t,r){i.G.show(f.Z,{apply_coupon:e.code,resolve:t,reject:r})})).then((function(e){t.popupResolver(!1)})).catch((function(e){}))},handleSavedCustomer:function(e){s.kX.success(e.message).subscribe(),POS.selectCustomer(e.entry),this.$popup.close()}}};const b=(0,u.Z)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow-lg rounded w-95vw h-95vh lg:w-3/5-screen flex flex-col overflow-hidden"},[t("div",{staticClass:"p-2 flex justify-between items-center border-b border-gray-400"},[t("h3",{staticClass:"font-semibold text-gray-700"},[e._v(e._s(e.__("Customers")))]),e._v(" "),t("div",[t("ns-close-button",{on:{click:function(t){return e.$popup.close()}}})],1)]),e._v(" "),t("div",{staticClass:"flex-auto flex p-2 bg-gray-200 overflow-y-auto"},[t("ns-tabs",{attrs:{active:e.activeTab},on:{active:function(t){e.activeTab=t}}},[t("ns-tabs-item",{attrs:{identifier:"create-customers",label:"New Customer"}},["yes"===e.options.ns_pos_customers_creation_enabled?t("ns-crud-form",{attrs:{"submit-url":"/api/nexopos/v4/crud/ns.customers",src:"/api/nexopos/v4/crud/ns.customers/form-config"},on:{updated:function(t){return e.prefillForm(t)},save:function(t){return e.handleSavedCustomer(t)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.__("Customer Name")))]},proxy:!0},{key:"save",fn:function(){return[e._v(e._s(e.__("Save Customer")))]},proxy:!0}],null,!1,2432171054)}):e._e(),e._v(" "),t("div",{staticClass:"h-full flex-col w-full flex items-center justify-center"},[t("i",{staticClass:"lar la-hand-paper text-6xl text-gray-700"}),e._v(" "),t("h3",{staticClass:"font-medium text-2xl text-gray-700"},[e._v(e._s(e.__("Not Authorized")))]),e._v(" "),t("p",{staticClass:"text-gray-600"},[e._v(e._s(e.__("Creating customers has been explicitly disabled from the settings.")))])])],1),e._v(" "),t("ns-tabs-item",{staticClass:"flex",staticStyle:{padding:"0!important"},attrs:{identifier:"account-payment",label:e.__("Customer Account")}},[null===e.customer?t("div",{staticClass:"flex-auto w-full flex items-center justify-center flex-col p-4"},[t("i",{staticClass:"lar la-frown text-6xl text-gray-700"}),e._v(" "),t("h3",{staticClass:"font-medium text-2xl text-gray-700"},[e._v(e._s(e.__("No Customer Selected")))]),e._v(" "),t("p",{staticClass:"text-gray-600"},[e._v(e._s(e.__("In order to see a customer account, you need to select one customer.")))]),e._v(" "),t("div",{staticClass:"my-2"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.openCustomerSelection()}}},[e._v(e._s(e.__("Select Customer")))])],1)]):e._e(),e._v(" "),e.customer?t("div",{staticClass:"flex flex-col flex-auto"},[t("div",{staticClass:"flex-auto p-2 flex flex-col"},[t("div",{staticClass:"-mx-4 flex flex-wrap"},[t("div",{staticClass:"px-4 mb-4 w-full"},[t("h2",{staticClass:"font-semibold text-gray-700"},[e._v(e._s(e.__("Summary For"))+" : "+e._s(e.customer.name))])]),e._v(" "),t("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[t("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-green-400 to-green-700 p-2 flex flex-col text-white"},[t("h3",{staticClass:"font-medium text-lg"},[e._v(e._s(e.__("Total Purchases")))]),e._v(" "),t("div",{staticClass:"w-full flex justify-end"},[t("h2",{staticClass:"text-2xl font-bold"},[e._v(e._s(e._f("currency")(e.customer.purchases_amount)))])])])]),e._v(" "),t("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[t("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-red-500 to-red-700 p-2 text-white"},[t("h3",{staticClass:"font-medium text-lg"},[e._v(e._s(e.__("Total Owed")))]),e._v(" "),t("div",{staticClass:"w-full flex justify-end"},[t("h2",{staticClass:"text-2xl font-bold"},[e._v(e._s(e._f("currency")(e.customer.owed_amount)))])])])]),e._v(" "),t("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[t("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-blue-500 to-blue-700 p-2 text-white"},[t("h3",{staticClass:"font-medium text-lg"},[e._v(e._s(e.__("Account Amount")))]),e._v(" "),t("div",{staticClass:"w-full flex justify-end"},[t("h2",{staticClass:"text-2xl font-bold"},[e._v(e._s(e._f("currency")(e.customer.account_amount)))])])])]),e._v(" "),t("div",{staticClass:"px-4 mb-4 w-full md:w-1/4"},[t("div",{staticClass:"rounded-lg shadow bg-transparent bg-gradient-to-br from-teal-500 to-teal-700 p-2 text-white"},[t("h3",{staticClass:"font-medium text-lg"},[e._v(e._s(e.__("Credit Limit")))]),e._v(" "),t("div",{staticClass:"w-full flex justify-end"},[t("h2",{staticClass:"text-2xl font-bold"},[e._v(e._s(e._f("currency")(e.customer.credit_limit_amount)))])])])])]),e._v(" "),t("div",{staticClass:"flex flex-auto flex-col overflow-hidden"},[t("ns-tabs",{attrs:{active:e.selectedTab},on:{changeTab:function(t){return e.doChangeTab(t)}}},[t("ns-tabs-item",{attrs:{identifier:"orders",label:e.__("Orders")}},[t("div",{staticClass:"py-2 w-full"},[t("h2",{staticClass:"font-semibold text-gray-700"},[e._v(e._s(e.__("Last Purchases")))])]),e._v(" "),t("div",{staticClass:"flex-auto flex-col flex overflow-hidden"},[t("div",{staticClass:"flex-auto overflow-y-auto"},[t("table",{staticClass:"table w-full"},[t("thead",[t("tr",{staticClass:"text-gray-700"},[t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold",attrs:{width:"150"}},[e._v(e._s(e.__("Order")))]),e._v(" "),t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold"},[e._v(e._s(e.__("Total")))]),e._v(" "),t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold"},[e._v(e._s(e.__("Status")))]),e._v(" "),t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold",attrs:{width:"50"}},[e._v(e._s(e.__("Options")))])])]),e._v(" "),t("tbody",{staticClass:"text-gray-700"},[0===e.orders.length?t("tr",[t("td",{staticClass:"border border-gray-200 p-2 text-center",attrs:{colspan:"4"}},[e._v(e._s(e.__("No orders...")))])]):e._e(),e._v(" "),e._l(e.orders,(function(r){return t("tr",{key:r.id},[t("td",{staticClass:"border border-gray-200 p-2 text-center"},[e._v(e._s(r.code))]),e._v(" "),t("td",{staticClass:"border border-gray-200 p-2 text-center"},[e._v(e._s(e._f("currency")(r.total)))]),e._v(" "),t("td",{staticClass:"border border-gray-200 p-2 text-right"},[e._v(e._s(r.human_status))]),e._v(" "),t("td",{staticClass:"border border-gray-200 p-2 text-center"},[e.allowedForPayment(r)?t("button",{staticClass:"hover:bg-blue-400 hover:border-transparent hover:text-white rounded-full h-8 px-2 flex items-center justify-center border border-gray bg-white"},[t("i",{staticClass:"las la-wallet"}),e._v(" "),t("span",{staticClass:"ml-1"},[e._v(e._s(e.__("Payment")))])]):e._e()])])}))],2)])])])]),e._v(" "),t("ns-tabs-item",{attrs:{identifier:"coupons",label:e.__("Coupons")}},[e.isLoadingCoupons?t("div",{staticClass:"flex-auto h-full justify-center flex items-center"},[t("ns-spinner",{attrs:{size:"36"}})],1):e._e(),e._v(" "),e.isLoadingCoupons?e._e():[t("div",{staticClass:"py-2 w-full"},[t("h2",{staticClass:"font-semibold text-gray-700"},[e._v(e._s(e.__("Coupons")))])]),e._v(" "),t("div",{staticClass:"flex-auto flex-col flex overflow-hidden"},[t("div",{staticClass:"flex-auto overflow-y-auto"},[t("table",{staticClass:"table w-full"},[t("thead",[t("tr",{staticClass:"text-gray-700"},[t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold",attrs:{width:"150"}},[e._v(e._s(e.__("Name")))]),e._v(" "),t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold"},[e._v(e._s(e.__("Type")))]),e._v(" "),t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold"})])]),e._v(" "),t("tbody",{staticClass:"text-gray-700 text-sm"},[0===e.coupons.length?t("tr",[t("td",{staticClass:"border border-gray-200 p-2 text-center",attrs:{colspan:"4"}},[e._v(e._s(e.__("No coupons for the selected customer...")))])]):e._e(),e._v(" "),e._l(e.coupons,(function(r){return t("tr",{key:r.id},[t("td",{staticClass:"border border-gray-200 p-2",attrs:{width:"300"}},[t("h3",[e._v(e._s(r.name))]),e._v(" "),t("div",{},[t("ul",{staticClass:"-mx-2 flex"},[t("li",{staticClass:"text-xs text-gray-600 px-2"},[e._v(e._s(e.__("Usage :"))+" "+e._s(r.usage)+"/"+e._s(r.limit_usage))]),e._v(" "),t("li",{staticClass:"text-xs text-gray-600 px-2"},[e._v(e._s(e.__("Code :"))+" "+e._s(r.code))])])])]),e._v(" "),t("td",{staticClass:"border border-gray-200 p-2 text-center"},[e._v(e._s(e.getType(r.coupon.type))+" \n                                                                "),"percentage_discount"===r.coupon.type?t("span",[e._v("\n                                                                    ("+e._s(r.coupon.discount_value)+"%)\n                                                                ")]):e._e(),e._v(" "),"flat_discount"===r.coupon.type?t("span",[e._v("\n                                                                    ("+e._s(e._f("currency")(r.coupon.discount_value))+")\n                                                                ")]):e._e()]),e._v(" "),t("td",{staticClass:"border border-gray-200 p-2 text-right"},[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.applyCoupon(r)}}},[e._v(e._s(e.__("Use Coupon")))])],1)])}))],2)])])])]],2),e._v(" "),t("ns-tabs-item",{attrs:{identifier:"rewards",label:e.__("Rewards")}},[e.isLoadingRewards?t("div",{staticClass:"flex-auto h-full justify-center flex items-center"},[t("ns-spinner",{attrs:{size:"36"}})],1):e._e(),e._v(" "),e.isLoadingRewards?e._e():[t("div",{staticClass:"py-2 w-full"},[t("h2",{staticClass:"font-semibold text-gray-700"},[e._v(e._s(e.__("Rewards")))])]),e._v(" "),t("div",{staticClass:"flex-auto flex-col flex overflow-hidden"},[t("div",{staticClass:"flex-auto overflow-y-auto"},[t("table",{staticClass:"table w-full"},[t("thead",[t("tr",{staticClass:"text-gray-700"},[t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold",attrs:{width:"150"}},[e._v(e._s(e.__("Name")))]),e._v(" "),t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold"},[e._v(e._s(e.__("Points")))]),e._v(" "),t("th",{staticClass:"p-2 border border-gray-200 bg-gray-100 font-semibold"},[e._v(e._s(e.__("Target")))])])]),e._v(" "),e.rewardsResponse.data?t("tbody",{staticClass:"text-gray-700 text-sm"},[0===e.rewardsResponse.data.length?t("tr",[t("td",{staticClass:"border border-gray-200 p-2 text-center",attrs:{colspan:"4"}},[e._v(e._s(e.__("No rewards available the selected customer...")))])]):e._e(),e._v(" "),e._l(e.rewardsResponse.data,(function(r){return t("tr",{key:r.id},[t("td",{staticClass:"border border-gray-200 p-2",attrs:{width:"300"}},[t("h3",{staticClass:"text-center"},[e._v(e._s(r.reward_name))])]),e._v(" "),t("td",{staticClass:"border border-gray-200 p-2",attrs:{width:"300"}},[t("h3",{staticClass:"text-center"},[e._v(e._s(r.points))])]),e._v(" "),t("td",{staticClass:"border border-gray-200 p-2",attrs:{width:"300"}},[t("h3",{staticClass:"text-center"},[e._v(e._s(r.target))])])])}))],2):e._e()])])]),e._v(" "),t("div",{staticClass:"py-1 flex justify-end"},[t("ns-paginate",{attrs:{pagination:e.rewardsResponse},on:{load:function(t){return e.loadRewards(t)}}})],1)]],2)],1)],1)]),e._v(" "),t("div",{staticClass:"p-2 border-t border-gray-400 flex justify-between"},[t("div"),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.newTransaction(e.customer)}}},[e._v(e._s(e.__("Account Transaction")))])],1)])]):e._e()])],1)],1)])}),[],!1,null,null,null).exports},8674:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const n={name:"ns-pos-loading-popup"};const s=(0,r(1900).Z)(n,(function(){return(0,this._self._c)("ns-spinner")}),[],!1,null,null,null).exports},8997:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(4914);r(1294);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(){i=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var s=t&&t.prototype instanceof y?t:y,i=Object.create(s.prototype),a=new F(n||[]);return o(i,"_invoke",{value:O(e,r,a)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",v="suspendedYield",b="executing",m="completed",g={};function y(){}function _(){}function x(){}var w={};d(w,l,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(L([])));k&&k!==r&&n.call(k,l)&&(w=k);var S=x.prototype=y.prototype=Object.create(w);function j(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(i,o,a,l){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function s(){return new t((function(t,s){r(e,n,t,s)}))}return i=i?i.then(s,s):s()}})}function O(t,r,n){var s=h;return function(i,o){if(s===b)throw new Error("Generator is already running");if(s===m){if("throw"===i)throw o;return{value:e,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=T(a,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===h)throw s=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=b;var c=p(t,r,n);if("normal"===c.type){if(s=n.done?m:v,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=m,n.method="throw",n.arg=c.arg)}}}function T(t,r){var n=r.method,s=t.iterator[n];if(s===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=p(s,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(s(t)+" is not iterable")}return _.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:_,configurable:!0}),_.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},j(P.prototype),d(P.prototype,c,(function(){return this})),t.AsyncIterator=P,t.async=function(e,r,n,s,i){void 0===i&&(i=Promise);var o=new P(f(e,r,n,s),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(S),d(S,u,"Generator"),d(S,l,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function s(n,s){return a.type="throw",a.arg=t,r.next=n,s&&(r.method="next",r.arg=e),!!s}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),$(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;$(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function o(e,t,r,n,s,i,o){try{var a=e[i](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,s)}const a={data:function(){return{types:[],typeSubscription:null}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.resolveIfQueued(!1)})),this.typeSubscription=POS.types.subscribe((function(t){e.types=t,1===Object.values(e.types).length&&e.select(Object.keys(e.types)[0])}))},destroyed:function(){this.typeSubscription.unsubscribe()},methods:{__:r(9165).__,resolveIfQueued:n.Z,select:function(e){var t,r=this;return(t=i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.values(r.types).forEach((function(e){return e.selected=!1})),r.types[e].selected=!0,n=r.types[e],t.prev=3,t.next=6,POS.triggerOrderTypeSelection(n);case 6:t.sent,POS.types.next(r.types),r.resolveIfQueued(n),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(3);case 13:case"end":return t.stop()}}),t,null,[[3,11]])})),function(){var e=this,r=arguments;return new Promise((function(n,s){var i=t.apply(e,r);function a(e){o(i,n,s,a,l,"next",e)}function l(e){o(i,n,s,a,l,"throw",e)}a(void 0)}))})()}}};const l=(0,r(1900).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-full w-4/5-screen md:w-2/5-screen lg:w-2/5-screen xl:w-2/6-screen bg-white shadow-lg"},[t("div",{staticClass:"h-16 flex justify-center items-center",attrs:{id:"header"}},[t("h3",{staticClass:"font-bold text-gray-700"},[e._v(e._s(e.__("Define The Order Type")))])]),e._v(" "),0===Object.values(e.types).length?t("div",{staticClass:"grid grid-flow-row grid-cols-1 grid-rows-1"},[t("div",{staticClass:"h-full w-full flex items-center justify-center flex-col"},[t("i",{staticClass:"las la-frown text-7xl text-red-400"}),e._v(" "),t("div",{staticClass:"p-4 md:w-2/3"},[t("p",{staticClass:"text-center text-gray-600"},[e._v(e._s(e.__("No payment type has been selected on the settings. Please check your POS features and choose the supported order type")))]),e._v(" "),t("div",{staticClass:"flex justify-center py-1"},[t("ns-link",{attrs:{target:"_blank",type:"info",href:"https://my.nexopos.com/en/documentation/components/order-types"}},[e._v(e._s(e.__("Read More")))])],1)])])]):e._e(),e._v(" "),Object.values(e.types).length>0?t("div",{staticClass:"grid grid-flow-row grid-cols-2 grid-rows-2"},e._l(e.types,(function(r){return t("div",{key:r.identifier,staticClass:"hover:bg-blue-100 h-56 flex items-center justify-center flex-col cursor-pointer border border-gray-200",class:r.selected?"bg-blue-100":"",on:{click:function(t){return e.select(r.identifier)}}},[t("img",{staticClass:"w-32 h-32",attrs:{src:r.icon,alt:""}}),e._v(" "),t("h4",{staticClass:"font-semibold text-xl my-2 text-gray-700"},[e._v(e._s(r.label))])])})),0):e._e()])}),[],!1,null,null,null).exports},1836:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(277),s=r(9165);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const a={data:function(){return{finalValue:1,virtualStock:null,allSelected:!0,isLoading:!1,keys:[].concat(i([1,2,3].map((function(e){return{identifier:e,value:e}}))),i([4,5,6].map((function(e){return{identifier:e,value:e}}))),i([7,8,9].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.reject(!1),e.$popup.close())})),this.$popupParams.product.quantity&&(this.finalValue=this.$popupParams.product.quantity),document.addEventListener("keyup",this.handleKeyPress)},destroyed:function(){document.removeEventListener("keypress",this.handleKeyPress)},methods:{__:s.__,handleKeyPress:function(e){13===e.keyCode&&this.inputValue({identifier:"next"})},inputValue:function(e){if("next"===e.identifier){var t=this.$popupParams,r=t.product,i=t.data,o=parseFloat(this.finalValue);if(0===o)return n.kX.error((0,s.__)("Please provide a quantity")).subscribe();if("enabled"===r.$original().stock_management){var a=POS.getStockUsage(r.$original().id,i.unit_quantity_id)-(r.quantity||0);if(o>parseFloat(i.$quantities().quantity)-a)return n.kX.error((0,s.__)("Unable to add the product, there is not enough stock. Remaining %s").replace("%s",i.$quantities().quantity-a)).subscribe()}this.resolve({quantity:o})}else"backspace"===e.identifier?this.allSelected?(this.finalValue=0,this.allSelected=!1):(this.finalValue=this.finalValue.toString(),this.finalValue=this.finalValue.substr(0,this.finalValue.length-1)||0):this.allSelected?(this.finalValue=e.value,this.finalValue=parseFloat(this.finalValue),this.allSelected=!1):(this.finalValue+=""+e.value,this.finalValue=parseFloat(this.finalValue))},resolve:function(e){this.$popupParams.resolve(e),this.$popup.close()}}};const l=(0,r(1900).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white shadow min-h-2/5-screen w-3/4-screen md:w-3/5-screen lg:w-2/5-screen xl:w-2/5-screen relative"},[e.isLoading?t("div",{staticClass:"flex w-full h-full absolute top-O left-0 items-center justify-center",staticStyle:{background:"rgb(202 202 202 / 49%)"},attrs:{id:"loading-overlay"}},[t("ns-spinner")],1):e._e(),e._v(" "),t("div",{staticClass:"flex-shrink-0 py-2 border-b border-gray-200"},[t("h1",{staticClass:"text-xl font-bold text-gray-700 text-center"},[e._v(e._s(e.__("Define Quantity")))])]),e._v(" "),t("div",{staticClass:"h-16 border-b bg-gray-800 text-white border-gray-200 flex items-center justify-center",attrs:{id:"screen"}},[t("h1",{staticClass:"font-bold text-3xl"},[e._v(e._s(e.finalValue))])]),e._v(" "),t("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-3",attrs:{id:"numpad"}},e._l(e.keys,(function(r,n){return t("div",{key:n,staticClass:"hover:bg-blue-400 hover:text-white hover:border-blue-600 text-xl font-bold border border-gray-200 h-24 flex items-center justify-center cursor-pointer",on:{click:function(t){return e.inputValue(r)}}},[void 0!==r.value?t("span",[e._v(e._s(r.value))]):e._e(),e._v(" "),r.icon?t("i",{staticClass:"las",class:r.icon}):e._e()])})),0)])}),[],!1,null,null,null).exports},1294:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(277),s=r(4914),i=r(40);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){var n;return n=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==o(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u={name:"ns-pos-shipping-popup",computed:{activeTabFields:function(){if(null!==this.tabs)for(var e in this.tabs)if(this.tabs[e].active)return this.tabs[e].fields;return[]},useBillingInfo:function(){return null!==this.tabs?this.tabs.billing.fields[0].value:new Object},useShippingInfo:function(){return null!==this.tabs?this.tabs.shipping.fields[0].value:new Object}},destroyed:function(){this.orderSubscription.unsubscribe()},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.resolveIfQueued(!1)})),this.orderSubscription=POS.order.subscribe((function(t){return e.order=t})),this.loadForm()},data:function(){return{tabs:null,orderSubscription:null,order:null,formValidation:new i.Z}},watch:{useBillingInfo:function(e){var t=this;1===e&&this.tabs.billing.fields.forEach((function(e){"_use_customer_billing"!==e.name&&(e.value=t.order.customer.billing?t.order.customer.billing[e.name]:e.value)}))},useShippingInfo:function(e){var t=this;1===e&&this.tabs.shipping.fields.forEach((function(e){"_use_customer_shipping"!==e.name&&(e.value=t.order.customer.shipping?t.order.customer.shipping[e.name]:e.value)}))}},methods:{__,resolveIfQueued:s.Z,submitInformations:function(){var e=this.formValidation.extractForm({tabs:this.tabs});for(var t in e.general)["shipping","shipping_rate"].includes(t)&&(e.general[t]=parseFloat(e.general[t]));this.order=l(l({},this.order),e.general),delete e.general,delete e.shipping._use_customer_shipping,delete e.billing._use_customer_billing,this.order.addresses=e,POS.order.next(this.order),POS.refreshCart(),this.resolveIfQueued(!0)},closePopup:function(){this.resolveIfQueued(!1)},toggle:function(e){for(var t in this.tabs)this.tabs[t].active=!1;this.tabs[e].active=!0},loadForm:function(){var e=this;n.ih.get("/api/nexopos/v4/forms/ns.pos-addresses").subscribe((function(t){var r=t.tabs,n=function(t){"general"===t?r[t].fields.forEach((function(t){t.value=e.order[t.name]||""})):r[t].fields.forEach((function(r){r.value=e.order.addresses[t]?e.order.addresses[t][r.name]:""}))};for(var s in r)n(s);e.tabs=e.formValidation.initializeTabs(r)}))}}};const d=(0,r(1900).Z)(u,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white w-6/7-screen md:w-4/5-screen lg:w-3/5-screen h-6/7-screen md:h-4/5-screen shadow-lg flex flex-col overflow-hidden"},[t("div",{staticClass:"p-2 border-b border-gray-200 flex justify-between items-center"},[t("h3",{staticClass:"font-bold text-gray-700"},[e._v(e._s(e.__("Shipping & Billing")))]),e._v(" "),t("div",{staticClass:"tools"},[t("button",{staticClass:"hover:bg-red-400 hover:text-white hover:border-red-600 rounded-full h-8 w-8 border items-center justify-center",on:{click:function(t){return e.closePopup()}}},[t("i",{staticClass:"las la-times"})])])]),e._v(" "),t("div",{staticClass:"flex-auto bg-gray-200 p-4 overflow-y-auto"},[t("div",{staticClass:"my-5",attrs:{id:"tabs-container"}},[t("div",{staticClass:"header flex",staticStyle:{"margin-bottom":"-1px"}},e._l(e.tabs,(function(r,n){return t("div",{key:n,staticClass:"tab rounded-tl rounded-tr border border-gray-400 px-3 py-2 text-gray-700 cursor-pointer",class:r.active?"border-b-0 bg-white":"border bg-gray-200",staticStyle:{"margin-right":"-1px"},on:{click:function(t){return e.toggle(n)}}},[e._v(e._s(r.label))])})),0),e._v(" "),t("div",{staticClass:"border border-gray-400 p-4 bg-white"},[t("div",{staticClass:"-mx-4 flex flex-wrap"},e._l(e.activeTabFields,(function(r,n){return t("div",{key:n,class:"px-4 w-full md:w-1/2 lg:w-1/3"},[t("ns-field",{attrs:{field:r},on:{blur:function(t){return e.formValidation.checkField(r)},change:function(t){return e.formValidation.checkField(r)}}})],1)})),0)])])]),e._v(" "),t("div",{staticClass:"p-2 flex justify-between border-t border-gray-300"},[t("div"),e._v(" "),t("div",[t("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.submitInformations()}}},[e._v(e._s(e.__("Save")))])],1)])])}),[],!1,null,null,null).exports}},e=>{e.O(0,[898],(()=>{return t=6702,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=pos.min.js.map